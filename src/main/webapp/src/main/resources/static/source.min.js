/*!
  * https://github.com/paulmillr/es6-shim
  * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
  *   and contributors,  MIT License
  * es6-shim: v0.35.1
  * see https://github.com/paulmillr/es6-shim/blob/0.35.1/LICENSE
  * Details and documentation:
  * https://github.com/paulmillr/es6-shim/
  */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var O={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var m=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){O.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=m(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var F=Math.exp;var L=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Symbol||{};var H=G.species||"@@species";var V=Number.isNaN||function isNaN(e){return e!==e};var B=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var $=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(V(t)){return t}return t<0?-1:1};var U=function isArguments(e){return g(e)==="[object Arguments]"};var J=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var X=U(arguments)?U:J;var K={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var Z=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);O.preserveToString(e[t],n)};var Y=typeof G==="function"&&typeof G["for"]==="function"&&K.symbol(G());var Q=K.symbol(G.iterator)?G.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){Q="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ee=S.Reflect;var te=String;var re={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!re.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(e==null){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"},ToObject:function(e,t){return Object(re.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return re.IsCallable(e)},ToInt32:function(e){return re.ToNumber(e)>>0},ToUint32:function(e){return re.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=re.ToNumber(e);if(V(t)){return 0}if(t===0||!B(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=re.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return V(e)&&V(t)},SameValueZero:function(e,t){return e===t||V(e)&&V(t)},IsIterable:function(e){return re.TypeIsObject(e)&&(typeof e[Q]!=="undefined"||X(e))},GetIterator:function(e){if(X(e)){return new q(e,"value")}var t=re.GetMethod(e,Q);if(!re.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=re.Call(t,e);if(!re.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=re.ToObject(e)[t];if(r===void 0||r===null){return void 0}if(!re.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=re.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=re.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!re.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!re.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=re.IteratorNext(e);var r=re.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ee.construct){return ee.construct(e,t,o)}var i=o.prototype;if(!re.TypeIsObject(i)){i=Object.prototype}var a=m(i);var u=re.Call(e,a,t);return re.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!re.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[H];if(n===void 0||n===null){return t}if(!re.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=re.ToString(e);var i="<"+t;if(r!==""){var a=re.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!re.TypeIsObject(e)){return false}var t=e[G.match];if(typeof t!=="undefined"){return!!t}return K.regex(e)},ToString:function ToString(e){return te(e)}};if(s&&Y){var ne=function defineWellKnownSymbol(e){if(K.symbol(G[e])){return G[e]}var t=G["for"]("Symbol."+e);Object.defineProperty(G,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!K.symbol(G.search)){var oe=ne("search");var ie=String.prototype.search;h(RegExp.prototype,oe,function search(e){return re.Call(ie,e,[this])});var ae=function search(e){var t=re.RequireObjectCoercible(this);if(e!==null&&typeof e!=="undefined"){var r=re.GetMethod(e,oe);if(typeof r!=="undefined"){return re.Call(r,e,[t])}}return re.Call(ie,t,[re.ToString(e)])};Z(String.prototype,"search",ae)}if(!K.symbol(G.replace)){var ue=ne("replace");var fe=String.prototype.replace;h(RegExp.prototype,ue,function replace(e,t){return re.Call(fe,e,[this,t])});var se=function replace(e,t){var r=re.RequireObjectCoercible(this);if(e!==null&&typeof e!=="undefined"){var n=re.GetMethod(e,ue);if(typeof n!=="undefined"){return re.Call(n,e,[r,t])}}return re.Call(fe,r,[re.ToString(e),t])};Z(String.prototype,"replace",se)}if(!K.symbol(G.split)){var ce=ne("split");var le=String.prototype.split;h(RegExp.prototype,ce,function split(e,t){return re.Call(le,e,[this,t])});var pe=function split(e,t){var r=re.RequireObjectCoercible(this);if(e!==null&&typeof e!=="undefined"){var n=re.GetMethod(e,ce);if(typeof n!=="undefined"){return re.Call(n,e,[r,t])}}return re.Call(le,r,[re.ToString(e),t])};Z(String.prototype,"split",pe)}var ve=K.symbol(G.match);var ye=ve&&function(){var e={};e[G.match]=function(){return 42};return"a".match(e)!==42}();if(!ve||ye){var he=ne("match");var be=String.prototype.match;h(RegExp.prototype,he,function match(e){return re.Call(be,e,[this])});var ge=function match(e){var t=re.RequireObjectCoercible(this);if(e!==null&&typeof e!=="undefined"){var r=re.GetMethod(e,he);if(typeof r!=="undefined"){return re.Call(r,e,[t])}}return re.Call(be,t,[re.ToString(e)])};Z(String.prototype,"match",ge)}}var de=function wrapConstructor(e,t,r){O.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}O.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;O.redefine(e.prototype,"constructor",t)};var Oe=function(){return this};var me=function(e){if(s&&!z(e,H)){O.getter(e,H,Oe)}};var we=function(e,t){var r=t||function iterator(){return this};h(e,Q,r);if(!e[Q]&&K.symbol(Q)){e[Q]=r}};var je=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Se=function createDataPropertyOrThrow(e,t,r){je(e,t,r);if(!re.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Te=function(e,t,r,n){if(!re.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!re.TypeIsObject(o)){o=r}var i=m(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Ie=String.fromCodePoint;Z(String,"fromCodePoint",function fromCodePoint(e){return re.Call(Ie,this,arguments)})}var Ee={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!re.SameValue(r,re.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=re.ToObject(e,"bad callSite");var r=re.ToObject(t.raw,"bad raw value");var n=r.length;var o=re.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=re.ToString(a);s=re.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=re.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){Z(String,"raw",Ee.raw)}b(String,Ee);var Pe=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Ce=Infinity;var Me={repeat:function repeat(e){var t=re.ToString(re.RequireObjectCoercible(this));var r=re.ToInteger(e);if(r<0||r>=Ce){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return Pe(t,r)},startsWith:function startsWith(e){var t=re.ToString(re.RequireObjectCoercible(this));if(re.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=re.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(re.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=re.ToString(re.RequireObjectCoercible(this));if(re.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=re.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:re.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(re.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=re.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=re.ToString(re.RequireObjectCoercible(this));var r=re.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){Z(String.prototype,"includes",Me.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var xe=i(function(){"/a/".startsWith(/a/)});var Ne=a(function(){return"abc".startsWith("a",Infinity)===false});if(!xe||!Ne){Z(String.prototype,"startsWith",Me.startsWith);Z(String.prototype,"endsWith",Me.endsWith)}}if(Y){var Ae=a(function(){var e=/a/;e[G.match]=false;return"/a/".startsWith(e)});if(!Ae){Z(String.prototype,"startsWith",Me.startsWith)}var Re=a(function(){var e=/a/;e[G.match]=false;return"/a/".endsWith(e)});if(!Re){Z(String.prototype,"endsWith",Me.endsWith)}var _e=a(function(){var e=/a/;e[G.match]=false;return"/a/".includes(e)});if(!_e){Z(String.prototype,"includes",Me.includes)}}b(String.prototype,Me);var ke=["	\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Fe=new RegExp("(^["+ke+"]+)|(["+ke+"]+$)","g");var Le=function trim(){return re.ToString(re.RequireObjectCoercible(this)).replace(Fe,"")};var De=["\x85","\u200b","\ufffe"].join("");var ze=new RegExp("["+De+"]","g");var qe=/^[\-+]0x[0-9a-f]+$/i;var We=De.trim().length!==De.length;h(String.prototype,"trim",Le,We);var Ge=function(e){return{value:e,done:arguments.length===0}};var He=function(e){re.RequireObjectCoercible(e);this._s=re.ToString(e);this._i=0};He.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ge()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ge(e.substr(t,o))};we(He.prototype);we(String.prototype,function(){return new He(this)});var Ve={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!re.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(X(e)||re.GetMethod(e,Q))!=="undefined";var u,f,s;if(a){f=re.IsConstructor(r)?Object(new r):[];var c=re.GetIterator(e);var l,p;s=0;while(true){l=re.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){re.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=re.ToObject(e);u=re.ToLength(y.length);f=re.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Se(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!re.IsCallable(t)?new Array(e):re.Construct(t,[e]);for(var o=0;o<e;++o){Se(n,o,arguments[o])}n.length=e;return n}};b(Array,Ve);me(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=re.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ge(o)}}this.array=void 0;return Ge()}});we(q.prototype);var Be=Array.of===Ve.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Be){Z(Array,"of",Ve.of)}var $e={copyWithin:function copyWithin(e,t){var r=re.ToObject(this);var n=re.ToLength(r.length);var o=re.ToInteger(e);var i=re.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:re.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=re.ToObject(this);var o=re.ToLength(n.length);t=re.ToInteger(typeof t==="undefined"?0:t);r=re.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=re.ToObject(this);var n=re.ToLength(r.length);if(!re.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=re.ToObject(this);var n=re.ToLength(r.length);if(!re.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!re.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!re.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[Q]){b(Array.prototype,{values:Array.prototype[Q]});if(K.symbol(G.unscopables)){Array.prototype[G.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var Ue=Array.prototype.values;Z(Array.prototype,"values",function values(){return re.Call(Ue,this,arguments)});h(Array.prototype,Q,Array.prototype.values,true)}b(Array.prototype,$e);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}we(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){we(Object.getPrototypeOf([].values()))}var Je=function(){return a(function(){return Array.from({length:-1}).length===0})}();var Xe=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!Je||!Xe){Z(Array,"from",Ve.from)}var Ke=function(){return a(function(){return Array.from([0],void 0)})}();if(!Ke){var Ze=Array.from;Z(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return re.Call(Ze,this,arguments)}else{return t(Ze,this,e)}})}var Ye=-(Math.pow(2,32)-1);var Qe=function(e,r){var n={length:Ye};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!Qe(Array.prototype.forEach)){var et=Array.prototype.forEach;Z(Array.prototype,"forEach",function forEach(e){return re.Call(et,this.length>=0?this:[],arguments)},true)}if(!Qe(Array.prototype.map)){var tt=Array.prototype.map;Z(Array.prototype,"map",function map(e){return re.Call(tt,this.length>=0?this:[],arguments)},true)}if(!Qe(Array.prototype.filter)){var rt=Array.prototype.filter;Z(Array.prototype,"filter",function filter(e){return re.Call(rt,this.length>=0?this:[],arguments)},true)}if(!Qe(Array.prototype.some)){var nt=Array.prototype.some;Z(Array.prototype,"some",function some(e){return re.Call(nt,this.length>=0?this:[],arguments)},true)}if(!Qe(Array.prototype.every)){var ot=Array.prototype.every;Z(Array.prototype,"every",function every(e){return re.Call(ot,this.length>=0?this:[],arguments)},true)}if(!Qe(Array.prototype.reduce)){var it=Array.prototype.reduce;Z(Array.prototype,"reduce",function reduce(e){return re.Call(it,this.length>=0?this:[],arguments)},true)}if(!Qe(Array.prototype.reduceRight,true)){var at=Array.prototype.reduceRight;Z(Array.prototype,"reduceRight",function reduceRight(e){return re.Call(at,this.length>=0?this:[],arguments)},true)}var ut=Number("0o10")!==8;var ft=Number("0b10")!==2;var st=y(De,function(e){return Number(e+0+e)===0});if(ut||ft||st){var ct=Number;var lt=/^0b[01]+$/i;var pt=/^0o[0-7]+$/i;var vt=lt.test.bind(lt);var yt=pt.test.bind(pt);var ht=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(K.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(K.primitive(t)){return t}}throw new TypeError("No default value")};var bt=ze.test.bind(ze);var gt=qe.test.bind(qe);var dt=function(){var e=function Number(t){var r;if(arguments.length>0){r=K.primitive(t)?t:ht(t,"number")}else{r=0}if(typeof r==="string"){r=re.Call(Le,r);if(vt(r)){r=parseInt(C(r,2),2)}else if(yt(r)){r=parseInt(C(r,2),8)}else if(bt(r)||gt(r)){r=NaN}}var n=this;var o=a(function(){ct.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new ct(r)}return ct(r)};return e}();de(ct,dt,{});b(dt,{NaN:ct.NaN,MAX_VALUE:ct.MAX_VALUE,MIN_VALUE:ct.MIN_VALUE,NEGATIVE_INFINITY:ct.NEGATIVE_INFINITY,POSITIVE_INFINITY:ct.POSITIVE_INFINITY});Number=dt;O.redefine(S,"Number",dt)}var Ot=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Ot,MIN_SAFE_INTEGER:-Ot,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:B,isInteger:function isInteger(e){return B(e)&&re.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:V});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if(![,1].find(function(e,t){return t===0})){Z(Array.prototype,"find",$e.find)}if([,1].findIndex(function(e,t){return t===0})!==0){Z(Array.prototype,"findIndex",$e.findIndex)}var mt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var wt=function ensureEnumerable(e,t){if(s&&mt(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var jt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var St=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var Tt=function(e,t){var r=n(Object(t));var o;if(re.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),mt(t))}return p(P(r,o||[]),St(t),e)};var It={assign:function(e,t){var r=re.ToObject(e,"Cannot convert undefined or null to object");return p(re.Call(jt,1,arguments),Tt,r)},is:function is(e,t){return re.SameValue(e,t)}};var Et=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(Et){Z(Object,"assign",It.assign)}b(Object,It);if(s){var Pt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!re.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||re.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,Pt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Ct=!i(function(){Object.keys("foo")});if(!Ct){var Mt=Object.keys;Z(Object,"keys",function keys(e){return Mt(re.ToObject(e))});n=Object.keys}var xt=i(function(){Object.keys(/a/g)});if(xt){var Nt=Object.keys;Z(Object,"keys",function keys(e){if(K.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return Nt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var At=!i(function(){Object.getOwnPropertyNames("foo")});if(!At){var Rt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var _t=Object.getOwnPropertyNames;Z(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=re.ToObject(e);if(g(t)==="[object Window]"){try{return _t(t)}catch(r){return P([],Rt)}}return _t(t)})}}if(Object.getOwnPropertyDescriptor){var kt=!i(function(){Object.getOwnPropertyDescriptor("foo","bar")});if(!kt){var Ft=Object.getOwnPropertyDescriptor;Z(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Ft(re.ToObject(e),t)})}}if(Object.seal){var Lt=!i(function(){Object.seal("foo")});if(!Lt){var Dt=Object.seal;Z(Object,"seal",function seal(e){if(!re.TypeIsObject(e)){return e}return Dt(e)})}}if(Object.isSealed){var zt=!i(function(){Object.isSealed("foo")});if(!zt){var qt=Object.isSealed;Z(Object,"isSealed",function isSealed(e){if(!re.TypeIsObject(e)){return true}return qt(e)})}}if(Object.freeze){var Wt=!i(function(){Object.freeze("foo")});if(!Wt){var Gt=Object.freeze;Z(Object,"freeze",function freeze(e){if(!re.TypeIsObject(e)){return e}return Gt(e)})}}if(Object.isFrozen){var Ht=!i(function(){Object.isFrozen("foo")});if(!Ht){var Vt=Object.isFrozen;Z(Object,"isFrozen",function isFrozen(e){if(!re.TypeIsObject(e)){return true}return Vt(e)})}}if(Object.preventExtensions){var Bt=!i(function(){Object.preventExtensions("foo")});if(!Bt){var $t=Object.preventExtensions;Z(Object,"preventExtensions",function preventExtensions(e){if(!re.TypeIsObject(e)){return e}return $t(e)})}}if(Object.isExtensible){var Ut=!i(function(){Object.isExtensible("foo")});if(!Ut){var Jt=Object.isExtensible;Z(Object,"isExtensible",function isExtensible(e){if(!re.TypeIsObject(e)){return false}return Jt(e)})}}if(Object.getPrototypeOf){var Xt=!i(function(){Object.getPrototypeOf("foo")});if(!Xt){var Kt=Object.getPrototypeOf;Z(Object,"getPrototypeOf",function getPrototypeOf(e){return Kt(re.ToObject(e))})}}var Zt=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&re.IsCallable(e.get)}();if(s&&!Zt){var Yt=function flags(){if(!re.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};O.getter(RegExp.prototype,"flags",Yt)}var Qt=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var er=Y&&s&&function(){var e=/./;e[G.match]=false;return RegExp(e)===e}();var tr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var rr=tr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!tr||!rr){var nr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=re.RequireObjectCoercible(this);if(K.regex(e)){return t(nr,e)}var r=te(e.source);var n=te(e.flags);return"/"+r+"/"+n},true);O.preserveToString(RegExp.prototype.toString,nr)}if(s&&(!Qt||er)){var or=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var ir=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var ar=function(){return this.source};var ur=re.IsCallable(ir.get)?ir.get:ar;var fr=RegExp;var sr=function(){return function RegExp(e,t){var r=re.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(K.regex(e)){o=re.Call(ur,e);i=typeof t==="undefined"?re.Call(or,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new fr(e,t)}}();de(fr,sr,{$input:true});RegExp=sr;O.redefine(S,"RegExp",sr)}if(s){var cr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(cr),function(e){if(e in RegExp&&!(cr[e]in RegExp)){O.getter(RegExp,cr[e],function get(){return RegExp[e]})}})}me(RegExp);var lr=1/Number.EPSILON;var pr=function roundTiesToEven(e){return e+lr-lr};var vr=Math.pow(2,-23);var yr=Math.pow(2,127)*(2-vr);var hr=Math.pow(2,-126);var br=Math.E;var gr=Math.LOG2E;var dr=Math.LOG10E;var Or=Number.prototype.clz;delete Number.prototype.clz;var mr={acosh:function acosh(e){var t=Number(e);if(V(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}return L(t/br+D(t+1)*D(t-1)/br)+1},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}return t<0?-asinh(-t):L(t+D(t*t+1))},atanh:function atanh(e){var t=Number(e);if(V(t)||t<-1||t>1){return NaN}if(t===-1){return-Infinity}if(t===1){return Infinity}if(t===0){return t}return.5*L((1+t)/(1-t))},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=F(L(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=re.ToUint32(t);if(r===0){return 32}return Or?re.Call(Or,r):31-_(L(r+.5)*gr)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(V(t)){return NaN}if(!T(t)){return Infinity}if(t<0){t=-t}if(t>21){return F(t)/2}return(F(t)+F(-t))/2},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return F(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return L(e)*gr},log10:function log10(e){return L(e)*dr},log1p:function log1p(e){var t=Number(e);if(t<-1||V(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(L(1+t)/(1+t-1))},sign:$,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}if(k(t)<1){return(Math.expm1(t)-Math.expm1(-t))/2}return(F(t-1)-F(-t-1))*br/2},tanh:function tanh(e){var t=Number(e);if(V(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(F(t)+F(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=re.ToUint32(e);var n=re.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||V(t)){return t}var r=$(t);var n=k(t);if(n<hr){return r*pr(n/hr/vr)*hr*vr}var o=(1+vr/Number.EPSILON)*n;var i=o-(o-n);if(i>yr||V(i)){return r*Infinity}return r*i}};b(Math,mr);h(Math,"log1p",mr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",mr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"tanh",mr.tanh,Math.tanh(-2e-17)!==-2e-17);h(Math,"acosh",mr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"cbrt",mr.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8);h(Math,"sinh",mr.sinh,Math.sinh(-2e-17)!==-2e-17);var wr=Math.expm1(10);h(Math,"expm1",mr.expm1,wr>22025.465794806718||wr<22025.465794806718);var jr=Math.round;var Sr=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Tr=lr+1;var Ir=2*lr-1;var Er=[Tr,Ir].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Sr||!Er);O.preserveToString(Math.round,jr);var Pr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=mr.imul;O.preserveToString(Math.imul,Pr)}if(Math.imul.length!==2){Z(Math,"imul",function imul(e,t){return re.Call(Pr,Math,arguments);
})}var Cr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}re.IsPromise=function(e){if(!re.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!re.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(re.IsCallable(t.resolve)&&re.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&re.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=re.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(re.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var O=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var m=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return O(e,new TypeError("Self resolution"))}if(!re.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return O(e,o)}if(!re.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return O(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=m(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!re.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Te(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=m(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=re.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=re.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!re.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=re.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{re.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!re.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=re.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{re.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!re.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!re.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(re.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!re.IsPromise(n)){throw new TypeError("not a promise")}var o=re.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=re.IsCallable(e)?e:a;var d=re.IsCallable(t)?t:u;var O=n._promise;var m;if(O.state===f){if(O.reactionLength===0){O.fulfillReactionHandler0=g;O.rejectReactionHandler0=d;O.reactionCapability0=i}else{var w=3*(O.reactionLength-1);O[w+l]=g;O[w+p]=d;O[w+v]=i}O.reactionLength+=1}else if(O.state===s){m=O.result;h(g,i,m)}else if(O.state===c){m=O.result;h(d,i,m)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Cr==="function"){b(S,{Promise:Cr});var Mr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var xr=!i(function(){S.Promise.reject(42).then(null,5).then(null,W)});var Nr=i(function(){S.Promise.call(3,W)});var Ar=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Rr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var _r=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};_r.prototype=Promise.prototype;_r.all=Promise.all;var kr=a(function(){return!!_r.all([1,2])});if(!Mr||!xr||!Nr||Ar||!Rr||kr){Promise=Cr;Z(S,"Promise",Cr)}if(Promise.all.length!==1){var Fr=Promise.all;Z(Promise,"all",function all(e){return re.Call(Fr,this,arguments)})}if(Promise.race.length!==1){var Lr=Promise.race;Z(Promise,"race",function race(e){return re.Call(Lr,this,arguments)})}if(Promise.resolve.length!==1){var Dr=Promise.resolve;Z(Promise,"resolve",function resolve(e){return re.Call(Dr,this,arguments)})}if(Promise.reject.length!==1){var zr=Promise.reject;Z(Promise,"reject",function reject(e){return re.Call(zr,this,arguments)})}wt(Promise,"all");wt(Promise,"race");wt(Promise,"resolve");wt(Promise,"reject");me(Promise)}var qr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Wr=qr(["z","a","bb"]);var Gr=qr(["z",1,"a","3",2]);if(s){var Hr=function fastkey(e){if(!Wr){return null}if(typeof e==="undefined"||e===null){return"^"+re.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Gr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Vr=function emptyObject(){return Object.create?Object.create(null):{}};var Br=function addIterableToMap(e,n,o){if(r(o)||K.string(o)){l(o,function(e){if(!re.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(o!==null&&typeof o!=="undefined"){a=n.set;if(!re.IsCallable(a)){throw new TypeError("bad map")}i=re.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=re.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!re.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){re.IteratorClose(i,true);throw s}}}}};var $r=function addIterableToSet(e,n,o){if(r(o)||K.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(o!==null&&typeof o!=="undefined"){a=n.add;if(!re.IsCallable(a)){throw new TypeError("bad set")}i=re.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=re.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){re.IteratorClose(i,true);throw s}}}}};var Ur={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!re.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+re.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={next:function next(){var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ge()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ge(n)}}this.i=void 0;return Ge()}};we(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Te(this,Map,a,{_es6map:true,_head:null,_storage:Vr(),_size:0});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){Br(Map,e,arguments[0])}return e};a=u.prototype;O.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t=Hr(e);if(t!==null){var r=this._storage[t];if(r){return r.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(re.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Hr(e);if(t!==null){return typeof this._storage[t]!=="undefined"}var r=this._head;var n=r;while((n=n.next)!==r){if(re.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Hr(e);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}while((i=i.next)!==n){if(re.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(re.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Hr(t);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}while((n=n.next)!==r){if(re.SameValueZero(n.key,t)){n.key=n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._size=0;this._storage=Vr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});we(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!re.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+re.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Te(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Vr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){$r(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=e["[[SetData]]"]=new Ur.Map;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};O.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Hr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Hr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Hr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Vr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return this["[[SetData]]"].values()},entries:function entries(){r(this,"entries");u(this);return this["[[SetData]]"].entries()},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);we(i.prototype,i.prototype.values);return i}()};if(S.Map||S.Set){var Jr=a(function(){return new Map([[1,2]]).get(1)===2});if(!Jr){var Xr=S.Map;S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new Xr;if(arguments.length>0){Br(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=m(Xr.prototype);h(S.Map.prototype,"constructor",S.Map,true);O.preserveToString(S.Map,Xr)}var Kr=new Map;var Zr=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var Yr=Kr.set(1,2)===Kr;if(!Zr||!Yr){var Qr=Map.prototype.set;Z(Map.prototype,"set",function set(e,r){t(Qr,this,e===0?0:e,r);return this})}if(!Zr){var en=Map.prototype.get;var tn=Map.prototype.has;b(Map.prototype,{get:function get(e){return t(en,this,e===0?0:e)},has:function has(e){return t(tn,this,e===0?0:e)}},true);O.preserveToString(Map.prototype.get,en);O.preserveToString(Map.prototype.has,tn)}var rn=new Set;var nn=function(e){e["delete"](0);e.add(-0);return!e.has(0)}(rn);var on=rn.add(1)===rn;if(!nn||!on){var an=Set.prototype.add;Set.prototype.add=function add(e){t(an,this,e===0?0:e);return this};O.preserveToString(Set.prototype.add,an)}if(!nn){var un=Set.prototype.has;Set.prototype.has=function has(e){return t(un,this,e===0?0:e)};O.preserveToString(Set.prototype.has,un);var fn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(fn,this,e===0?0:e)};O.preserveToString(Set.prototype["delete"],fn)}var sn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var cn=Object.setPrototypeOf&&!sn;var ln=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||cn||!ln){var pn=S.Map;S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new pn;if(arguments.length>0){Br(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=pn.prototype;h(S.Map.prototype,"constructor",S.Map,true);O.preserveToString(S.Map,pn)}var vn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var yn=Object.setPrototypeOf&&!vn;var hn=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||yn||!hn){var bn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new bn;if(arguments.length>0){$r(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=bn.prototype;h(S.Set.prototype,"constructor",S.Set,true);O.preserveToString(S.Set,bn)}var gn=new S.Map;var dn=!a(function(){return gn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||gn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof gn.keys().next!=="function"||dn||!sn){b(S,{Map:Ur.Map,Set:Ur.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}we(Object.getPrototypeOf((new S.Map).keys()));we(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var On=S.Set.prototype.has;Z(S.Set.prototype,"has",function has(e){return t(On,this,e)})}}b(S,Ur);me(S.Map);me(S.Set)}var mn=function throwUnlessTargetIsObject(e){if(!re.TypeIsObject(e)){throw new TypeError("target must be an object")}};var wn={apply:function apply(){return re.Call(re.Call,null,arguments)},construct:function construct(e,t){if(!re.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!re.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return re.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){mn(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){mn(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(wn,{ownKeys:function ownKeys(e){mn(e);var t=Object.getOwnPropertyNames(e);if(re.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var jn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(wn,{isExtensible:function isExtensible(e){mn(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){mn(e);return jn(function(){Object.preventExtensions(e)})}})}if(s){var Sn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Sn(o,t,r)}if("value"in n){return n.value}if(n.get){return re.Call(n.get,r)}return void 0};var Tn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Tn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!re.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ee.defineProperty(o,r,{value:n})}else{return ee.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(wn,{defineProperty:function defineProperty(e,t,r){mn(e);return jn(function(){Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){mn(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){mn(e);var r=arguments.length>2?arguments[2]:e;return Sn(e,t,r)},set:function set(e,t,r){mn(e);var n=arguments.length>3?arguments[3]:e;return Tn(e,t,r,n)}})}if(Object.getPrototypeOf){var In=Object.getPrototypeOf;wn.getPrototypeOf=function getPrototypeOf(e){mn(e);return In(e)}}if(Object.setPrototypeOf&&wn.getPrototypeOf){var En=function(e,t){var r=t;while(r){if(e===r){return true}r=wn.getPrototypeOf(r)}return false};Object.assign(wn,{setPrototypeOf:function setPrototypeOf(e,t){mn(e);if(t!==null&&!re.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ee.getPrototypeOf(e)){return true}if(ee.isExtensible&&!ee.isExtensible(e)){return false}if(En(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var Pn=function(e,t){if(!re.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){Z(S.Reflect,e,t)}}};Object.keys(wn).forEach(function(e){Pn(e,wn[e])});var Cn=S.Reflect.getPrototypeOf;if(c&&Cn&&Cn.name!=="getPrototypeOf"){Z(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Cn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){Z(S.Reflect,"setPrototypeOf",wn.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){Z(S.Reflect,"defineProperty",wn.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){Z(S.Reflect,"construct",wn.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var Mn=Date.prototype.toString;var xn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return re.Call(Mn,this)};Z(Date.prototype,"toString",xn)}var Nn={anchor:function anchor(e){return re.CreateHTML(this,"a","name",e)},big:function big(){return re.CreateHTML(this,"big","","")},blink:function blink(){return re.CreateHTML(this,"blink","","")},bold:function bold(){return re.CreateHTML(this,"b","","")},fixed:function fixed(){return re.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return re.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return re.CreateHTML(this,"font","size",e)},italics:function italics(){return re.CreateHTML(this,"i","","")},link:function link(e){return re.CreateHTML(this,"a","href",e)},small:function small(){return re.CreateHTML(this,"small","","")},strike:function strike(){return re.CreateHTML(this,"strike","","")},sub:function sub(){return re.CreateHTML(this,"sub","","")},sup:function sub(){return re.CreateHTML(this,"sup","","")}};l(Object.keys(Nn),function(e){var r=String.prototype[e];var n=false;if(re.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){Z(String.prototype,e,Nn[e])}});var An=function(){if(!Y){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e(G())!=="undefined"){return true}if(e([G()])!=="[null]"){return true}var t={a:G()};t[G()]=true;if(e(t)!=="{}"){return true}return false}();var Rn=a(function(){if(!Y){return true}return JSON.stringify(Object(G()))==="{}"&&JSON.stringify([Object(G())])==="[{}]"});if(An||!Rn){var _n=JSON.stringify;Z(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=re.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(K.symbol(n)){return St({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return _n.apply(this,o)})}return S});
//# sourceMappingURL=es6-shim.map

/*
 * SystemJS Promise Polyfill
 */
!function(t){!function(e){"object"==typeof exports?module.exports=e():"function"==typeof t&&t.amd?t(e):"undefined"!=typeof window?window.Promise=e():"undefined"!=typeof global?global.Promise=e():"undefined"!=typeof self&&(self.Promise=e())}(function(){var t;return function t(e,n,o){function r(u,c){if(!n[u]){if(!e[u]){var f="function"==typeof require&&require;if(!c&&f)return f(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var s=n[u]={exports:{}};e[u][0].call(s.exports,function(t){var n=e[u][1][t];return r(n?n:t)},s,s.exports,t,e,n,o)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(t,e,n){var o=t("../lib/decorators/unhandledRejection"),r=o(t("../lib/Promise"));e.exports="undefined"!=typeof global?global.Promise=r:"undefined"!=typeof self?self.Promise=r:r},{"../lib/Promise":2,"../lib/decorators/unhandledRejection":4}],2:[function(e,n,o){!function(t){"use strict";t(function(t){var e=t("./makePromise"),n=t("./Scheduler"),o=t("./env").asap;return e({scheduler:new n(o)})})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./Scheduler":3,"./env":5,"./makePromise":7}],3:[function(e,n,o){!function(t){"use strict";t(function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],4:[function(e,n,o){!function(t){"use strict";t(function(t){function e(t){throw t}function n(){}var o=t("../env").setTimer,r=t("../format");return function(t){function i(t){t.handled||(l.push(t),a("Potentially unhandled rejection ["+t.id+"] "+r.formatError(t.value)))}function u(t){var e=l.indexOf(t);e>=0&&(l.splice(e,1),h("Handled previous rejection ["+t.id+"] "+r.formatObject(t.value)))}function c(t,e){p.push(t,e),null===d&&(d=o(f,0))}function f(){for(d=null;p.length>0;)p.shift()(p.shift())}var s,a=n,h=n;"undefined"!=typeof console&&(s=console,a="undefined"!=typeof s.error?function(t){s.error(t)}:function(t){s.log(t)},h="undefined"!=typeof s.info?function(t){s.info(t)}:function(t){s.log(t)}),t.onPotentiallyUnhandledRejection=function(t){c(i,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){c(u,t)},t.onFatalRejection=function(t){c(e,t.value)};var p=[],l=[],d=null;return t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../env":5,"../format":6}],5:[function(e,n,o){!function(t){"use strict";t(function(t){function e(){return"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)}function n(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function o(t){function e(){var t=n;n=void 0,t()}var n,o=document.createTextNode(""),r=new t(e);r.observe(o,{characterData:!0});var i=0;return function(t){n=t,o.data=i^=1}}var r,i="undefined"!=typeof setTimeout&&setTimeout,u=function(t,e){return setTimeout(t,e)},c=function(t){return clearTimeout(t)},f=function(t){return i(t,0)};if(e())f=function(t){return process.nextTick(t)};else if(r=n())f=o(r);else if(!i){var s=t,a=s("vertx");u=function(t,e){return a.setTimer(e,t)},c=a.cancelTimer,f=a.runOnLoop||a.runOnContext}return{setTimer:u,clearTimer:c,asap:f}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],6:[function(e,n,o){!function(t){"use strict";t(function(){function t(t){var n="object"==typeof t&&null!==t&&(t.stack||t.message)?t.stack||t.message:e(t);return t instanceof Error?n:n+" (WARNING: non-Error used)"}function e(t){var e=String(t);return"[object Object]"===e&&"undefined"!=typeof JSON&&(e=n(t,e)),e}function n(t,e){try{return JSON.stringify(t)}catch(t){return e}}return{formatError:t,formatObject:e,tryStringify:n}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],7:[function(e,n,o){!function(t){"use strict";t(function(){return function(t){function e(t,e){this._handler=t===_?e:n(t)}function n(t){function e(t){r.resolve(t)}function n(t){r.reject(t)}function o(t){r.notify(t)}var r=new b;try{t(e,n,o)}catch(t){n(t)}return r}function o(t){return k(t)?t:new e(_,new x(v(t)))}function r(t){return new e(_,new x(new P(t)))}function i(){return $}function u(){return new e(_,new b)}function c(t,e){var n=new b(t.receiver,t.join().context);return new e(_,n)}function f(t){return a(B,null,t)}function s(t,e){return a(M,t,e)}function a(t,n,o){function r(e,r,u){u.resolved||h(o,i,e,t(n,r,e),u)}function i(t,e,n){a[t]=e,0===--s&&n.become(new q(a))}for(var u,c="function"==typeof n?r:i,f=new b,s=o.length>>>0,a=new Array(s),p=0;p<o.length&&!f.resolved;++p)u=o[p],void 0!==u||p in o?h(o,c,p,u,f):--s;return 0===s&&f.become(new q(a)),new e(_,f)}function h(t,e,n,o,r){if(U(o)){var i=m(o),u=i.state();0===u?i.fold(e,n,void 0,r):u>0?e(n,i.value,r):(r.become(i),p(t,n+1,i))}else e(n,o,r)}function p(t,e,n){for(var o=e;o<t.length;++o)l(v(t[o]),n)}function l(t,e){if(t!==e){var n=t.state();0===n?t.visit(t,void 0,t._unreport):n<0&&t._unreport()}}function d(t){return"object"!=typeof t||null===t?r(new TypeError("non-iterable passed to race()")):0===t.length?i():1===t.length?o(t[0]):y(t)}function y(t){var n,o,r,i=new b;for(n=0;n<t.length;++n)if(o=t[n],void 0!==o||n in t){if(r=v(o),0!==r.state()){i.become(r),p(t,n+1,r);break}r.visit(i,i.resolve,i.reject)}return new e(_,i)}function v(t){return k(t)?t._handler.join():U(t)?j(t):new q(t)}function m(t){return k(t)?t._handler.join():j(t)}function j(t){try{var e=t.then;return"function"==typeof e?new g(e,t):new q(t)}catch(t){return new P(t)}}function _(){}function w(){}function b(t,n){e.createContext(this,n),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function x(t){this.handler=t}function g(t,e){b.call(this),G.enqueue(new E(t,e,this))}function q(t){e.createContext(this),this.value=t}function P(t){e.createContext(this),this.id=++Y,this.value=t,this.handled=!1,this.reported=!1,this._report()}function R(t,e){this.rejection=t,this.context=e}function C(t){this.rejection=t}function O(){return new P(new TypeError("Promise cycle"))}function T(t,e){this.continuation=t,this.handler=e}function Q(t,e){this.handler=e,this.value=t}function E(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function L(t,e,n,o,r){try{t.call(e,n,o,r)}catch(t){o(t)}}function S(t,e,n,o){this.f=t,this.z=e,this.c=n,this.to=o,this.resolver=X,this.receiver=this}function k(t){return t instanceof e}function U(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function H(t,n,o,r){return"function"!=typeof t?r.become(n):(e.enterContext(n),F(t,n.value,o,r),void e.exitContext())}function N(t,n,o,r,i){return"function"!=typeof t?i.become(o):(e.enterContext(o),W(t,n,o.value,r,i),void e.exitContext())}function J(t,n,o,r,i){return"function"!=typeof t?i.notify(n):(e.enterContext(o),z(t,n,r,i),void e.exitContext())}function M(t,e,n){try{return t(e,n)}catch(t){return r(t)}}function F(t,e,n,o){try{o.become(v(t.call(n,e)))}catch(t){o.become(new P(t))}}function W(t,e,n,o,r){try{t.call(o,e,n,r)}catch(t){r.become(new P(t))}}function z(t,e,n,o){try{o.notify(t.call(n,e))}catch(t){o.notify(t)}}function A(t,e){e.prototype=V(t.prototype),e.prototype.constructor=e}function B(t,e){return e}function K(){}function D(){return"undefined"!=typeof process&&null!==process&&"function"==typeof process.emit?function(t,e){return"unhandledRejection"===t?process.emit(t,e.value,e):process.emit(t,e)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(t,e,n){var o=!1;try{var r=new n("unhandledRejection");o=r instanceof n}catch(t){}return o?function(t,o){var r=new n(t,{detail:{reason:o.value,key:o},bubbles:!1,cancelable:!0});return!e.dispatchEvent(r)}:t}(K,self,CustomEvent):K}var G=t.scheduler,I=D(),V=Object.create||function(t){function e(){}return e.prototype=t,new e};e.resolve=o,e.reject=r,e.never=i,e._defer=u,e._handler=v,e.prototype.then=function(t,e,n){var o=this._handler,r=o.join().state();if("function"!=typeof t&&r>0||"function"!=typeof e&&r<0)return new this.constructor(_,o);var i=this._beget(),u=i._handler;return o.chain(u,o.receiver,t,e,n),i},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype._beget=function(){return c(this._handler,this.constructor)},e.all=f,e.race=d,e._traverse=s,e._visitRemaining=p,_.prototype.when=_.prototype.become=_.prototype.notify=_.prototype.fail=_.prototype._unreport=_.prototype._report=K,_.prototype._state=0,_.prototype.state=function(){return this._state},_.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},_.prototype.chain=function(t,e,n,o,r){this.when({resolver:t,receiver:e,fulfilled:n,rejected:o,progress:r})},_.prototype.visit=function(t,e,n,o){this.chain(X,t,e,n,o)},_.prototype.fold=function(t,e,n,o){this.when(new S(t,e,n,o))},A(_,w),w.prototype.become=function(t){t.fail()};var X=new w;A(_,b),b.prototype._state=0,b.prototype.resolve=function(t){this.become(v(t))},b.prototype.reject=function(t){this.resolved||this.become(new P(t))},b.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if(t=t.handler,t===this)return this.handler=O();return t},b.prototype.run=function(){var t=this.consumers,e=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},b.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&G.enqueue(this),void 0!==this.context&&t._report(this.context))},b.prototype.when=function(t){this.resolved?G.enqueue(new T(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},b.prototype.notify=function(t){this.resolved||G.enqueue(new Q(t,this))},b.prototype.fail=function(t){var e="undefined"==typeof t?this.context:t;this.resolved&&this.handler.join().fail(e)},b.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},b.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},A(_,x),x.prototype.when=function(t){G.enqueue(new T(t,this))},x.prototype._report=function(t){this.join()._report(t)},x.prototype._unreport=function(){this.join()._unreport()},A(b,g),A(_,q),q.prototype._state=1,q.prototype.fold=function(t,e,n,o){N(t,e,this,n,o)},q.prototype.when=function(t){H(t.fulfilled,this,t.receiver,t.resolver)};var Y=0;A(_,P),P.prototype._state=-1,P.prototype.fold=function(t,e,n,o){o.become(this)},P.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),H(t.rejected,this,t.receiver,t.resolver)},P.prototype._report=function(t){G.afterQueue(new R(this,t))},P.prototype._unreport=function(){this.handled||(this.handled=!0,G.afterQueue(new C(this)))},P.prototype.fail=function(t){this.reported=!0,I("unhandledRejection",this),e.onFatalRejection(this,void 0===t?this.context:t)},R.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,I("unhandledRejection",this.rejection)||e.onPotentiallyUnhandledRejection(this.rejection,this.context))},C.prototype.run=function(){this.rejection.reported&&(I("rejectionHandled",this.rejection)||e.onPotentiallyUnhandledRejectionHandled(this.rejection))},e.createContext=e.enterContext=e.exitContext=e.onPotentiallyUnhandledRejection=e.onPotentiallyUnhandledRejectionHandled=e.onFatalRejection=K;var Z=new _,$=new e(_,Z);return T.prototype.run=function(){this.handler.join().when(this.continuation)},Q.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,n=0;n<t.length;++n)e=t[n],J(e.progress,this.value,this.handler,e.receiver,e.resolver)},E.prototype.run=function(){function t(t){o.resolve(t)}function e(t){o.reject(t)}function n(t){o.notify(t)}var o=this.resolver;L(this._then,this.thenable,t,e,n)},S.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},S.prototype.rejected=function(t){this.to.reject(t)},S.prototype.progress=function(t){this.to.notify(t)},e}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}]},{},[1])(1)}),"undefined"!=typeof systemJSBootstrap&&systemJSBootstrap()}();
//# sourceMappingURL=system-polyfills.js.map

/*
 * SystemJS v0.19.39
 */
(function() {
function bootstrap() {// from https://gist.github.com/Yaffle/1088850
(function(global) {
function URLPolyfill(url, baseURL) {
  if (typeof url != 'string')
    throw new TypeError('URL must be a string');
  var m = String(url).replace(/^\s+|\s+$/g, "").match(/^([^:\/?#]+:)?(?:\/\/(?:([^:@\/?#]*)(?::([^:@\/?#]*))?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);
  if (!m)
    throw new RangeError('Invalid URL format');
  var protocol = m[1] || "";
  var username = m[2] || "";
  var password = m[3] || "";
  var host = m[4] || "";
  var hostname = m[5] || "";
  var port = m[6] || "";
  var pathname = m[7] || "";
  var search = m[8] || "";
  var hash = m[9] || "";
  if (baseURL !== undefined) {
    var base = baseURL instanceof URLPolyfill ? baseURL : new URLPolyfill(baseURL);
    var flag = !protocol && !host && !username;
    if (flag && !pathname && !search)
      search = base.search;
    if (flag && pathname[0] !== "/")
      pathname = (pathname ? (((base.host || base.username) && !base.pathname ? "/" : "") + base.pathname.slice(0, base.pathname.lastIndexOf("/") + 1) + pathname) : base.pathname);
    // dot segments removal
    var output = [];
    pathname.replace(/^(\.\.?(\/|$))+/, "")
      .replace(/\/(\.(\/|$))+/g, "/")
      .replace(/\/\.\.$/, "/../")
      .replace(/\/?[^\/]*/g, function (p) {
        if (p === "/..")
          output.pop();
        else
          output.push(p);
      });
    pathname = output.join("").replace(/^\//, pathname[0] === "/" ? "/" : "");
    if (flag) {
      port = base.port;
      hostname = base.hostname;
      host = base.host;
      password = base.password;
      username = base.username;
    }
    if (!protocol)
      protocol = base.protocol;
  }

  // convert URLs to use / always
  pathname = pathname.replace(/\\/g, '/');

  this.origin = host ? protocol + (protocol !== "" || host !== "" ? "//" : "") + host : "";
  this.href = protocol + (protocol && host || protocol == "file:" ? "//" : "") + (username !== "" ? username + (password !== "" ? ":" + password : "") + "@" : "") + host + pathname + search + hash;
  this.protocol = protocol;
  this.username = username;
  this.password = password;
  this.host = host;
  this.hostname = hostname;
  this.port = port;
  this.pathname = pathname;
  this.search = search;
  this.hash = hash;
}
global.URLPolyfill = URLPolyfill;
})(typeof self != 'undefined' ? self : global);(function(__global) {

  var isWorker = typeof window == 'undefined' && typeof self != 'undefined' && typeof importScripts != 'undefined';
  var isBrowser = typeof window != 'undefined' && typeof document != 'undefined';
  var isWindows = typeof process != 'undefined' && typeof process.platform != 'undefined' && !!process.platform.match(/^win/);

  if (!__global.console)
    __global.console = { assert: function() {} };

  // IE8 support
  var indexOf = Array.prototype.indexOf || function(item) {
    for (var i = 0, thisLen = this.length; i < thisLen; i++) {
      if (this[i] === item) {
        return i;
      }
    }
    return -1;
  };
  
  var defineProperty;
  (function () {
    try {
      if (!!Object.defineProperty({}, 'a', {}))
        defineProperty = Object.defineProperty;
    }
    catch (e) {
      defineProperty = function(obj, prop, opt) {
        try {
          obj[prop] = opt.value || opt.get.call(obj);
        }
        catch(e) {}
      }
    }
  })();

  var errArgs = new Error(0, '_').fileName == '_';

  function addToError(err, msg) {
    // parse the stack removing loader code lines for simplification
    if (!err.originalErr) {
      var stack = ((err.message || err) + (err.stack ? '\n' + err.stack : '')).toString().split('\n');
      var newStack = [];
      for (var i = 0; i < stack.length; i++) {
        if (typeof $__curScript == 'undefined' || stack[i].indexOf($__curScript.src) == -1)
          newStack.push(stack[i]);
      }
    }

    var newMsg = '(SystemJS) ' + (newStack ? newStack.join('\n\t') : err.message.substr(11)) + '\n\t' + msg;

    // Convert file:/// URLs to paths in Node
    if (!isBrowser)
      newMsg = newMsg.replace(isWindows ? /file:\/\/\//g : /file:\/\//g, '');

    var newErr = errArgs ? new Error(newMsg, err.fileName, err.lineNumber) : new Error(newMsg);
    
    newErr.stack = newMsg;
        
    // track the original error
    newErr.originalErr = err.originalErr || err;

    return newErr;
  }

  function __eval(source, debugName, context) {
    try {
      new Function(source).call(context);
    }
    catch(e) {
      throw addToError(e, 'Evaluating ' + debugName);
    }
  }

  var baseURI;

  // environent baseURI detection
  if (typeof document != 'undefined' && document.getElementsByTagName) {
    baseURI = document.baseURI;

    if (!baseURI) {
      var bases = document.getElementsByTagName('base');
      baseURI = bases[0] && bases[0].href || window.location.href;
    }
  }
  else if (typeof location != 'undefined') {
    baseURI = __global.location.href;
  }

  // sanitize out the hash and querystring
  if (baseURI) {
    baseURI = baseURI.split('#')[0].split('?')[0];
    baseURI = baseURI.substr(0, baseURI.lastIndexOf('/') + 1);
  }
  else if (typeof process != 'undefined' && process.cwd) {
    baseURI = 'file://' + (isWindows ? '/' : '') + process.cwd() + '/';
    if (isWindows)
      baseURI = baseURI.replace(/\\/g, '/');
  }
  else {
    throw new TypeError('No environment baseURI');
  }

  try {
    var nativeURL = new __global.URL('test:///').protocol == 'test:';
  }
  catch(e) {}

  var URL = nativeURL ? __global.URL : __global.URLPolyfill;

/*
*********************************************************************************************

  Dynamic Module Loader Polyfill

    - Implemented exactly to the former 2014-08-24 ES6 Specification Draft Rev 27, Section 15
      http://wiki.ecmascript.org/doku.php?id=harmony:specification_drafts#august_24_2014_draft_rev_27

    - Functions are commented with their spec numbers, with spec differences commented.

    - Spec bugs are commented in this code with links.

    - Abstract functions have been combined where possible, and their associated functions
      commented.

    - Realm implementation is entirely omitted.

*********************************************************************************************
*/

function Module() {}
// http://www.ecma-international.org/ecma-262/6.0/#sec-@@tostringtag
defineProperty(Module.prototype, 'toString', {
  value: function() {
    return 'Module';
  }
});
function Loader(options) {
  this._loader = {
    loaderObj: this,
    loads: [],
    modules: {},
    importPromises: {},
    moduleRecords: {}
  };

  // 26.3.3.6
  defineProperty(this, 'global', {
    get: function() {
      return __global;
    }
  });

  // 26.3.3.13 realm not implemented
}

(function() {

// Some Helpers

// logs a linkset snapshot for debugging
/* function snapshot(loader) {
  console.log('---Snapshot---');
  for (var i = 0; i < loader.loads.length; i++) {
    var load = loader.loads[i];
    var linkSetLog = '  ' + load.name + ' (' + load.status + '): ';

    for (var j = 0; j < load.linkSets.length; j++) {
      linkSetLog += '{' + logloads(load.linkSets[j].loads) + '} ';
    }
    console.log(linkSetLog);
  }
  console.log('');
}
function logloads(loads) {
  var log = '';
  for (var k = 0; k < loads.length; k++)
    log += loads[k].name + (k != loads.length - 1 ? ' ' : '');
  return log;
} */


/* function checkInvariants() {
  // see https://bugs.ecmascript.org/show_bug.cgi?id=2603#c1

  var loads = System._loader.loads;
  var linkSets = [];

  for (var i = 0; i < loads.length; i++) {
    var load = loads[i];
    console.assert(load.status == 'loading' || load.status == 'loaded', 'Each load is loading or loaded');

    for (var j = 0; j < load.linkSets.length; j++) {
      var linkSet = load.linkSets[j];

      for (var k = 0; k < linkSet.loads.length; k++)
        console.assert(loads.indexOf(linkSet.loads[k]) != -1, 'linkSet loads are a subset of loader loads');

      if (linkSets.indexOf(linkSet) == -1)
        linkSets.push(linkSet);
    }
  }

  for (var i = 0; i < loads.length; i++) {
    var load = loads[i];
    for (var j = 0; j < linkSets.length; j++) {
      var linkSet = linkSets[j];

      if (linkSet.loads.indexOf(load) != -1)
        console.assert(load.linkSets.indexOf(linkSet) != -1, 'linkSet contains load -> load contains linkSet');

      if (load.linkSets.indexOf(linkSet) != -1)
        console.assert(linkSet.loads.indexOf(load) != -1, 'load contains linkSet -> linkSet contains load');
    }
  }

  for (var i = 0; i < linkSets.length; i++) {
    var linkSet = linkSets[i];
    for (var j = 0; j < linkSet.loads.length; j++) {
      var load = linkSet.loads[j];

      for (var k = 0; k < load.dependencies.length; k++) {
        var depName = load.dependencies[k].value;
        var depLoad;
        for (var l = 0; l < loads.length; l++) {
          if (loads[l].name != depName)
            continue;
          depLoad = loads[l];
          break;
        }

        // loading records are allowed not to have their dependencies yet
        // if (load.status != 'loading')
        //  console.assert(depLoad, 'depLoad found');

        // console.assert(linkSet.loads.indexOf(depLoad) != -1, 'linkset contains all dependencies');
      }
    }
  }
} */

  // 15.2.3 - Runtime Semantics: Loader State

  // 15.2.3.11
  function createLoaderLoad(object) {
    return {
      // modules is an object for ES5 implementation
      modules: {},
      loads: [],
      loaderObj: object
    };
  }

  // 15.2.3.2 Load Records and LoadRequest Objects

  var anonCnt = 0;

  // 15.2.3.2.1
  function createLoad(name) {
    return {
      status: 'loading',
      name: name || '<Anonymous' + ++anonCnt + '>',
      linkSets: [],
      dependencies: [],
      metadata: {}
    };
  }

  // 15.2.3.2.2 createLoadRequestObject, absorbed into calling functions

  // 15.2.4

  // 15.2.4.1
  function loadModule(loader, name, options) {
    return new Promise(asyncStartLoadPartwayThrough({
      step: options.address ? 'fetch' : 'locate',
      loader: loader,
      moduleName: name,
      // allow metadata for import https://bugs.ecmascript.org/show_bug.cgi?id=3091
      moduleMetadata: options && options.metadata || {},
      moduleSource: options.source,
      moduleAddress: options.address
    }));
  }

  // 15.2.4.2
  function requestLoad(loader, request, refererName, refererAddress) {
    // 15.2.4.2.1 CallNormalize
    return new Promise(function(resolve, reject) {
      resolve(loader.loaderObj.normalize(request, refererName, refererAddress));
    })
    // 15.2.4.2.2 GetOrCreateLoad
    .then(function(name) {
      var load;
      if (loader.modules[name]) {
        load = createLoad(name);
        load.status = 'linked';
        // https://bugs.ecmascript.org/show_bug.cgi?id=2795
        load.module = loader.modules[name];
        return load;
      }

      for (var i = 0, l = loader.loads.length; i < l; i++) {
        load = loader.loads[i];
        if (load.name != name)
          continue;
        return load;
      }

      load = createLoad(name);
      loader.loads.push(load);

      proceedToLocate(loader, load);

      return load;
    });
  }

  // 15.2.4.3
  function proceedToLocate(loader, load) {
    proceedToFetch(loader, load,
      Promise.resolve()
      // 15.2.4.3.1 CallLocate
      .then(function() {
        return loader.loaderObj.locate({ name: load.name, metadata: load.metadata });
      })
    );
  }

  // 15.2.4.4
  function proceedToFetch(loader, load, p) {
    proceedToTranslate(loader, load,
      p
      // 15.2.4.4.1 CallFetch
      .then(function(address) {
        // adjusted, see https://bugs.ecmascript.org/show_bug.cgi?id=2602
        if (load.status != 'loading')
          return;
        load.address = address;

        return loader.loaderObj.fetch({ name: load.name, metadata: load.metadata, address: address });
      })
    );
  }

  // 15.2.4.5
  function proceedToTranslate(loader, load, p) {
    p
    // 15.2.4.5.1 CallTranslate
    .then(function(source) {
      if (load.status != 'loading')
        return;

      load.address = load.address || load.name;

      return Promise.resolve(loader.loaderObj.translate({ name: load.name, metadata: load.metadata, address: load.address, source: source }))

      // 15.2.4.5.2 CallInstantiate
      .then(function(source) {
        load.source = source;
        return loader.loaderObj.instantiate({ name: load.name, metadata: load.metadata, address: load.address, source: source });
      })

      // 15.2.4.5.3 InstantiateSucceeded
      .then(function(instantiateResult) {
        if (instantiateResult === undefined)
          throw new TypeError('Declarative modules unsupported in the polyfill.');
        
        if (typeof instantiateResult != 'object')
          throw new TypeError('Invalid instantiate return value');

        load.depsList = instantiateResult.deps || [];
        load.execute = instantiateResult.execute;
      })
      // 15.2.4.6 ProcessLoadDependencies
      .then(function() {
        load.dependencies = [];
        var depsList = load.depsList;

        var loadPromises = [];
        for (var i = 0, l = depsList.length; i < l; i++) (function(request, index) {
          loadPromises.push(
            requestLoad(loader, request, load.name, load.address)

            // 15.2.4.6.1 AddDependencyLoad (load is parentLoad)
            .then(function(depLoad) {

              // adjusted from spec to maintain dependency order
              // this is due to the System.register internal implementation needs
              load.dependencies[index] = {
                key: request,
                value: depLoad.name
              };

              if (depLoad.status != 'linked') {
                var linkSets = load.linkSets.concat([]);
                for (var i = 0, l = linkSets.length; i < l; i++)
                  addLoadToLinkSet(linkSets[i], depLoad);
              }

              // console.log('AddDependencyLoad ' + depLoad.name + ' for ' + load.name);
              // snapshot(loader);
            })
          );
        })(depsList[i], i);

        return Promise.all(loadPromises);
      })

      // 15.2.4.6.2 LoadSucceeded
      .then(function() {
        // console.log('LoadSucceeded ' + load.name);
        // snapshot(loader);

        load.status = 'loaded';

        var linkSets = load.linkSets.concat([]);
        for (var i = 0, l = linkSets.length; i < l; i++)
          updateLinkSetOnLoad(linkSets[i], load);
      });
    })
    // 15.2.4.5.4 LoadFailed
    ['catch'](function(exc) {
      load.status = 'failed';
      load.exception = exc;

      var linkSets = load.linkSets.concat([]);
      for (var i = 0, l = linkSets.length; i < l; i++) {
        linkSetFailed(linkSets[i], load, exc);
      }

      console.assert(load.linkSets.length == 0, 'linkSets not removed');
    });
  }

  // 15.2.4.7 PromiseOfStartLoadPartwayThrough absorbed into calling functions

  // 15.2.4.7.1
  function asyncStartLoadPartwayThrough(stepState) {
    return function(resolve, reject) {
      var loader = stepState.loader;
      var name = stepState.moduleName;
      var step = stepState.step;

      if (loader.modules[name])
        throw new TypeError('"' + name + '" already exists in the module table');

      // adjusted to pick up existing loads
      var existingLoad;
      for (var i = 0, l = loader.loads.length; i < l; i++) {
        if (loader.loads[i].name == name) {
          existingLoad = loader.loads[i];

          if (step == 'translate' && !existingLoad.source) {
            existingLoad.address = stepState.moduleAddress;
            proceedToTranslate(loader, existingLoad, Promise.resolve(stepState.moduleSource));
          }

          // a primary load -> use that existing linkset if it is for the direct load here
          // otherwise create a new linkset unit
          if (existingLoad.linkSets.length && existingLoad.linkSets[0].loads[0].name == existingLoad.name)
            return existingLoad.linkSets[0].done.then(function() {
              resolve(existingLoad);
            });
        }
      }

      var load = existingLoad || createLoad(name);

      load.metadata = stepState.moduleMetadata;

      var linkSet = createLinkSet(loader, load);

      loader.loads.push(load);

      resolve(linkSet.done);

      if (step == 'locate')
        proceedToLocate(loader, load);

      else if (step == 'fetch')
        proceedToFetch(loader, load, Promise.resolve(stepState.moduleAddress));

      else {
        console.assert(step == 'translate', 'translate step');
        load.address = stepState.moduleAddress;
        proceedToTranslate(loader, load, Promise.resolve(stepState.moduleSource));
      }
    }
  }

  // Declarative linking functions run through alternative implementation:
  // 15.2.5.1.1 CreateModuleLinkageRecord not implemented
  // 15.2.5.1.2 LookupExport not implemented
  // 15.2.5.1.3 LookupModuleDependency not implemented

  // 15.2.5.2.1
  function createLinkSet(loader, startingLoad) {
    var linkSet = {
      loader: loader,
      loads: [],
      startingLoad: startingLoad, // added see spec bug https://bugs.ecmascript.org/show_bug.cgi?id=2995
      loadingCount: 0
    };
    linkSet.done = new Promise(function(resolve, reject) {
      linkSet.resolve = resolve;
      linkSet.reject = reject;
    });
    addLoadToLinkSet(linkSet, startingLoad);
    return linkSet;
  }
  // 15.2.5.2.2
  function addLoadToLinkSet(linkSet, load) {
    if (load.status == 'failed')
      return;

    for (var i = 0, l = linkSet.loads.length; i < l; i++)
      if (linkSet.loads[i] == load)
        return;

    linkSet.loads.push(load);
    load.linkSets.push(linkSet);

    // adjustment, see https://bugs.ecmascript.org/show_bug.cgi?id=2603
    if (load.status != 'loaded') {
      linkSet.loadingCount++;
    }

    var loader = linkSet.loader;

    for (var i = 0, l = load.dependencies.length; i < l; i++) {
      if (!load.dependencies[i])
        continue;

      var name = load.dependencies[i].value;

      if (loader.modules[name])
        continue;

      for (var j = 0, d = loader.loads.length; j < d; j++) {
        if (loader.loads[j].name != name)
          continue;

        addLoadToLinkSet(linkSet, loader.loads[j]);
        break;
      }
    }
    // console.log('add to linkset ' + load.name);
    // snapshot(linkSet.loader);
  }

  // linking errors can be generic or load-specific
  // this is necessary for debugging info
  function doLink(linkSet) {
    var error = false;
    try {
      link(linkSet, function(load, exc) {
        linkSetFailed(linkSet, load, exc);
        error = true;
      });
    }
    catch(e) {
      linkSetFailed(linkSet, null, e);
      error = true;
    }
    return error;
  }

  // 15.2.5.2.3
  function updateLinkSetOnLoad(linkSet, load) {
    // console.log('update linkset on load ' + load.name);
    // snapshot(linkSet.loader);

    console.assert(load.status == 'loaded' || load.status == 'linked', 'loaded or linked');

    linkSet.loadingCount--;

    if (linkSet.loadingCount > 0)
      return;

    // adjusted for spec bug https://bugs.ecmascript.org/show_bug.cgi?id=2995
    var startingLoad = linkSet.startingLoad;

    // non-executing link variation for loader tracing
    // on the server. Not in spec.
    /***/
    if (linkSet.loader.loaderObj.execute === false) {
      var loads = [].concat(linkSet.loads);
      for (var i = 0, l = loads.length; i < l; i++) {
        var load = loads[i];
        load.module = {
          name: load.name,
          module: _newModule({}),
          evaluated: true
        };
        load.status = 'linked';
        finishLoad(linkSet.loader, load);
      }
      return linkSet.resolve(startingLoad);
    }
    /***/

    var abrupt = doLink(linkSet);

    if (abrupt)
      return;

    console.assert(linkSet.loads.length == 0, 'loads cleared');

    linkSet.resolve(startingLoad);
  }

  // 15.2.5.2.4
  function linkSetFailed(linkSet, load, exc) {
    var loader = linkSet.loader;
    var requests;

    checkError: 
    if (load) {
      if (linkSet.loads[0].name == load.name) {
        exc = addToError(exc, 'Error loading ' + load.name);
      }
      else {
        for (var i = 0; i < linkSet.loads.length; i++) {
          var pLoad = linkSet.loads[i];
          for (var j = 0; j < pLoad.dependencies.length; j++) {
            var dep = pLoad.dependencies[j];
            if (dep.value == load.name) {
              exc = addToError(exc, 'Error loading ' + load.name + ' as "' + dep.key + '" from ' + pLoad.name);
              break checkError;
            }
          }
        }
        exc = addToError(exc, 'Error loading ' + load.name + ' from ' + linkSet.loads[0].name);
      }
    }
    else {
      exc = addToError(exc, 'Error linking ' + linkSet.loads[0].name);
    }


    var loads = linkSet.loads.concat([]);
    for (var i = 0, l = loads.length; i < l; i++) {
      var load = loads[i];

      // store all failed load records
      loader.loaderObj.failed = loader.loaderObj.failed || [];
      if (indexOf.call(loader.loaderObj.failed, load) == -1)
        loader.loaderObj.failed.push(load);

      var linkIndex = indexOf.call(load.linkSets, linkSet);
      console.assert(linkIndex != -1, 'link not present');
      load.linkSets.splice(linkIndex, 1);
      if (load.linkSets.length == 0) {
        var globalLoadsIndex = indexOf.call(linkSet.loader.loads, load);
        if (globalLoadsIndex != -1)
          linkSet.loader.loads.splice(globalLoadsIndex, 1);
      }
    }
    linkSet.reject(exc);
  }

  // 15.2.5.2.5
  function finishLoad(loader, load) {
    // add to global trace if tracing
    if (loader.loaderObj.trace) {
      if (!loader.loaderObj.loads)
        loader.loaderObj.loads = {};
      var depMap = {};
      load.dependencies.forEach(function(dep) {
        depMap[dep.key] = dep.value;
      });
      loader.loaderObj.loads[load.name] = {
        name: load.name,
        deps: load.dependencies.map(function(dep){ return dep.key }),
        depMap: depMap,
        address: load.address,
        metadata: load.metadata,
        source: load.source
      };
    }
    // if not anonymous, add to the module table
    if (load.name) {
      console.assert(!loader.modules[load.name] || loader.modules[load.name].module === load.module.module, 'load not in module table');
      loader.modules[load.name] = load.module;
    }
    var loadIndex = indexOf.call(loader.loads, load);
    if (loadIndex != -1)
      loader.loads.splice(loadIndex, 1);
    for (var i = 0, l = load.linkSets.length; i < l; i++) {
      loadIndex = indexOf.call(load.linkSets[i].loads, load);
      if (loadIndex != -1)
        load.linkSets[i].loads.splice(loadIndex, 1);
    }
    load.linkSets.splice(0, load.linkSets.length);
  }

  function doDynamicExecute(linkSet, load, linkError) {
    try {
      var module = load.execute();
    }
    catch(e) {
      linkError(load, e);
      return;
    }
    if (!module || !(module instanceof Module))
      linkError(load, new TypeError('Execution must define a Module instance'));
    else
      return module;
  }

  // 26.3 Loader

  // 26.3.1.1
  // defined at top

  // importPromises adds ability to import a module twice without error - https://bugs.ecmascript.org/show_bug.cgi?id=2601
  function createImportPromise(loader, name, promise) {
    var importPromises = loader._loader.importPromises;
    return importPromises[name] = promise.then(function(m) {
      importPromises[name] = undefined;
      return m;
    }, function(e) {
      importPromises[name] = undefined;
      throw e;
    });
  }

  Loader.prototype = {
    // 26.3.3.1
    constructor: Loader,
    // 26.3.3.2
    define: function(name, source, options) {
      // check if already defined
      if (this._loader.importPromises[name])
        throw new TypeError('Module is already loading.');
      return createImportPromise(this, name, new Promise(asyncStartLoadPartwayThrough({
        step: 'translate',
        loader: this._loader,
        moduleName: name,
        moduleMetadata: options && options.metadata || {},
        moduleSource: source,
        moduleAddress: options && options.address
      })));
    },
    // 26.3.3.3
    'delete': function(name) {
      var loader = this._loader;
      delete loader.importPromises[name];
      delete loader.moduleRecords[name];
      return loader.modules[name] ? delete loader.modules[name] : false;
    },
    // 26.3.3.4 entries not implemented
    // 26.3.3.5
    get: function(key) {
      if (!this._loader.modules[key])
        return;
      return this._loader.modules[key].module;
    },
    // 26.3.3.7
    has: function(name) {
      return !!this._loader.modules[name];
    },
    // 26.3.3.8
    'import': function(name, parentName, parentAddress) {
      if (typeof parentName == 'object')
        parentName = parentName.name;

      // run normalize first
      var loaderObj = this;

      // added, see https://bugs.ecmascript.org/show_bug.cgi?id=2659
      return Promise.resolve(loaderObj.normalize(name, parentName))
      .then(function(name) {
        var loader = loaderObj._loader;

        if (loader.modules[name])
          return loader.modules[name].module;

        return loader.importPromises[name] || createImportPromise(loaderObj, name,
          loadModule(loader, name, {})
          .then(function(load) {
            delete loader.importPromises[name];
            return load.module.module;
          }));
      });
    },
    // 26.3.3.9 keys not implemented
    // 26.3.3.10
    load: function(name) {
      var loader = this._loader;
      if (loader.modules[name])
        return Promise.resolve();
      return loader.importPromises[name] || createImportPromise(this, name, new Promise(asyncStartLoadPartwayThrough({
        step: 'locate',
        loader: loader,
        moduleName: name,
        moduleMetadata: {},
        moduleSource: undefined,
        moduleAddress: undefined
      }))
      .then(function() {
        delete loader.importPromises[name];
      }));
    },
    // 26.3.3.11
    module: function(source, options) {
      var load = createLoad();
      load.address = options && options.address;
      var linkSet = createLinkSet(this._loader, load);
      var sourcePromise = Promise.resolve(source);
      var loader = this._loader;
      var p = linkSet.done.then(function() {
        return load.module.module;
      });
      proceedToTranslate(loader, load, sourcePromise);
      return p;
    },
    // 26.3.3.12
    newModule: function (obj) {
      if (typeof obj != 'object')
        throw new TypeError('Expected object');

      var m = new Module();

      var pNames = [];
      if (Object.getOwnPropertyNames && obj != null)
        pNames = Object.getOwnPropertyNames(obj);
      else
        for (var key in obj)
          pNames.push(key);

      for (var i = 0; i < pNames.length; i++) (function(key) {
        defineProperty(m, key, {
          configurable: false,
          enumerable: true,
          get: function () {
            return obj[key];
          },
          set: function() {
            throw new Error('Module exports cannot be changed externally.');
          }
        });
      })(pNames[i]);

      if (Object.freeze)
        Object.freeze(m);

      return m;
    },
    // 26.3.3.14
    set: function(name, module) {
      if (!(module instanceof Module))
        throw new TypeError('Loader.set(' + name + ', module) must be a module');
      this._loader.modules[name] = {
        module: module
      };
    },
    // 26.3.3.15 values not implemented
    // 26.3.3.16 @@iterator not implemented
    // 26.3.3.17 @@toStringTag not implemented

    // 26.3.3.18.1
    normalize: function(name, referrerName, referrerAddress) {},
    // 26.3.3.18.2
    locate: function(load) {
      return load.name;
    },
    // 26.3.3.18.3
    fetch: function(load) {
    },
    // 26.3.3.18.4
    translate: function(load) {
      return load.source;
    },
    // 26.3.3.18.5
    instantiate: function(load) {
    }
  };

  var _newModule = Loader.prototype.newModule;

/*
 * ES6 Module Declarative Linking Code
 */
  function link(linkSet, linkError) {

    var loader = linkSet.loader;

    if (!linkSet.loads.length)
      return;

    var loads = linkSet.loads.concat([]);

    for (var i = 0; i < loads.length; i++) {
      var load = loads[i];

      var module = doDynamicExecute(linkSet, load, linkError);
      if (!module)
        return;
      load.module = {
        name: load.name,
        module: module
      };
      load.status = 'linked';

      finishLoad(loader, load);
    }
  }

})();

var System;

  var fetchTextFromURL;
  if (typeof XMLHttpRequest != 'undefined') {
    fetchTextFromURL = function(url, authorization, fulfill, reject) {
      var xhr = new XMLHttpRequest();
      var sameDomain = true;
      var doTimeout = false;
      if (!('withCredentials' in xhr)) {
        // check if same domain
        var domainCheck = /^(\w+:)?\/\/([^\/]+)/.exec(url);
        if (domainCheck) {
          sameDomain = domainCheck[2] === window.location.host;
          if (domainCheck[1])
            sameDomain &= domainCheck[1] === window.location.protocol;
        }
      }
      if (!sameDomain && typeof XDomainRequest != 'undefined') {
        xhr = new XDomainRequest();
        xhr.onload = load;
        xhr.onerror = error;
        xhr.ontimeout = error;
        xhr.onprogress = function() {};
        xhr.timeout = 0;
        doTimeout = true;
      }
      function load() {
        fulfill(xhr.responseText);
      }
      function error() {
        reject(new Error('XHR error' + (xhr.status ? ' (' + xhr.status + (xhr.statusText ? ' ' + xhr.statusText  : '') + ')' : '') + ' loading ' + url));
      }

      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4) {
          // in Chrome on file:/// URLs, status is 0
          if (xhr.status == 0) {
            if (xhr.responseText) {
              load();
            }
            else {
              // when responseText is empty, wait for load or error event
              // to inform if it is a 404 or empty file
              xhr.addEventListener('error', error);
              xhr.addEventListener('load', load);
            }
          }
          else if (xhr.status === 200) {
            load();
          }
          else {
            error();
          }
        }
      };
      xhr.open("GET", url, true);

      if (xhr.setRequestHeader) {
        xhr.setRequestHeader('Accept', 'application/x-es-module, */*');
        // can set "authorization: true" to enable withCredentials only
        if (authorization) {
          if (typeof authorization == 'string')
            xhr.setRequestHeader('Authorization', authorization);
          xhr.withCredentials = true;
        }
      }

      if (doTimeout) {
        setTimeout(function() {
          xhr.send();
        }, 0);
      } else {
        xhr.send(null);
      }
    };
  }
  else if (typeof require != 'undefined' && typeof process != 'undefined') {
    var fs;
    fetchTextFromURL = function(url, authorization, fulfill, reject) {
      if (url.substr(0, 8) != 'file:///')
        throw new Error('Unable to fetch "' + url + '". Only file URLs of the form file:/// allowed running in Node.');
      fs = fs || require('fs');
      if (isWindows)
        url = url.replace(/\//g, '\\').substr(8);
      else
        url = url.substr(7);
      return fs.readFile(url, function(err, data) {
        if (err) {
          return reject(err);
        }
        else {
          // Strip Byte Order Mark out if it's the leading char
          var dataString = data + '';
          if (dataString[0] === '\ufeff')
            dataString = dataString.substr(1);

          fulfill(dataString);
        }
      });
    };
  }
  else if (typeof self != 'undefined' && typeof self.fetch != 'undefined') {
    fetchTextFromURL = function(url, authorization, fulfill, reject) {
      var opts = {
        headers: {'Accept': 'application/x-es-module, */*'}
      };

      if (authorization) {
        if (typeof authorization == 'string')
          opts.headers['Authorization'] = authorization;
        opts.credentials = 'include';
      }

      fetch(url, opts)
        .then(function (r) {
          if (r.ok) {
            return r.text();
          } else {
            throw new Error('Fetch error: ' + r.status + ' ' + r.statusText);
          }
        })
        .then(fulfill, reject);
    }
  }
  else {
    throw new TypeError('No environment fetch API available.');
  }
/*
 * Traceur, Babel and TypeScript transpile hook for Loader
 */
var transpile = (function() {

  // use Traceur by default
  Loader.prototype.transpiler = 'traceur';

  function transpile(load) {
    var self = this;

    return Promise.resolve(__global[self.transpiler == 'typescript' ? 'ts' : self.transpiler]
        || (self.pluginLoader || self)['import'](self.transpiler))
    .then(function(transpiler) {
      if (transpiler.__useDefault)
        transpiler = transpiler['default'];

      var transpileFunction;
      if (transpiler.Compiler)
        transpileFunction = traceurTranspile;
      else if (transpiler.createLanguageService)
        transpileFunction = typescriptTranspile;
      else
        transpileFunction = babelTranspile;

      // note __moduleName will be part of the transformer meta in future when we have the spec for this
      return '(function(__moduleName){' + transpileFunction.call(self, load, transpiler) + '\n})("' + load.name + '");\n//# sourceURL=' + load.address + '!transpiled';
    });
  };

  function traceurTranspile(load, traceur) {
    var options = this.traceurOptions || {};
    options.modules = 'instantiate';
    options.script = false;
    if (options.sourceMaps === undefined)
      options.sourceMaps = 'inline';
    options.filename = load.address;
    options.inputSourceMap = load.metadata.sourceMap;
    options.moduleName = false;

    var compiler = new traceur.Compiler(options);

    return doTraceurCompile(load.source, compiler, options.filename);
  }
  function doTraceurCompile(source, compiler, filename) {
    try {
      return compiler.compile(source, filename);
    }
    catch(e) {
      // on older versions of traceur (<0.9.3), an array of errors is thrown
      // rather than a single error.
      if (e.length) {
        throw e[0];
      }
      throw e;
    }
  }

  function babelTranspile(load, babel) {
    var options = this.babelOptions || {};
    options.modules = 'system';
    if (options.sourceMap === undefined)
      options.sourceMap = 'inline';
    options.inputSourceMap = load.metadata.sourceMap;
    options.filename = load.address;
    options.code = true;
    options.ast = false;

    return babel.transform(load.source, options).code;
  }

  function typescriptTranspile(load, ts) {
    var options = this.typescriptOptions || {};
    options.target = options.target || ts.ScriptTarget.ES5;
    if (options.sourceMap === undefined)
      options.sourceMap = true;
    if (options.sourceMap && options.inlineSourceMap !== false)
      options.inlineSourceMap = true;

    options.module = ts.ModuleKind.System;

    return ts.transpile(load.source, options, load.address);
  }

  return transpile;
})();
// SystemJS Loader Class and Extension helpers
function SystemJSLoader() {
  Loader.call(this);

  this.paths = {};
  this._loader.paths = {};

  systemJSConstructor.call(this);
}

// inline Object.create-style class extension
function SystemProto() {};
SystemProto.prototype = Loader.prototype;
SystemJSLoader.prototype = new SystemProto();
SystemJSLoader.prototype.constructor = SystemJSLoader;

var systemJSConstructor;

function hook(name, hook) {
  SystemJSLoader.prototype[name] = hook(SystemJSLoader.prototype[name] || function() {});
}
function hookConstructor(hook) {
  systemJSConstructor = hook(systemJSConstructor || function() {});
}


var absURLRegEx = /^[^\/]+:\/\//;
function isAbsolute(name) {
  return name.match(absURLRegEx);
}
function isRel(name) {
  return (name[0] == '.' && (!name[1] || name[1] == '/' || name[1] == '.')) || name[0] == '/';
}
function isPlain(name) {
  return !isRel(name) && !isAbsolute(name);
}

var baseURIObj = new URL(baseURI);

function urlResolve(name, parent) {
  // url resolution shortpaths
  if (name[0] == '.') {
    // dot-relative url normalization
    if (name[1] == '/' && name[2] != '.')
      return (parent && parent.substr(0, parent.lastIndexOf('/') + 1) || baseURI) + name.substr(2);
  }
  else if (name[0] != '/' && name.indexOf(':') == -1) {
    // plain parent normalization
    return (parent && parent.substr(0, parent.lastIndexOf('/') + 1) || baseURI) + name;
  }

  return new URL(name, parent && parent.replace(/#/g, '%05') || baseURIObj).href.replace(/%05/g, '#');
}

// NB no specification provided for System.paths, used ideas discussed in https://github.com/jorendorff/js-loaders/issues/25
function applyPaths(loader, name) {
  // most specific (most number of slashes in path) match wins
  var pathMatch = '', wildcard, maxWildcardPrefixLen = 0;

  var paths = loader.paths;
  var pathsCache = loader._loader.paths;

  // check to see if we have a paths entry
  for (var p in paths) {
    if (paths.hasOwnProperty && !paths.hasOwnProperty(p))
      continue;

    // paths sanitization
    var path = paths[p];
    if (path !== pathsCache[p])
      path = paths[p] = pathsCache[p] = urlResolve(paths[p], isRel(paths[p]) ? baseURI : loader.baseURL);

    // exact path match
    if (p.indexOf('*') === -1) {
      if (name == p)
        return paths[p];
      
      // support trailing / in paths rules
      else if (name.substr(0, p.length - 1) == p.substr(0, p.length - 1) && (name.length < p.length || name[p.length - 1] == p[p.length - 1]) && (paths[p][paths[p].length - 1] == '/' || paths[p] == '')) {
        return paths[p].substr(0, paths[p].length - 1) + (name.length > p.length ? (paths[p] && '/' || '') + name.substr(p.length) : '');
      }
    }
    // wildcard path match
    else {
      var pathParts = p.split('*');
      if (pathParts.length > 2)
        throw new TypeError('Only one wildcard in a path is permitted');

      var wildcardPrefixLen = pathParts[0].length;
      if (wildcardPrefixLen >= maxWildcardPrefixLen &&
          name.substr(0, pathParts[0].length) == pathParts[0] &&
          name.substr(name.length - pathParts[1].length) == pathParts[1]) {
            maxWildcardPrefixLen = wildcardPrefixLen;
            pathMatch = p;
            wildcard = name.substr(pathParts[0].length, name.length - pathParts[1].length - pathParts[0].length);
          }
    }
  }

  var outPath = paths[pathMatch];
  if (typeof wildcard == 'string')
    outPath = outPath.replace('*', wildcard);

  return outPath;
}

function dedupe(deps) {
  var newDeps = [];
  for (var i = 0, l = deps.length; i < l; i++)
    if (indexOf.call(newDeps, deps[i]) == -1)
      newDeps.push(deps[i])
  return newDeps;
}

function group(deps) {
  var names = [];
  var indices = [];
  for (var i = 0, l = deps.length; i < l; i++) {
    var index = indexOf.call(names, deps[i]);
    if (index === -1) {
      names.push(deps[i]);
      indices.push([i]);
    }
    else {
      indices[index].push(i);
    }
  }
  return { names: names, indices: indices };
}

var getOwnPropertyDescriptor = true;
try {
  Object.getOwnPropertyDescriptor({ a: 0 }, 'a');
}
catch(e) {
  getOwnPropertyDescriptor = false;
}

// converts any module.exports object into an object ready for SystemJS.newModule
function getESModule(exports) {
  var esModule = {};
  // don't trigger getters/setters in environments that support them
  if ((typeof exports == 'object' || typeof exports == 'function') && exports !== __global) {
      if (getOwnPropertyDescriptor) {
        for (var p in exports) {
          // The default property is copied to esModule later on
          if (p === 'default')
            continue;
          defineOrCopyProperty(esModule, exports, p);
        }
      }
      else {
        extend(esModule, exports);
      }
  }
  esModule['default'] = exports;
  defineProperty(esModule, '__useDefault', {
    value: true
  });
  return esModule;
}

function defineOrCopyProperty(targetObj, sourceObj, propName) {
  try {
    var d;
    if (d = Object.getOwnPropertyDescriptor(sourceObj, propName))
      defineProperty(targetObj, propName, d);
  }
  catch (ex) {
    // Object.getOwnPropertyDescriptor threw an exception, fall back to normal set property
    // we dont need hasOwnProperty here because getOwnPropertyDescriptor would have returned undefined above
    targetObj[propName] = sourceObj[propName];
    return false;
  }
}

function extend(a, b, prepend) {
  var hasOwnProperty = b && b.hasOwnProperty;
  for (var p in b) {
    if (hasOwnProperty && !b.hasOwnProperty(p))
      continue;
    if (!prepend || !(p in a))
      a[p] = b[p];
  }
  return a;
}

// meta first-level extends where:
// array + array appends
// object + object extends
// other properties replace
function extendMeta(a, b, prepend) {
  var hasOwnProperty = b && b.hasOwnProperty;
  for (var p in b) {
    if (hasOwnProperty && !b.hasOwnProperty(p))
      continue;
    var val = b[p];
    if (!(p in a))
      a[p] = val;
    else if (val instanceof Array && a[p] instanceof Array)
      a[p] = [].concat(prepend ? val : a[p]).concat(prepend ? a[p] : val);
    else if (typeof val == 'object' && val !== null && typeof a[p] == 'object')
      a[p] = extend(extend({}, a[p]), val, prepend);
    else if (!prepend)
      a[p] = val;
  }
}

function extendPkgConfig(pkgCfgA, pkgCfgB, pkgName, loader, warnInvalidProperties) {
  for (var prop in pkgCfgB) {
    if (indexOf.call(['main', 'format', 'defaultExtension', 'basePath'], prop) != -1) {
      pkgCfgA[prop] = pkgCfgB[prop];
    }
    else if (prop == 'map') {
      extend(pkgCfgA.map = pkgCfgA.map || {}, pkgCfgB.map);
    }
    else if (prop == 'meta') {
      extend(pkgCfgA.meta = pkgCfgA.meta || {}, pkgCfgB.meta);
    }
    else if (prop == 'depCache') {
      for (var d in pkgCfgB.depCache) {
        var dNormalized;

        if (d.substr(0, 2) == './')
          dNormalized = pkgName + '/' + d.substr(2);
        else
          dNormalized = coreResolve.call(loader, d);
        loader.depCache[dNormalized] = (loader.depCache[dNormalized] || []).concat(pkgCfgB.depCache[d]);
      }
    }
    else if (warnInvalidProperties && indexOf.call(['browserConfig', 'nodeConfig', 'devConfig', 'productionConfig'], prop) == -1 && 
        (!pkgCfgB.hasOwnProperty || pkgCfgB.hasOwnProperty(prop))) {
      warn.call(loader, '"' + prop + '" is not a valid package configuration option in package ' + pkgName);
    }
  }
}

// deeply-merge (to first level) config with any existing package config
function setPkgConfig(loader, pkgName, cfg, prependConfig) {
  var pkg;

  // first package is config by reference for fast path, cloned after that
  if (!loader.packages[pkgName]) {
    pkg = loader.packages[pkgName] = cfg;
  }
  else {
    var basePkg = loader.packages[pkgName];
    pkg = loader.packages[pkgName] = {};

    extendPkgConfig(pkg, prependConfig ? cfg : basePkg, pkgName, loader, prependConfig);
    extendPkgConfig(pkg, prependConfig ? basePkg : cfg, pkgName, loader, !prependConfig);
  }
  
  // main object becomes main map
  if (typeof pkg.main == 'object') {
    pkg.map = pkg.map || {};
    pkg.map['./@main'] = pkg.main;
    pkg.main['default'] = pkg.main['default'] || './';
    pkg.main = '@main';
  }

  return pkg;
}

function warn(msg) {
  if (this.warnings && typeof console != 'undefined' && console.warn)
    console.warn(msg);
}
// we define a __exec for globally-scoped execution
// used by module format implementations
var __exec;

(function() {

  var hasBuffer = typeof Buffer != 'undefined';
  try {
    if (hasBuffer && new Buffer('a').toString('base64') != 'YQ==')
      hasBuffer = false;
  }
  catch(e) {
    hasBuffer = false;
  }

  var sourceMapPrefix = '\n//# sourceMappingURL=data:application/json;base64,';
  function inlineSourceMap(sourceMapString) {
    if (hasBuffer)
      return sourceMapPrefix + new Buffer(sourceMapString).toString('base64');
    else if (typeof btoa != 'undefined')
      return sourceMapPrefix + btoa(unescape(encodeURIComponent(sourceMapString)));
    else
      return '';
  }

  function getSource(load, wrap) {
    var lastLineIndex = load.source.lastIndexOf('\n');

    // wrap ES formats with a System closure for System global encapsulation
    if (load.metadata.format == 'global')
      wrap = false;

    var sourceMap = load.metadata.sourceMap;
    if (sourceMap) {
      if (typeof sourceMap != 'object')
        throw new TypeError('load.metadata.sourceMap must be set to an object.');

      sourceMap = JSON.stringify(sourceMap);
    }

    return (wrap ? '(function(System, SystemJS) {' : '') + load.source + (wrap ? '\n})(System, System);' : '')
        // adds the sourceURL comment if not already present
        + (load.source.substr(lastLineIndex, 15) != '\n//# sourceURL=' 
          ? '\n//# sourceURL=' + load.address + (sourceMap ? '!transpiled' : '') : '')
        // add sourceMappingURL if load.metadata.sourceMap is set
        + (sourceMap && inlineSourceMap(sourceMap) || '');
  }

  var curLoad;

  // System.register, System.registerDynamic, AMD define pipeline
  // if currently evalling code here, immediately reduce the registered entry against the load record
  hook('pushRegister_', function() {
    return function(register) {
      if (!curLoad)
        return false;

      this.reduceRegister_(curLoad, register);
      return true;
    };
  });

  // System clobbering protection (mostly for Traceur)
  var curSystem;
  var callCounter = 0;
  function preExec(loader, load) {
    curLoad = load;
    if (callCounter++ == 0)
      curSystem = __global.System;
    __global.System = __global.SystemJS = loader; 
  }
  function postExec() {
    if (--callCounter == 0)
      __global.System = __global.SystemJS = curSystem;
    curLoad = undefined;
  }

  var useVm;
  var vm;
  __exec = function(load) {
    if (!load.source)
      return;
    if ((load.metadata.integrity || load.metadata.nonce) && supportsScriptExec)
      return scriptExec.call(this, load);
    try {
      preExec(this, load);
      curLoad = load;
      // global scoped eval for node (avoids require scope leak)
      if (!vm && this._nodeRequire) {
        vm = this._nodeRequire('vm');
        useVm = vm.runInThisContext("typeof System !== 'undefined' && System") === this;
      }
      if (useVm)
        vm.runInThisContext(getSource(load, true), { filename: load.address + (load.metadata.sourceMap ? '!transpiled' : '') });
      else
        (0, eval)(getSource(load, true));
      postExec();
    }
    catch(e) {
      postExec(); 
      throw addToError(e, 'Evaluating ' + load.address);
    }
  };

  var supportsScriptExec = false;
  if (isBrowser && typeof document != 'undefined' && document.getElementsByTagName) {
    var scripts = document.getElementsByTagName('script');
    $__curScript = scripts[scripts.length - 1];

    if (!(window.chrome && window.chrome.extension || navigator.userAgent.match(/^Node\.js/)))
      supportsScriptExec = true;
  }

  // script execution via injecting a script tag into the page
  // this allows CSP integrity and nonce to be set for CSP environments
  var head;
  function scriptExec(load) {
    if (!head)
      head = document.head || document.body || document.documentElement;

    var script = document.createElement('script');
    script.text = getSource(load, false);
    var onerror = window.onerror;
    var e;
    window.onerror = function(_e) {
      e = addToError(_e, 'Evaluating ' + load.address);
      if (onerror)
        onerror.apply(this, arguments);
    }
    preExec(this, load);

    if (load.metadata.integrity)
      script.setAttribute('integrity', load.metadata.integrity);
    if (load.metadata.nonce)
      script.setAttribute('nonce', load.metadata.nonce);

    head.appendChild(script);
    head.removeChild(script);
    postExec();
    window.onerror = onerror;
    if (e)
      throw e;
  }

})();
function readMemberExpression(p, value) {
  var pParts = p.split('.');
  while (pParts.length)
    value = value[pParts.shift()];
  return value;
}

function getMapMatch(map, name) {
  var bestMatch, bestMatchLength = 0;

  for (var p in map) {
    if (name.substr(0, p.length) == p && (name.length == p.length || name[p.length] == '/')) {
      var curMatchLength = p.split('/').length;
      if (curMatchLength <= bestMatchLength)
        continue;
      bestMatch = p;
      bestMatchLength = curMatchLength;
    }
  }

  return bestMatch;
}

function prepareBaseURL(loader) {
  // ensure baseURl is fully normalized
  if (this._loader.baseURL !== this.baseURL) {
    if (this.baseURL[this.baseURL.length - 1] != '/')
      this.baseURL += '/';
    
    this._loader.baseURL = this.baseURL = new URL(this.baseURL, baseURIObj).href;
  }
}

var envModule;
function setProduction(isProduction, isBuilder) {
  this.set('@system-env', envModule = this.newModule({
    browser: isBrowser,
    node: !!this._nodeRequire,
    production: !isBuilder && isProduction,
    dev: isBuilder || !isProduction,
    build: isBuilder,
    'default': true
  }));
}

hookConstructor(function(constructor) {
  return function() {
    constructor.call(this);

    // support baseURL
    this.baseURL = baseURI;

    // support map and paths
    this.map = {};

    // make the location of the system.js script accessible
    if (typeof $__curScript != 'undefined')
      this.scriptSrc = $__curScript.src;

    // global behaviour flags
    this.warnings = false;
    this.defaultJSExtensions = false;
    this.pluginFirst = false;
    this.loaderErrorStack = false;

    // by default load ".json" files as json
    // leading * meta doesn't need normalization
    // NB add this in next breaking release
    // this.meta['*.json'] = { format: 'json' };

    // support the empty module, as a concept
    this.set('@empty', this.newModule({}));

    setProduction.call(this, false, false);
  };
});

// include the node require since we're overriding it
if (typeof require != 'undefined' && typeof process != 'undefined' && !process.browser)
  SystemJSLoader.prototype._nodeRequire = require;

/*
  Core SystemJS Normalization

  If a name is relative, we apply URL normalization to the page
  If a name is an absolute URL, we leave it as-is

  Plain names (neither of the above) run through the map and paths
  normalization phases.

  The paths normalization phase applies last (paths extension), which
  defines the `decanonicalize` function and normalizes everything into
  a URL.
 */

var parentModuleContext;
function getNodeModule(name, baseURL) {
  if (!isPlain(name))
    throw new Error('Node module ' + name + ' can\'t be loaded as it is not a package require.');

  if (!parentModuleContext) {
    var Module = this._nodeRequire('module');
    var base = baseURL.substr(isWindows ? 8 : 7);
    parentModuleContext = new Module(base);
    parentModuleContext.paths = Module._nodeModulePaths(base);
  }
  return parentModuleContext.require(name);
}

function coreResolve(name, parentName) {
  // standard URL resolution
  if (isRel(name))
    return urlResolve(name, parentName);
  else if (isAbsolute(name))
    return name;

  // plain names not starting with './', '://' and '/' go through custom resolution
  var mapMatch = getMapMatch(this.map, name);

  if (mapMatch) {
    name = this.map[mapMatch] + name.substr(mapMatch.length);

    if (isRel(name))
      return urlResolve(name);
    else if (isAbsolute(name))
      return name;
  }

  if (this.has(name))
    return name;
  
  // dynamically load node-core modules when requiring `@node/fs` for example
  if (name.substr(0, 6) == '@node/') {
    if (!this._nodeRequire)
      throw new TypeError('Error loading ' + name + '. Can only load node core modules in Node.');
    if (this.builder)
      this.set(name, this.newModule({}));
    else
      this.set(name, this.newModule(getESModule(getNodeModule.call(this, name.substr(6), this.baseURL))));
    return name;
  }

  // prepare the baseURL to ensure it is normalized
  prepareBaseURL.call(this);

  return applyPaths(this, name) || this.baseURL + name;
}

hook('normalize', function(normalize) {
  return function(name, parentName, skipExt) {
    var resolved = coreResolve.call(this, name, parentName);
    if (this.defaultJSExtensions && !skipExt && resolved.substr(resolved.length - 3, 3) != '.js' && !isPlain(resolved))
      resolved += '.js';
    return resolved;
  };
});

// percent encode just '#' in urls if using HTTP requests
var httpRequest = typeof XMLHttpRequest != 'undefined';
hook('locate', function(locate) {
  return function(load) {
    return Promise.resolve(locate.call(this, load))
    .then(function(address) {
      if (httpRequest)
        return address.replace(/#/g, '%23');
      return address;
    });
  };
});

/*
 * Fetch with authorization
 */
hook('fetch', function() {
  return function(load) {
    return new Promise(function(resolve, reject) {
      fetchTextFromURL(load.address, load.metadata.authorization, resolve, reject);
    });
  };
});

/*
  __useDefault
  
  When a module object looks like:
  newModule(
    __useDefault: true,
    default: 'some-module'
  })

  Then importing that module provides the 'some-module'
  result directly instead of the full module.

  Useful for eg module.exports = function() {}
*/
hook('import', function(systemImport) {
  return function(name, parentName, parentAddress) {
    if (parentName && parentName.name)
      warn.call(this, 'SystemJS.import(name, { name: parentName }) is deprecated for SystemJS.import(name, parentName), while importing ' + name + ' from ' + parentName.name);
    return systemImport.call(this, name, parentName, parentAddress).then(function(module) {
      return module.__useDefault ? module['default'] : module;
    });
  };
});

/*
 * Allow format: 'detect' meta to enable format detection
 */
hook('translate', function(systemTranslate) {
  return function(load) {
    if (load.metadata.format == 'detect')
      load.metadata.format = undefined;
    return systemTranslate.apply(this, arguments);
  };
});


/*
 * JSON format support
 *
 * Supports loading JSON files as a module format itself
 *
 * Usage:
 *
 * SystemJS.config({
 *   meta: {
 *     '*.json': { format: 'json' }
 *   }
 * });
 *
 * Module is returned as if written:
 *
 * export default {JSON}
 *
 * No named exports are provided
 *
 * Files ending in ".json" are treated as json automatically by SystemJS
 */
hook('instantiate', function(instantiate) {
  return function(load) {
    if (load.metadata.format == 'json' && !this.builder) {
      var entry = load.metadata.entry = createEntry();
      entry.deps = [];
      entry.execute = function() {
        try {
          return JSON.parse(load.source);
        }
        catch(e) {
          throw new Error("Invalid JSON file " + load.name);
        }
      };
    }
  };
})

/*
 Extend config merging one deep only

  loader.config({
    some: 'random',
    config: 'here',
    deep: {
      config: { too: 'too' }
    }
  });

  <=>

  loader.some = 'random';
  loader.config = 'here'
  loader.deep = loader.deep || {};
  loader.deep.config = { too: 'too' };


  Normalizes meta and package configs allowing for:

  SystemJS.config({
    meta: {
      './index.js': {}
    }
  });

  To become

  SystemJS.meta['https://thissite.com/index.js'] = {};

  For easy normalization canonicalization with latest URL support.

*/
function envSet(loader, cfg, envCallback) {
  if (envModule.browser && cfg.browserConfig)
    envCallback(cfg.browserConfig);
  if (envModule.node && cfg.nodeConfig)
    envCallback(cfg.nodeConfig);
  if (envModule.dev && cfg.devConfig)
    envCallback(cfg.devConfig);
  if (envModule.build && cfg.buildConfig)
    envCallback(cfg.buildConfig);
  if (envModule.production && cfg.productionConfig)
    envCallback(cfg.productionConfig);
}

SystemJSLoader.prototype.getConfig = function(name) {
  var cfg = {};
  var loader = this;
  for (var p in loader) {
    if (loader.hasOwnProperty && !loader.hasOwnProperty(p) || p in SystemJSLoader.prototype && p != 'transpiler')
      continue;
    if (indexOf.call(['_loader', 'amdDefine', 'amdRequire', 'defined', 'failed', 'version', 'loads'], p) == -1)
      cfg[p] = loader[p];
  }
  cfg.production = envModule.production;
  return cfg;
};

var curCurScript;
SystemJSLoader.prototype.config = function(cfg, isEnvConfig) {
  var loader = this;

  if ('loaderErrorStack' in cfg) {
    curCurScript = $__curScript;
    if (cfg.loaderErrorStack)
      $__curScript = undefined;
    else
      $__curScript = curCurScript;
  }

  if ('warnings' in cfg)
    loader.warnings = cfg.warnings;

  // transpiler deprecation path
  if (cfg.transpilerRuntime === false)
    loader._loader.loadedTranspilerRuntime = true;

  if ('production' in cfg || 'build' in cfg)
    setProduction.call(loader, !!cfg.production, !!(cfg.build || envModule && envModule.build));

  if (!isEnvConfig) {
    // if using nodeConfig / browserConfig / productionConfig, take baseURL from there
    // these exceptions will be unnecessary when we can properly implement config queuings
    var baseURL;
    envSet(loader, cfg, function(cfg) {
      baseURL = baseURL || cfg.baseURL;
    });
    baseURL = baseURL || cfg.baseURL;

    // always configure baseURL first
    if (baseURL) {
      var hasConfig = false;
      function checkHasConfig(obj) {
        for (var p in obj)
          if (obj.hasOwnProperty(p))
            return true;
      }
      if (checkHasConfig(loader.packages) || checkHasConfig(loader.meta) || checkHasConfig(loader.depCache) || checkHasConfig(loader.bundles) || checkHasConfig(loader.packageConfigPaths))
        throw new TypeError('Incorrect configuration order. The baseURL must be configured with the first SystemJS.config call.');

      this.baseURL = baseURL;
      prepareBaseURL.call(this);
    }

    if (cfg.paths)
      extend(loader.paths, cfg.paths);

    envSet(loader, cfg, function(cfg) {
      if (cfg.paths)
        extend(loader.paths, cfg.paths);
    });

    // warn on wildcard path deprecations
    if (this.warnings) {
      for (var p in loader.paths)
        if (p.indexOf('*') != -1)
          warn.call(loader, 'Paths configuration "' + p + '" -> "' + loader.paths[p] + '" uses wildcards which are being deprecated for simpler trailing "/" folder paths.');
    }
  }

  if (cfg.defaultJSExtensions) {
    loader.defaultJSExtensions = cfg.defaultJSExtensions;
    warn.call(loader, 'The defaultJSExtensions configuration option is deprecated, use packages configuration instead.');
  }

  if (cfg.pluginFirst)
    loader.pluginFirst = cfg.pluginFirst;

  if (cfg.map) {
    var objMaps = '';
    for (var p in cfg.map) {
      var v = cfg.map[p];

      // object map backwards-compat into packages configuration
      if (typeof v !== 'string') {
        objMaps += (objMaps.length ? ', ' : '') + '"' + p + '"';

        var defaultJSExtension = loader.defaultJSExtensions && p.substr(p.length - 3, 3) != '.js';
        var prop = loader.decanonicalize(p);
        if (defaultJSExtension && prop.substr(prop.length - 3, 3) == '.js')
          prop = prop.substr(0, prop.length - 3);

        // if a package main, revert it
        var pkgMatch = '';
        for (var pkg in loader.packages) {
          if (prop.substr(0, pkg.length) == pkg 
              && (!prop[pkg.length] || prop[pkg.length] == '/') 
              && pkgMatch.split('/').length < pkg.split('/').length)
            pkgMatch = pkg;
        }
        if (pkgMatch && loader.packages[pkgMatch].main)
          prop = prop.substr(0, prop.length - loader.packages[pkgMatch].main.length - 1);

        var pkg = loader.packages[prop] = loader.packages[prop] || {};
        pkg.map = v;
      }
      else {
        loader.map[p] = v;
      }
    }
    if (objMaps)
      warn.call(loader, 'The map configuration for ' + objMaps + ' uses object submaps, which is deprecated in global map.\nUpdate this to use package contextual map with configs like SystemJS.config({ packages: { "' + p + '": { map: {...} } } }).');
  }

  if (cfg.packageConfigPaths) {
    var packageConfigPaths = [];
    for (var i = 0; i < cfg.packageConfigPaths.length; i++) {
      var path = cfg.packageConfigPaths[i];
      var packageLength = Math.max(path.lastIndexOf('*') + 1, path.lastIndexOf('/'));
      var normalized = coreResolve.call(loader, path.substr(0, packageLength));
      packageConfigPaths[i] = normalized + path.substr(packageLength);
    }
    loader.packageConfigPaths = packageConfigPaths;
  }

  if (cfg.bundles) {
    for (var p in cfg.bundles) {
      var bundle = [];
      for (var i = 0; i < cfg.bundles[p].length; i++) {
        var defaultJSExtension = loader.defaultJSExtensions && cfg.bundles[p][i].substr(cfg.bundles[p][i].length - 3, 3) != '.js';
        var normalizedBundleDep = loader.decanonicalize(cfg.bundles[p][i]);
        if (defaultJSExtension && normalizedBundleDep.substr(normalizedBundleDep.length - 3, 3) == '.js')
          normalizedBundleDep = normalizedBundleDep.substr(0, normalizedBundleDep.length - 3);
        bundle.push(normalizedBundleDep);
      }
      loader.bundles[p] = bundle;
    }
  }

  if (cfg.packages) {
    for (var p in cfg.packages) {
      if (p.match(/^([^\/]+:)?\/\/$/))
        throw new TypeError('"' + p + '" is not a valid package name.');

      var prop = coreResolve.call(loader, p);

      // allow trailing slash in packages
      if (prop[prop.length - 1] == '/')
        prop = prop.substr(0, prop.length - 1);

      setPkgConfig(loader, prop, cfg.packages[p], false);
    }
  }

  for (var c in cfg) {
    var v = cfg[c];

    if (indexOf.call(['baseURL', 'map', 'packages', 'bundles', 'paths', 'warnings', 'packageConfigPaths', 
          'loaderErrorStack', 'browserConfig', 'nodeConfig', 'devConfig', 'buildConfig', 'productionConfig'], c) != -1)
      continue;

    if (typeof v != 'object' || v instanceof Array) {
      loader[c] = v;
    }
    else {
      loader[c] = loader[c] || {};

      for (var p in v) {
        // base-level wildcard meta does not normalize to retain catch-all quality
        if (c == 'meta' && p[0] == '*') {
          extend(loader[c][p] = loader[c][p] || {}, v[p]);
        }
        else if (c == 'meta') {
          // meta can go through global map, with defaultJSExtensions adding
          var resolved = coreResolve.call(loader, p);
          if (loader.defaultJSExtensions && resolved.substr(resolved.length - 3, 3) != '.js' && !isPlain(resolved))
            resolved += '.js';
          extend(loader[c][resolved] = loader[c][resolved] || {}, v[p]);
        }
        else if (c == 'depCache') {
          var defaultJSExtension = loader.defaultJSExtensions && p.substr(p.length - 3, 3) != '.js';
          var prop = loader.decanonicalize(p);
          if (defaultJSExtension && prop.substr(prop.length - 3, 3) == '.js')
            prop = prop.substr(0, prop.length - 3);
          loader[c][prop] = [].concat(v[p]);
        }
        else {
          loader[c][p] = v[p];
        }
      }
    }
  }

  envSet(loader, cfg, function(cfg) {
    loader.config(cfg, true);
  });
};/*
 * Package Configuration Extension
 *
 * Example:
 *
 * SystemJS.packages = {
 *   jquery: {
 *     main: 'index.js', // when not set, package name is requested directly
 *     format: 'amd',
 *     defaultExtension: 'ts', // defaults to 'js', can be set to false
 *     modules: {
 *       '*.ts': {
 *         loader: 'typescript'
 *       },
 *       'vendor/sizzle.js': {
 *         format: 'global'
 *       }
 *     },
 *     map: {
 *        // map internal require('sizzle') to local require('./vendor/sizzle')
 *        sizzle: './vendor/sizzle.js',
 *        // map any internal or external require of 'jquery/vendor/another' to 'another/index.js'
 *        './vendor/another.js': './another/index.js',
 *        // test.js / test -> lib/test.js
 *        './test.js': './lib/test.js',
 *
 *        // environment-specific map configurations
 *        './index.js': {
 *          '~browser': './index-node.js',
 *          './custom-condition.js|~export': './index-custom.js'
 *        }
 *     },
 *     // allows for setting package-prefixed depCache
 *     // keys are normalized module names relative to the package itself
 *     depCache: {
 *       // import 'package/index.js' loads in parallel package/lib/test.js,package/vendor/sizzle.js
 *       './index.js': ['./test'],
 *       './test.js': ['external-dep'],
 *       'external-dep/path.js': ['./another.js']
 *     }
 *   }
 * };
 *
 * Then:
 *   import 'jquery'                       -> jquery/index.js
 *   import 'jquery/submodule'             -> jquery/submodule.js
 *   import 'jquery/submodule.ts'          -> jquery/submodule.ts loaded as typescript
 *   import 'jquery/vendor/another'        -> another/index.js
 *
 * Detailed Behaviours
 * - main can have a leading "./" can be added optionally
 * - map and defaultExtension are applied to the main
 * - defaultExtension adds the extension only if the exact extension is not present
 * - defaultJSExtensions applies after map when defaultExtension is not set
 * - if a meta value is available for a module, map and defaultExtension are skipped
 * - like global map, package map also applies to subpaths (sizzle/x, ./vendor/another/sub)
 * - condition module map is '@env' module in package or '@system-env' globally
 * - map targets support conditional interpolation ('./x': './x.#{|env}.js')
 * - internal package map targets cannot use boolean conditionals
 *
 * Package Configuration Loading
 *
 * Not all packages may already have their configuration present in the System config
 * For these cases, a list of packageConfigPaths can be provided, which when matched against
 * a request, will first request a ".json" file by the package name to derive the package
 * configuration from. This allows dynamic loading of non-predetermined code, a key use
 * case in SystemJS.
 *
 * Example:
 *
 *   SystemJS.packageConfigPaths = ['packages/test/package.json', 'packages/*.json'];
 *
 *   // will first request 'packages/new-package/package.json' for the package config
 *   // before completing the package request to 'packages/new-package/path'
 *   SystemJS.import('packages/new-package/path');
 *
 *   // will first request 'packages/test/package.json' before the main
 *   SystemJS.import('packages/test');
 *
 * When a package matches packageConfigPaths, it will always send a config request for
 * the package configuration.
 * The package name itself is taken to be the match up to and including the last wildcard
 * or trailing slash.
 * The most specific package config path will be used.
 * Any existing package configurations for the package will deeply merge with the
 * package config, with the existing package configurations taking preference.
 * To opt-out of the package configuration request for a package that matches
 * packageConfigPaths, use the { configured: true } package config option.
 *
 */
(function() {

  hookConstructor(function(constructor) {
    return function() {
      constructor.call(this);
      this.packages = {};
      this.packageConfigPaths = [];
    };
  });

  function getPackage(loader, normalized) {
    // use most specific package
    var curPkg, curPkgLen = 0, pkgLen;
    for (var p in loader.packages) {
      if (normalized.substr(0, p.length) === p && (normalized.length === p.length || normalized[p.length] === '/')) {
        pkgLen = p.split('/').length;
        if (pkgLen > curPkgLen) {
          curPkg = p;
          curPkgLen = pkgLen;
        }
      }
    }
    return curPkg;
  }

  function addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions) {
    // don't apply extensions to folders or if defaultExtension = false
    if (!subPath || subPath[subPath.length - 1] == '/' || skipExtensions || pkg.defaultExtension === false)
      return subPath;

    var metaMatch = false;

    // exact meta or meta with any content after the last wildcard skips extension
    if (pkg.meta)
      getMetaMatches(pkg.meta, subPath, function(metaPattern, matchMeta, matchDepth) {
        if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1)
          return metaMatch = true;
      });

    // exact global meta or meta with any content after the last wildcard skips extension
    if (!metaMatch && loader.meta)
      getMetaMatches(loader.meta, pkgName + '/' + subPath, function(metaPattern, matchMeta, matchDepth) {
        if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1)
          return metaMatch = true;
      });

    if (metaMatch)
      return subPath;

    // work out what the defaultExtension is and add if not there already
    // NB reconsider if default should really be ".js"?
    var defaultExtension = '.' + (pkg.defaultExtension || 'js');
    if (subPath.substr(subPath.length - defaultExtension.length) != defaultExtension)
      return subPath + defaultExtension;
    else
      return subPath;
  }

  function applyPackageConfigSync(loader, pkg, pkgName, subPath, skipExtensions) {
    // main
    if (!subPath) {
      if (pkg.main)
        subPath = pkg.main.substr(0, 2) == './' ? pkg.main.substr(2) : pkg.main;
      // also no submap if name is package itself (import 'pkg' -> 'path/to/pkg.js')
      else
        // NB can add a default package main convention here when defaultJSExtensions is deprecated
        // if it becomes internal to the package then it would no longer be an exit path
        return pkgName + (loader.defaultJSExtensions ? '.js' : '');
    }

    // map config checking without then with extensions
    if (pkg.map) {
      var mapPath = './' + subPath;

      var mapMatch = getMapMatch(pkg.map, mapPath);

      // we then check map with the default extension adding
      if (!mapMatch) {
        mapPath = './' + addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions);
        if (mapPath != './' + subPath)
          mapMatch = getMapMatch(pkg.map, mapPath);
      }
      if (mapMatch) {
        var mapped = doMapSync(loader, pkg, pkgName, mapMatch, mapPath, skipExtensions);
        if (mapped)
          return mapped;
      }
    }

    // normal package resolution
    return pkgName + '/' + addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions);
  }

  function validMapping(mapMatch, mapped, pkgName, path) {
    // disallow internal to subpath maps
    if (mapMatch == '.')
      throw new Error('Package ' + pkgName + ' has a map entry for "." which is not permitted.');
    
    // allow internal ./x -> ./x/y or ./x/ -> ./x/y recursive maps
    // but only if the path is exactly ./x and not ./x/z
    if (mapped.substr(0, mapMatch.length) == mapMatch && path.length > mapMatch.length)
      return false;

    return true;
  }

  function doMapSync(loader, pkg, pkgName, mapMatch, path, skipExtensions) {
    if (path[path.length - 1] == '/')
      path = path.substr(0, path.length - 1);
    var mapped = pkg.map[mapMatch];

    if (typeof mapped == 'object')
      throw new Error('Synchronous conditional normalization not supported sync normalizing ' + mapMatch + ' in ' + pkgName);

    if (!validMapping(mapMatch, mapped, pkgName, path) || typeof mapped != 'string')
      return;

    // package map to main / base-level
    if (mapped == '.')
      mapped = pkgName;

    // internal package map
    else if (mapped.substr(0, 2) == './')
      return pkgName + '/' + addDefaultExtension(loader, pkg, pkgName, mapped.substr(2) + path.substr(mapMatch.length), skipExtensions);
    
    // external map reference
    return loader.normalizeSync(mapped + path.substr(mapMatch.length), pkgName + '/');
  }

  function applyPackageConfig(loader, pkg, pkgName, subPath, skipExtensions) {
    // main
    if (!subPath) {
      if (pkg.main)
        subPath = pkg.main.substr(0, 2) == './' ? pkg.main.substr(2) : pkg.main;
      // also no submap if name is package itself (import 'pkg' -> 'path/to/pkg.js')
      else
        // NB can add a default package main convention here when defaultJSExtensions is deprecated
        // if it becomes internal to the package then it would no longer be an exit path
        return Promise.resolve(pkgName + (loader.defaultJSExtensions ? '.js' : ''));
    }

    // map config checking without then with extensions
    var mapPath, mapMatch;

    if (pkg.map) {
      mapPath = './' + subPath;
      mapMatch = getMapMatch(pkg.map, mapPath);

      // we then check map with the default extension adding
      if (!mapMatch) {
        mapPath = './' + addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions);
        if (mapPath != './' + subPath)
          mapMatch = getMapMatch(pkg.map, mapPath);
      }
    }

    return (mapMatch ? doMap(loader, pkg, pkgName, mapMatch, mapPath, skipExtensions) : Promise.resolve())
    .then(function(mapped) {
      if (mapped)
        return Promise.resolve(mapped);

      // normal package resolution / fallback resolution for no conditional match
      return Promise.resolve(pkgName + '/' + addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions));
    });
  }

  function doStringMap(loader, pkg, pkgName, mapMatch, mapped, path, skipExtensions) {
    // NB the interpolation cases should strictly skip subsequent interpolation
    // package map to main / base-level
    if (mapped == '.')
      mapped = pkgName;
    
    // internal package map
    else if (mapped.substr(0, 2) == './')
      return Promise.resolve(pkgName + '/' + addDefaultExtension(loader, pkg, pkgName, mapped.substr(2) + path.substr(mapMatch.length), skipExtensions))
      .then(function(name) {
        return interpolateConditional.call(loader, name, pkgName + '/');
      });
    
    // external map reference
    return loader.normalize(mapped + path.substr(mapMatch.length), pkgName + '/');
  }

  function doMap(loader, pkg, pkgName, mapMatch, path, skipExtensions) {
    if (path[path.length - 1] == '/')
      path = path.substr(0, path.length - 1);

    var mapped = pkg.map[mapMatch];

    if (typeof mapped == 'string') {
      if (!validMapping(mapMatch, mapped, pkgName, path))
        return Promise.resolve();
      return doStringMap(loader, pkg, pkgName, mapMatch, mapped, path, skipExtensions);
    }

    // we use a special conditional syntax to allow the builder to handle conditional branch points further
    if (loader.builder)
      return Promise.resolve(pkgName + '/#:' + path);

    // we load all conditions upfront
    var conditionPromises = [];
    var conditions = [];
    for (var e in mapped) {
      var c = parseCondition(e);
      conditions.push({
        condition: c,
        map: mapped[e]
      });
      conditionPromises.push(loader['import'](c.module, pkgName));
    }

    // map object -> conditional map
    return Promise.all(conditionPromises)
    .then(function(conditionValues) {
      // first map condition to match is used
      for (var i = 0; i < conditions.length; i++) {
        var c = conditions[i].condition;
        var value = readMemberExpression(c.prop, conditionValues[i]);
        if (!c.negate && value || c.negate && !value)
          return conditions[i].map;
      }
    })
    .then(function(mapped) {
      if (mapped) {
        if (!validMapping(mapMatch, mapped, pkgName, path))
          return;
        return doStringMap(loader, pkg, pkgName, mapMatch, mapped, path, skipExtensions);
      }

      // no environment match -> fallback to original subPath by returning undefined
    });
  }

  // normalizeSync = decanonicalize + package resolution
  SystemJSLoader.prototype.normalizeSync = SystemJSLoader.prototype.decanonicalize = SystemJSLoader.prototype.normalize;

  // decanonicalize must JUST handle package defaultExtension: false case when defaultJSExtensions is set
  // to be deprecated!
  hook('decanonicalize', function(decanonicalize) {
    return function(name, parentName) {
      if (this.builder)
        return decanonicalize.call(this, name, parentName, true);

      var decanonicalized = decanonicalize.call(this, name, parentName, false);

      if (!this.defaultJSExtensions)
        return decanonicalized;
    
      var pkgName = getPackage(this, decanonicalized);

      var pkg = this.packages[pkgName];
      var defaultExtension = pkg && pkg.defaultExtension;

      if (defaultExtension == undefined && pkg && pkg.meta)
        getMetaMatches(pkg.meta, decanonicalized.substr(pkgName), function(metaPattern, matchMeta, matchDepth) {
          if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1) {
            defaultExtension = false;
            return true;
          }
        });
      
      if ((defaultExtension === false || defaultExtension && defaultExtension != '.js') && name.substr(name.length - 3, 3) != '.js' && decanonicalized.substr(decanonicalized.length - 3, 3) == '.js')
        decanonicalized = decanonicalized.substr(0, decanonicalized.length - 3);

      return decanonicalized;
    };
  });

  hook('normalizeSync', function(normalizeSync) {
    return function(name, parentName, isPlugin) {
      var loader = this;
      isPlugin = isPlugin === true;

      // apply contextual package map first
      // (we assume the parent package config has already been loaded)
      if (parentName)
        var parentPackageName = getPackage(loader, parentName) ||
            loader.defaultJSExtensions && parentName.substr(parentName.length - 3, 3) == '.js' &&
            getPackage(loader, parentName.substr(0, parentName.length - 3));

      var parentPackage = parentPackageName && loader.packages[parentPackageName];

      // ignore . since internal maps handled by standard package resolution
      if (parentPackage && name[0] != '.') {
        var parentMap = parentPackage.map;
        var parentMapMatch = parentMap && getMapMatch(parentMap, name);

        if (parentMapMatch && typeof parentMap[parentMapMatch] == 'string') {
          var mapped = doMapSync(loader, parentPackage, parentPackageName, parentMapMatch, name, isPlugin);      
          if (mapped)
            return mapped;
        }
      }

      var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';

      // apply map, core, paths, contextual package map
      var normalized = normalizeSync.call(loader, name, parentName, false);

      // undo defaultJSExtension
      if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) != '.js')
        defaultJSExtension = false;
      if (defaultJSExtension)
        normalized = normalized.substr(0, normalized.length - 3);

      var pkgConfigMatch = getPackageConfigMatch(loader, normalized);
      var pkgName = pkgConfigMatch && pkgConfigMatch.packageName || getPackage(loader, normalized);

      if (!pkgName)
        return normalized + (defaultJSExtension ? '.js' : '');

      var subPath = normalized.substr(pkgName.length + 1);

      return applyPackageConfigSync(loader, loader.packages[pkgName] || {}, pkgName, subPath, isPlugin);
    };
  });

  hook('normalize', function(normalize) {
    return function(name, parentName, isPlugin) {
      var loader = this;
      isPlugin = isPlugin === true;

      return Promise.resolve()
      .then(function() {
        // apply contextual package map first
        // (we assume the parent package config has already been loaded)
        if (parentName)
          var parentPackageName = getPackage(loader, parentName) ||
              loader.defaultJSExtensions && parentName.substr(parentName.length - 3, 3) == '.js' &&
              getPackage(loader, parentName.substr(0, parentName.length - 3));

        var parentPackage = parentPackageName && loader.packages[parentPackageName];

        // ignore . since internal maps handled by standard package resolution
        if (parentPackage && name.substr(0, 2) != './') {
          var parentMap = parentPackage.map;
          var parentMapMatch = parentMap && getMapMatch(parentMap, name);

          if (parentMapMatch)
            return doMap(loader, parentPackage, parentPackageName, parentMapMatch, name, isPlugin);
        }

        return Promise.resolve();
      })
      .then(function(mapped) {
        if (mapped)
          return mapped;

        var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';

        // apply map, core, paths, contextual package map
        var normalized = normalize.call(loader, name, parentName, false);

        // undo defaultJSExtension
        if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) != '.js')
          defaultJSExtension = false;
        if (defaultJSExtension)
          normalized = normalized.substr(0, normalized.length - 3);

        var pkgConfigMatch = getPackageConfigMatch(loader, normalized);
        var pkgName = pkgConfigMatch && pkgConfigMatch.packageName || getPackage(loader, normalized);

        if (!pkgName)
          return Promise.resolve(normalized + (defaultJSExtension ? '.js' : ''));

        var pkg = loader.packages[pkgName];

        // if package is already configured or not a dynamic config package, use existing package config
        var isConfigured = pkg && (pkg.configured || !pkgConfigMatch);
        return (isConfigured ? Promise.resolve(pkg) : loadPackageConfigPath(loader, pkgName, pkgConfigMatch.configPath))
        .then(function(pkg) {
          var subPath = normalized.substr(pkgName.length + 1);

          return applyPackageConfig(loader, pkg, pkgName, subPath, isPlugin);
        });
      });
    };
  });

  // check if the given normalized name matches a packageConfigPath
  // if so, loads the config
  var packageConfigPaths = {};

  // data object for quick checks against package paths
  function createPkgConfigPathObj(path) {
    var lastWildcard = path.lastIndexOf('*');
    var length = Math.max(lastWildcard + 1, path.lastIndexOf('/'));
    return {
      length: length,
      regEx: new RegExp('^(' + path.substr(0, length).replace(/[.+?^${}()|[\]\\]/g, '\\$&').replace(/\*/g, '[^\\/]+') + ')(\\/|$)'),
      wildcard: lastWildcard != -1
    };
  }

  // most specific match wins
  function getPackageConfigMatch(loader, normalized) {
    var pkgName, exactMatch = false, configPath;
    for (var i = 0; i < loader.packageConfigPaths.length; i++) {
      var packageConfigPath = loader.packageConfigPaths[i];
      var p = packageConfigPaths[packageConfigPath] || (packageConfigPaths[packageConfigPath] = createPkgConfigPathObj(packageConfigPath));
      if (normalized.length < p.length)
        continue;
      var match = normalized.match(p.regEx);
      if (match && (!pkgName || (!(exactMatch && p.wildcard) && pkgName.length < match[1].length))) {
        pkgName = match[1];
        exactMatch = !p.wildcard;
        configPath = pkgName + packageConfigPath.substr(p.length);
      }
    }

    if (!pkgName)
      return;

    return {
      packageName: pkgName,
      configPath: configPath
    };
  }

  function loadPackageConfigPath(loader, pkgName, pkgConfigPath) {
    var configLoader = loader.pluginLoader || loader;

    // NB remove this when json is default
    (configLoader.meta[pkgConfigPath] = configLoader.meta[pkgConfigPath] || {}).format = 'json';
    configLoader.meta[pkgConfigPath].loader = null;

    return configLoader.load(pkgConfigPath)
    .then(function() {
      var cfg = configLoader.get(pkgConfigPath)['default'];

      // support "systemjs" prefixing
      if (cfg.systemjs)
        cfg = cfg.systemjs;

      // modules backwards compatibility
      if (cfg.modules) {
        cfg.meta = cfg.modules;
        warn.call(loader, 'Package config file ' + pkgConfigPath + ' is configured with "modules", which is deprecated as it has been renamed to "meta".');
      }

      return setPkgConfig(loader, pkgName, cfg, true);
    });
  }

  function getMetaMatches(pkgMeta, subPath, matchFn) {
    // wildcard meta
    var meta = {};
    var wildcardIndex;
    for (var module in pkgMeta) {
      // allow meta to start with ./ for flexibility
      var dotRel = module.substr(0, 2) == './' ? './' : '';
      if (dotRel)
        module = module.substr(2);

      wildcardIndex = module.indexOf('*');
      if (wildcardIndex === -1)
        continue;

      if (module.substr(0, wildcardIndex) == subPath.substr(0, wildcardIndex)
          && module.substr(wildcardIndex + 1) == subPath.substr(subPath.length - module.length + wildcardIndex + 1)) {
        // alow match function to return true for an exit path
        if (matchFn(module, pkgMeta[dotRel + module], module.split('/').length))
          return;
      }
    }
    // exact meta
    var exactMeta = pkgMeta[subPath] && pkgMeta.hasOwnProperty && pkgMeta.hasOwnProperty(subPath) ? pkgMeta[subPath] : pkgMeta['./' + subPath];
    if (exactMeta)
      matchFn(exactMeta, exactMeta, 0);
  }

  hook('locate', function(locate) {
    return function(load) {
      var loader = this;
      return Promise.resolve(locate.call(this, load))
      .then(function(address) {
        var pkgName = getPackage(loader, load.name);
        if (pkgName) {
          var pkg = loader.packages[pkgName];
          var subPath = load.name.substr(pkgName.length + 1);

          var meta = {};
          if (pkg.meta) {
            var bestDepth = 0;

            // NB support a main shorthand in meta here?
            getMetaMatches(pkg.meta, subPath, function(metaPattern, matchMeta, matchDepth) {
              if (matchDepth > bestDepth)
                bestDepth = matchDepth;
              extendMeta(meta, matchMeta, matchDepth && bestDepth > matchDepth);
            });

            extendMeta(load.metadata, meta);
          }

          // format
          if (pkg.format && !load.metadata.loader)
            load.metadata.format = load.metadata.format || pkg.format;
        }

        return address;
      });
    };
  });

})();
/*
 * Script tag fetch
 *
 * When load.metadata.scriptLoad is true, we load via script tag injection.
 */
(function() {

  if (typeof document != 'undefined')
    var head = document.getElementsByTagName('head')[0];

  var curSystem;
  var curRequire;

  // if doing worker executing, this is set to the load record being executed
  var workerLoad = null;
  
  // interactive mode handling method courtesy RequireJS
  var ieEvents = head && (function() {
    var s = document.createElement('script');
    var isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]';
    return s.attachEvent && !(s.attachEvent.toString && s.attachEvent.toString().indexOf('[native code') < 0) && !isOpera;
  })();

  // IE interactive-only part
  // we store loading scripts array as { script: <script>, load: {...} }
  var interactiveLoadingScripts = [];
  var interactiveScript;
  function getInteractiveScriptLoad() {
    if (interactiveScript && interactiveScript.script.readyState === 'interactive')
      return interactiveScript.load;

    for (var i = 0; i < interactiveLoadingScripts.length; i++)
      if (interactiveLoadingScripts[i].script.readyState == 'interactive') {
        interactiveScript = interactiveLoadingScripts[i];
        return interactiveScript.load;
      }
  }
  
  // System.register, System.registerDynamic, AMD define pipeline
  // this is called by the above methods when they execute
  // we then run the reduceRegister_ collection function either immediately
  // if we are in IE and know the currently executing script (interactive)
  // or later if we need to wait for the synchronous load callback to know the script
  var loadingCnt = 0;
  var registerQueue = [];
  hook('pushRegister_', function(pushRegister) {
    return function(register) {
      // if using eval-execution then skip
      if (pushRegister.call(this, register))
        return false;

      // if using worker execution, then we're done
      if (workerLoad)
        this.reduceRegister_(workerLoad, register);

      // detect if we know the currently executing load (IE)
      // if so, immediately call reduceRegister
      else if (ieEvents)
        this.reduceRegister_(getInteractiveScriptLoad(), register);

      // otherwise, add to our execution queue
      // to call reduceRegister on sync script load event
      else if (loadingCnt)
        registerQueue.push(register);

      // if we're not currently loading anything though
      // then do the reduction against a null load
      // (out of band named define or named register)
      // note even in non-script environments, this catch is used
      else
        this.reduceRegister_(null, register);

      return true;
    };
  });

  function webWorkerImport(loader, load) {
    return new Promise(function(resolve, reject) {
      if (load.metadata.integrity)
        reject(new Error('Subresource integrity checking is not supported in web workers.'));

      workerLoad = load;
      try {
        importScripts(load.address);
      }
      catch(e) {
        workerLoad = null;
        reject(e);
      }
      workerLoad = null;

      // if nothing registered, then something went wrong
      if (!load.metadata.entry)
        reject(new Error(load.address + ' did not call System.register or AMD define. If loading a global, ensure the meta format is set to global.'));

      resolve('');
    });
  }

  // override fetch to use script injection
  hook('fetch', function(fetch) {
    return function(load) {
      var loader = this;

      if (load.metadata.format == 'json' || !load.metadata.scriptLoad || (!isBrowser && !isWorker))
        return fetch.call(this, load);

      if (isWorker)
        return webWorkerImport(loader, load);

      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        
        s.async = true;

        if (load.metadata.crossOrigin)
          s.crossOrigin = load.metadata.crossOrigin;

        if (load.metadata.integrity)
          s.setAttribute('integrity', load.metadata.integrity);

        if (ieEvents) {
          s.attachEvent('onreadystatechange', complete);
          interactiveLoadingScripts.push({
            script: s,
            load: load
          });
        }
        else {
          s.addEventListener('load', complete, false);
          s.addEventListener('error', error, false);
        }

        loadingCnt++;

        curSystem = __global.System;
        curRequire = __global.require;

        s.src = load.address;
        head.appendChild(s);

        function complete(evt) {
          if (s.readyState && s.readyState != 'loaded' && s.readyState != 'complete')
            return;

          loadingCnt--;

          // complete call is sync on execution finish
          // (in ie already done reductions)
          if (!load.metadata.entry && !registerQueue.length) {
            loader.reduceRegister_(load);
          }
          else if (!ieEvents) {
            for (var i = 0; i < registerQueue.length; i++)
              loader.reduceRegister_(load, registerQueue[i]);
            registerQueue = [];
          }

          cleanup();

          // if nothing registered, then something went wrong
          if (!load.metadata.entry && !load.metadata.bundle)
            reject(new Error(load.name + ' did not call System.register or AMD define. If loading a global module configure the global name via the meta exports property for script injection support.'));

          resolve('');
        }

        function error(evt) {
          cleanup();
          reject(new Error('Unable to load script ' + load.address));
        }

        function cleanup() {
          __global.System = curSystem;
          __global.require = curRequire;

          if (s.detachEvent) {
            s.detachEvent('onreadystatechange', complete);
            for (var i = 0; i < interactiveLoadingScripts.length; i++)
              if (interactiveLoadingScripts[i].script == s) {
                if (interactiveScript && interactiveScript.script == s)
                  interactiveScript = null;
                interactiveLoadingScripts.splice(i, 1);
              }
          }
          else {
            s.removeEventListener('load', complete, false);
            s.removeEventListener('error', error, false);
          }

          head.removeChild(s);
        }
      });
    };
  });
})();
/*
 * Instantiate registry extension
 *
 * Supports Traceur System.register 'instantiate' output for loading ES6 as ES5.
 *
 * - Creates the loader.register function
 * - Also supports metadata.format = 'register' in instantiate for anonymous register modules
 * - Also supports metadata.deps, metadata.execute and metadata.executingRequire
 *     for handling dynamic modules alongside register-transformed ES6 modules
 *
 *
 * The code here replicates the ES6 linking groups algorithm to ensure that
 * circular ES6 compiled into System.register can work alongside circular AMD 
 * and CommonJS, identically to the actual ES6 loader.
 *
 */


/*
 * Registry side table entries in loader.defined
 * Registry Entry Contains:
 *    - name
 *    - deps 
 *    - declare for declarative modules
 *    - execute for dynamic modules, different to declarative execute on module
 *    - executingRequire indicates require drives execution for circularity of dynamic modules
 *    - declarative optional boolean indicating which of the above
 *
 * Can preload modules directly on SystemJS.defined['my/module'] = { deps, execute, executingRequire }
 *
 * Then the entry gets populated with derived information during processing:
 *    - normalizedDeps derived from deps, created in instantiate
 *    - groupIndex used by group linking algorithm
 *    - evaluated indicating whether evaluation has happend
 *    - module the module record object, containing:
 *      - exports actual module exports
 *
 *    For dynamic we track the es module with:
 *    - esModule actual es module value
 *    - esmExports whether to extend the esModule with named exports
 *      
 *    Then for declarative only we track dynamic bindings with the 'module' records:
 *      - name
 *      - exports
 *      - setters declarative setter functions
 *      - dependencies, module records of dependencies
 *      - importers, module records of dependents
 *
 * After linked and evaluated, entries are removed, declarative module records remain in separate
 * module binding table
 *
 */

var leadingCommentAndMetaRegEx = /^(\s*\/\*[^\*]*(\*(?!\/)[^\*]*)*\*\/|\s*\/\/[^\n]*|\s*"[^"]+"\s*;?|\s*'[^']+'\s*;?)*\s*/;
function detectRegisterFormat(source) {
  var leadingCommentAndMeta = source.match(leadingCommentAndMetaRegEx);
  return leadingCommentAndMeta && source.substr(leadingCommentAndMeta[0].length, 15) == 'System.register';
}

function createEntry() {
  return {
    name: null,
    deps: null,
    originalIndices: null,
    declare: null,
    execute: null,
    executingRequire: false,
    declarative: false,
    normalizedDeps: null,
    groupIndex: null,
    evaluated: false,
    module: null,
    esModule: null,
    esmExports: false
  };
}

(function() {

  /*
   * There are two variations of System.register:
   * 1. System.register for ES6 conversion (2-3 params) - System.register([name, ]deps, declare)
   *    see https://github.com/ModuleLoader/es6-module-loader/wiki/System.register-Explained
   *
   * 2. System.registerDynamic for dynamic modules (3-4 params) - System.registerDynamic([name, ]deps, executingRequire, execute)
   * the true or false statement 
   *
   * this extension implements the linking algorithm for the two variations identical to the spec
   * allowing compiled ES6 circular references to work alongside AMD and CJS circular references.
   *
   */
  SystemJSLoader.prototype.register = function(name, deps, declare) {
    if (typeof name != 'string') {
      declare = deps;
      deps = name;
      name = null;
    }

    // dynamic backwards-compatibility
    // can be deprecated eventually
    if (typeof declare == 'boolean')
      return this.registerDynamic.apply(this, arguments);

    var entry = createEntry();
    // ideally wouldn't apply map config to bundle names but 
    // dependencies go through map regardless so we can't restrict
    // could reconsider in shift to new spec
    entry.name = name && (this.decanonicalize || this.normalize).call(this, name);
    entry.declarative = true;
    entry.deps = deps;
    entry.declare = declare;

    this.pushRegister_({
      amd: false,
      entry: entry
    });
  };
  SystemJSLoader.prototype.registerDynamic = function(name, deps, declare, execute) {
    if (typeof name != 'string') {
      execute = declare;
      declare = deps;
      deps = name;
      name = null;
    }

    // dynamic
    var entry = createEntry();
    entry.name = name && (this.decanonicalize || this.normalize).call(this, name);
    entry.deps = deps;
    entry.execute = execute;
    entry.executingRequire = declare;

    this.pushRegister_({
      amd: false,
      entry: entry
    });
  };
  hook('reduceRegister_', function() {
    return function(load, register) {
      if (!register)
        return;

      var entry = register.entry;
      var curMeta = load && load.metadata;

      // named register
      if (entry.name) {
        if (!(entry.name in this.defined))
          this.defined[entry.name] = entry;

        if (curMeta)
          curMeta.bundle = true;
      }
      // anonymous register
      if (!entry.name || load && !curMeta.entry && entry.name == load.name) {
        if (!curMeta)
          throw new TypeError('Invalid System.register call. Anonymous System.register calls can only be made by modules loaded by SystemJS.import and not via script tags.');
        if (curMeta.entry) {
          if (curMeta.format == 'register')
            throw new Error('Multiple anonymous System.register calls in module ' + load.name + '. If loading a bundle, ensure all the System.register calls are named.');
          else
            throw new Error('Module ' + load.name + ' interpreted as ' + curMeta.format + ' module format, but called System.register.');
        }
        if (!curMeta.format)
          curMeta.format = 'register';
        curMeta.entry = entry;
      }
    };
  });

  hookConstructor(function(constructor) {
    return function() {
      constructor.call(this);

      this.defined = {};
      this._loader.moduleRecords = {};
    };
  });

  function buildGroups(entry, loader, groups) {
    groups[entry.groupIndex] = groups[entry.groupIndex] || [];

    if (indexOf.call(groups[entry.groupIndex], entry) != -1)
      return;

    groups[entry.groupIndex].push(entry);

    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {
      var depName = entry.normalizedDeps[i];
      var depEntry = loader.defined[depName];
      
      // not in the registry means already linked / ES6
      if (!depEntry || depEntry.evaluated)
        continue;
      
      // now we know the entry is in our unlinked linkage group
      var depGroupIndex = entry.groupIndex + (depEntry.declarative != entry.declarative);

      // the group index of an entry is always the maximum
      if (depEntry.groupIndex === null || depEntry.groupIndex < depGroupIndex) {
        
        // if already in a group, remove from the old group
        if (depEntry.groupIndex !== null) {
          groups[depEntry.groupIndex].splice(indexOf.call(groups[depEntry.groupIndex], depEntry), 1);

          // if the old group is empty, then we have a mixed depndency cycle
          if (groups[depEntry.groupIndex].length == 0)
            throw new Error("Mixed dependency cycle detected");
        }

        depEntry.groupIndex = depGroupIndex;
      }

      buildGroups(depEntry, loader, groups);
    }
  }

  function link(name, startEntry, loader) {
    // skip if already linked
    if (startEntry.module)
      return;

    startEntry.groupIndex = 0;

    var groups = [];

    buildGroups(startEntry, loader, groups);

    var curGroupDeclarative = !!startEntry.declarative == groups.length % 2;
    for (var i = groups.length - 1; i >= 0; i--) {
      var group = groups[i];
      for (var j = 0; j < group.length; j++) {
        var entry = group[j];

        // link each group
        if (curGroupDeclarative)
          linkDeclarativeModule(entry, loader);
        else
          linkDynamicModule(entry, loader);
      }
      curGroupDeclarative = !curGroupDeclarative; 
    }
  }

  // module binding records
  function ModuleRecord() {}
  defineProperty(ModuleRecord, 'toString', {
    value: function() {
      return 'Module';
    }
  });

  function getOrCreateModuleRecord(name, moduleRecords) {
    return moduleRecords[name] || (moduleRecords[name] = {
      name: name,
      dependencies: [],
      exports: new ModuleRecord(), // start from an empty module and extend
      importers: []
    });
  }

  function linkDeclarativeModule(entry, loader) {
    // only link if already not already started linking (stops at circular)
    if (entry.module)
      return;

    var moduleRecords = loader._loader.moduleRecords;
    var module = entry.module = getOrCreateModuleRecord(entry.name, moduleRecords);
    var exports = entry.module.exports;

    var declaration = entry.declare.call(__global, function(name, value) {
      module.locked = true;

      if (typeof name == 'object') {
        for (var p in name)
          exports[p] = name[p];
      }
      else {
        exports[name] = value;
      }

      for (var i = 0, l = module.importers.length; i < l; i++) {
        var importerModule = module.importers[i];
        if (!importerModule.locked) {
          var importerIndex = indexOf.call(importerModule.dependencies, module);
          var setter = importerModule.setters[importerIndex];
          if (setter)
            setter(exports);
        }
      }

      module.locked = false;
      return value;
    }, { id: entry.name });

    if (typeof declaration == 'function')
      declaration = { setters: [], execute: declaration };

    // allowing undefined declaration was a mistake! To be deprecated.
    declaration = declaration || { setters: [], execute: function() {} };
    
    module.setters = declaration.setters;
    module.execute = declaration.execute;

    if (!module.setters || !module.execute) {
      throw new TypeError('Invalid System.register form for ' + entry.name);
    }

    // now link all the module dependencies
    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {
      var depName = entry.normalizedDeps[i];
      var depEntry = loader.defined[depName];
      var depModule = moduleRecords[depName];

      // work out how to set depExports based on scenarios...
      var depExports;

      if (depModule) {
        depExports = depModule.exports;
      }
      // dynamic, already linked in our registry
      else if (depEntry && !depEntry.declarative) {
        depExports = depEntry.esModule;
      }
      // in the loader registry
      else if (!depEntry) {
        depExports = loader.get(depName);
      }
      // we have an entry -> link
      else {
        linkDeclarativeModule(depEntry, loader);
        depModule = depEntry.module;
        depExports = depModule.exports;
      }

      // only declarative modules have dynamic bindings
      if (depModule && depModule.importers) {
        depModule.importers.push(module);
        module.dependencies.push(depModule);
      }
      else {
        module.dependencies.push(null);
      }
      
      // run setters for all entries with the matching dependency name
      var originalIndices = entry.originalIndices[i];
      for (var j = 0, len = originalIndices.length; j < len; ++j) {
        var index = originalIndices[j];
        if (module.setters[index]) {
          module.setters[index](depExports);
        }
      }
    }
  }

  // An analog to loader.get covering execution of all three layers (real declarative, simulated declarative, simulated dynamic)
  function getModule(name, loader) {
    var exports;
    var entry = loader.defined[name];

    if (!entry) {
      exports = loader.get(name);
      if (!exports)
        throw new Error('Unable to load dependency ' + name + '.');
    }

    else {
      if (entry.declarative)
        ensureEvaluated(name, entry, [], loader);
    
      else if (!entry.evaluated)
        linkDynamicModule(entry, loader);

      exports = entry.module.exports;
    }

    if ((!entry || entry.declarative) && exports && exports.__useDefault)
      return exports['default'];
    
    return exports;
  }

  function linkDynamicModule(entry, loader) {
    if (entry.module)
      return;

    var exports = {};

    var module = entry.module = { exports: exports, id: entry.name };

    // AMD requires execute the tree first
    if (!entry.executingRequire) {
      for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {
        var depName = entry.normalizedDeps[i];
        // we know we only need to link dynamic due to linking algorithm
        var depEntry = loader.defined[depName];
        if (depEntry)
          linkDynamicModule(depEntry, loader);
      }
    }

    // now execute
    entry.evaluated = true;
    var output = entry.execute.call(__global, function(name) {
      for (var i = 0, l = entry.deps.length; i < l; i++) {
        if (entry.deps[i] != name)
          continue;
        return getModule(entry.normalizedDeps[i], loader);
      }
      // try and normalize the dependency to see if we have another form
      var nameNormalized = loader.normalizeSync(name, entry.name);
      if (indexOf.call(entry.normalizedDeps, nameNormalized) != -1)
        return getModule(nameNormalized, loader);

      throw new Error('Module ' + name + ' not declared as a dependency of ' + entry.name);
    }, exports, module);
    
    if (output !== undefined)
      module.exports = output;

    // create the esModule object, which allows ES6 named imports of dynamics
    exports = module.exports;

    // __esModule flag treats as already-named
    if (exports && (exports.__esModule || exports instanceof Module))
      entry.esModule = loader.newModule(exports);
    // set module as 'default' export, then fake named exports by iterating properties
    else if (entry.esmExports && exports !== __global)
      entry.esModule = loader.newModule(getESModule(exports));
    // just use the 'default' export
    else
      entry.esModule = loader.newModule({ 'default': exports, __useDefault: true });
  }

  /*
   * Given a module, and the list of modules for this current branch,
   *  ensure that each of the dependencies of this module is evaluated
   *  (unless one is a circular dependency already in the list of seen
   *  modules, in which case we execute it)
   *
   * Then we evaluate the module itself depth-first left to right 
   * execution to match ES6 modules
   */
  function ensureEvaluated(moduleName, entry, seen, loader) {
    // if already seen, that means it's an already-evaluated non circular dependency
    if (!entry || entry.evaluated || !entry.declarative)
      return;

    // this only applies to declarative modules which late-execute

    seen.push(moduleName);

    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {
      var depName = entry.normalizedDeps[i];
      if (indexOf.call(seen, depName) == -1) {
        if (!loader.defined[depName])
          loader.get(depName);
        else
          ensureEvaluated(depName, loader.defined[depName], seen, loader);
      }
    }

    if (entry.evaluated)
      return;

    entry.evaluated = true;
    entry.module.execute.call(__global);
  }

  // override the delete method to also clear the register caches
  hook('delete', function(del) {
    return function(name) {
      delete this._loader.moduleRecords[name];
      delete this.defined[name];
      return del.call(this, name);
    };
  });

  hook('fetch', function(fetch) {
    return function(load) {
      if (this.defined[load.name]) {
        load.metadata.format = 'defined';
        return '';
      }

      load.metadata.deps = load.metadata.deps || [];
      
      return fetch.call(this, load);
    };
  });

  hook('translate', function(translate) {
    // we run the meta detection here (register is after meta)
    return function(load) {
      load.metadata.deps = load.metadata.deps || [];
      return Promise.resolve(translate.apply(this, arguments)).then(function(source) {
        // run detection for register format
        if (load.metadata.format == 'register' || !load.metadata.format && detectRegisterFormat(load.source))
          load.metadata.format = 'register';
        return source;
      });
    };
  });

  // implement a perforance shortpath for System.load with no deps
  hook('load', function(doLoad) {
    return function(normalized) {
      var loader = this;
      var entry = loader.defined[normalized];

      if (!entry || entry.deps.length)
        return doLoad.apply(this, arguments);

      entry.originalIndices = entry.normalizedDeps = [];

      // recursively ensure that the module and all its 
      // dependencies are linked (with dependency group handling)
      link(normalized, entry, loader);

      // now handle dependency execution in correct order
      ensureEvaluated(normalized, entry, [], loader);
      if (!entry.esModule)
        entry.esModule = loader.newModule(entry.module.exports);

      // remove from the registry
      if (!loader.trace)
        loader.defined[normalized] = undefined;

      // return the defined module object
      loader.set(normalized, entry.esModule);

      return Promise.resolve();
    };
  });

  hook('instantiate', function(instantiate) {
    return function(load) {
      if (load.metadata.format == 'detect')
        load.metadata.format = undefined;

      // assumes previous instantiate is sync
      // (core json support)
      instantiate.call(this, load);

      var loader = this;

      var entry;

      // first we check if this module has already been defined in the registry
      if (loader.defined[load.name]) {
        entry = loader.defined[load.name];
        // don't support deps for ES modules
        if (!entry.declarative)
          entry.deps = entry.deps.concat(load.metadata.deps);
        entry.deps = entry.deps.concat(load.metadata.deps);
      }

      // picked up already by an anonymous System.register script injection
      // or via the dynamic formats
      else if (load.metadata.entry) {
        entry = load.metadata.entry;
        entry.deps = entry.deps.concat(load.metadata.deps);
      }

      // Contains System.register calls
      // (dont run bundles in the builder)
      else if (!(loader.builder && load.metadata.bundle) 
          && (load.metadata.format == 'register' || load.metadata.format == 'esm' || load.metadata.format == 'es6')) {
        
        if (typeof __exec != 'undefined')
          __exec.call(loader, load);

        if (!load.metadata.entry && !load.metadata.bundle)
          throw new Error(load.name + ' detected as ' + load.metadata.format + ' but didn\'t execute.');

        entry = load.metadata.entry;

        // support metadata deps for System.register
        if (entry && load.metadata.deps)
          entry.deps = entry.deps.concat(load.metadata.deps);
      }

      // named bundles are just an empty module
      if (!entry) {
        entry = createEntry();
        entry.deps = load.metadata.deps;
        entry.execute = function() {};
      }

      // place this module onto defined for circular references
      loader.defined[load.name] = entry;
      
      var grouped = group(entry.deps);
      
      entry.deps = grouped.names;
      entry.originalIndices = grouped.indices;
      entry.name = load.name;
      entry.esmExports = load.metadata.esmExports !== false;

      // first, normalize all dependencies
      var normalizePromises = [];
      for (var i = 0, l = entry.deps.length; i < l; i++)
        normalizePromises.push(Promise.resolve(loader.normalize(entry.deps[i], load.name)));

      return Promise.all(normalizePromises).then(function(normalizedDeps) {

        entry.normalizedDeps = normalizedDeps;

        return {
          deps: entry.deps,
          execute: function() {
            // recursively ensure that the module and all its 
            // dependencies are linked (with dependency group handling)
            link(load.name, entry, loader);

            // now handle dependency execution in correct order
            ensureEvaluated(load.name, entry, [], loader);

            if (!entry.esModule)
              entry.esModule = loader.newModule(entry.module.exports);

            // remove from the registry
            if (!loader.trace)
              loader.defined[load.name] = undefined;

            // return the defined module object
            return entry.esModule;
          }
        };
      });
    };
  });
})();
/*
 * Extension to detect ES6 and auto-load Traceur or Babel for processing
 */
(function() {
  // good enough ES6 module detection regex - format detections not designed to be accurate, but to handle the 99% use case
  var esmRegEx = /(^\s*|[}\);\n]\s*)(import\s*(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s*from\s*['"]|\{)|export\s+\*\s+from\s+["']|export\s*(\{|default|function|class|var|const|let|async\s+function))/;

  var traceurRuntimeRegEx = /\$traceurRuntime\s*\./;
  var babelHelpersRegEx = /babelHelpers\s*\./;

  hook('translate', function(translate) {
    return function(load) {
      var loader = this;
      var args = arguments;
      return translate.apply(loader, args)
      .then(function(source) {
        // detect & transpile ES6
        if (load.metadata.format == 'esm' || load.metadata.format == 'es6' || !load.metadata.format && source.match(esmRegEx)) {
          if (load.metadata.format == 'es6')
            warn.call(loader, 'Module ' + load.name + ' has metadata setting its format to "es6", which is deprecated.\nThis should be updated to "esm".');

          load.metadata.format = 'esm';

          if (load.metadata.deps) {
            var depInject = '';
            for (var i = 0; i < load.metadata.deps.length; i++)
              depInject += 'import "' + load.metadata.deps[i] + '"; ';
            load.source = depInject + source;
          }

          if (loader.transpiler === false) {
            // we accept translation to esm for builds though to enable eg rollup optimizations
            if (loader.builder)
              return source;
            throw new TypeError('Unable to dynamically transpile ES module as SystemJS.transpiler set to false.');
          }

          // setting _loader.loadedTranspiler = false tells the next block to
          // do checks for setting transpiler metadata
          loader._loader.loadedTranspiler = loader._loader.loadedTranspiler || false;
          if (loader.pluginLoader)
            loader.pluginLoader._loader.loadedTranspiler = loader._loader.loadedTranspiler || false;

          // do transpilation
          return (loader._loader.transpilerPromise || (
            loader._loader.transpilerPromise = Promise.resolve(
              __global[loader.transpiler == 'typescript' ? 'ts' : loader.transpiler] || (loader.pluginLoader || loader)['import'](loader.transpiler)
          ))).then(function(transpiler) {
            loader._loader.loadedTranspilerRuntime = true;

            // translate hooks means this is a transpiler plugin instead of a raw implementation
            if (transpiler.translate) {
              // if transpiler is the same as the plugin loader, then don't run twice
              if (transpiler == load.metadata.loaderModule)
                return load.source;

              // convert the source map into an object for transpilation chaining
              if (typeof load.metadata.sourceMap == 'string')
                load.metadata.sourceMap = JSON.parse(load.metadata.sourceMap);

              return Promise.resolve(transpiler.translate.apply(loader, args))
              .then(function(source) {
                // sanitize sourceMap if an object not a JSON string
                var sourceMap = load.metadata.sourceMap;
                if (sourceMap && typeof sourceMap == 'object') {
                  var originalName = load.address.split('!')[0];
                  
                  // force set the filename of the original file
                  if (!sourceMap.file || sourceMap.file == load.address)
                    sourceMap.file = originalName + '!transpiled';

                  // force set the sources list if only one source
                  if (!sourceMap.sources || sourceMap.sources.length <= 1 && (!sourceMap.sources[0] || sourceMap.sources[0] == load.address))
                    sourceMap.sources = [originalName];
                }

                if (load.metadata.format == 'esm' && !loader.builder && detectRegisterFormat(source))
                  load.metadata.format = 'register';
                return source;
              });
            }

            // legacy builder support
            if (loader.builder)
              load.metadata.originalSource = load.source;
            
            // defined in es6-module-loader/src/transpile.js
            return transpile.call(loader, load)
            .then(function(source) {
              // clear sourceMap as transpiler embeds it
              load.metadata.sourceMap = undefined;
              return source;
            });            
          }, function(err) {
            throw addToError(err, 'Unable to load transpiler to transpile ' + load.name);
          });
        }

        // skip transpiler and transpiler runtime loading when transpiler is disabled
        if (loader.transpiler === false)
          return source;

        // load the transpiler correctly
        if (loader._loader.loadedTranspiler === false && (loader.transpiler == 'traceur' || loader.transpiler == 'typescript' || loader.transpiler == 'babel')
            && load.name == loader.normalizeSync(loader.transpiler)) {

          // always load transpiler as a global
          if (source.length > 100 && !load.metadata.format) {
            load.metadata.format = 'global';

            if (loader.transpiler === 'traceur')
              load.metadata.exports = 'traceur';
            if (loader.transpiler === 'typescript')
              load.metadata.exports = 'ts';
          }

          loader._loader.loadedTranspiler = true;
        }

        // load the transpiler runtime correctly
        if (loader._loader.loadedTranspilerRuntime === false) {
          if (load.name == loader.normalizeSync('traceur-runtime')
              || load.name == loader.normalizeSync('babel/external-helpers*')) {
            if (source.length > 100)
              load.metadata.format = load.metadata.format || 'global';

            loader._loader.loadedTranspilerRuntime = true;
          }
        }

        // detect transpiler runtime usage to load runtimes
        if ((load.metadata.format == 'register' || load.metadata.bundle) && loader._loader.loadedTranspilerRuntime !== true) {
          if (loader.transpiler == 'traceur' && !__global.$traceurRuntime && load.source.match(traceurRuntimeRegEx)) {
            loader._loader.loadedTranspilerRuntime = loader._loader.loadedTranspilerRuntime || false;
            return loader['import']('traceur-runtime').then(function() {
              return source;
            });
          }
          if (loader.transpiler == 'babel' && !__global.babelHelpers && load.source.match(babelHelpersRegEx)) {
            loader._loader.loadedTranspilerRuntime = loader._loader.loadedTranspilerRuntime || false;
            return loader['import']('babel/external-helpers').then(function() {
              return source;
            });
          }
        }

        return source;
      });
    };
  });

})();
/*
  SystemJS Global Format

  Supports
    metadata.deps
    metadata.globals
    metadata.exports

  Without metadata.exports, detects writes to the global object.
*/
var __globalName = typeof self != 'undefined' ? 'self' : 'global';

hook('fetch', function(fetch) {
  return function(load) {
    if (load.metadata.exports && !load.metadata.format)
      load.metadata.format = 'global';
    return fetch.call(this, load);
  };
});

// ideally we could support script loading for globals, but the issue with that is that
// we can't do it with AMD support side-by-side since AMD support means defining the
// global define, and global support means not definining it, yet we don't have any hook
// into the "pre-execution" phase of a script tag being loaded to handle both cases
hook('instantiate', function(instantiate) {
  return function(load) {
    var loader = this;

    if (!load.metadata.format)
      load.metadata.format = 'global';

    // global is a fallback module format
    if (load.metadata.format == 'global' && !load.metadata.entry) {

      var entry = createEntry();

      load.metadata.entry = entry;

      entry.deps = [];

      for (var g in load.metadata.globals) {
        var gl = load.metadata.globals[g];
        if (gl)
          entry.deps.push(gl);
      }

      entry.execute = function(require, exports, module) {

        var globals;
        if (load.metadata.globals) {
          globals = {};
          for (var g in load.metadata.globals)
            if (load.metadata.globals[g])
              globals[g] = require(load.metadata.globals[g]);
        }
        
        var exportName = load.metadata.exports;

        if (exportName)
          load.source += '\n' + __globalName + '["' + exportName + '"] = ' + exportName + ';';

        var retrieveGlobal = loader.get('@@global-helpers').prepareGlobal(module.id, exportName, globals, !!load.metadata.encapsulateGlobal);
        __exec.call(loader, load);

        return retrieveGlobal();
      }
    }
    return instantiate.call(this, load);
  };
});


function getGlobalValue(exports) {
  if (typeof exports == 'string')
    return readMemberExpression(exports, __global);

  if (!(exports instanceof Array))
    throw new Error('Global exports must be a string or array.');

  var globalValue = {};
  var first = true;
  for (var i = 0; i < exports.length; i++) {
    var val = readMemberExpression(exports[i], __global);
    if (first) {
      globalValue['default'] = val;
      first = false;
    }
    globalValue[exports[i].split('.').pop()] = val;
  }
  return globalValue;
}

hook('reduceRegister_', function(reduceRegister) {
  return function(load, register) {
    if (register || (!load.metadata.exports && !(isWorker && load.metadata.format == 'global')))
      return reduceRegister.call(this, load, register);

    load.metadata.format = 'global';
    var entry = load.metadata.entry = createEntry();
    entry.deps = load.metadata.deps;
    var globalValue = getGlobalValue(load.metadata.exports);
    entry.execute = function() {
      return globalValue;
    };
  };
});

hookConstructor(function(constructor) {
  return function() {
    var loader = this;
    constructor.call(loader);

    var hasOwnProperty = Object.prototype.hasOwnProperty;

    // bare minimum ignores
    var ignoredGlobalProps = ['_g', 'sessionStorage', 'localStorage', 'clipboardData', 'frames', 'frameElement', 'external', 
      'mozAnimationStartTime', 'webkitStorageInfo', 'webkitIndexedDB', 'mozInnerScreenY', 'mozInnerScreenX'];

    var globalSnapshot;

    function forEachGlobal(callback) {
      if (Object.keys)
        Object.keys(__global).forEach(callback);
      else
        for (var g in __global) {
          if (!hasOwnProperty.call(__global, g))
            continue;
          callback(g);
        }
    }

    function forEachGlobalValue(callback) {
      forEachGlobal(function(globalName) {
        if (indexOf.call(ignoredGlobalProps, globalName) != -1)
          return;
        try {
          var value = __global[globalName];
        }
        catch (e) {
          ignoredGlobalProps.push(globalName);
        }
        callback(globalName, value);
      });
    }

    loader.set('@@global-helpers', loader.newModule({
      prepareGlobal: function(moduleName, exports, globals, encapsulate) {
        // disable module detection
        var curDefine = __global.define;
        
        __global.define = undefined;

        // set globals
        var oldGlobals;
        if (globals) {
          oldGlobals = {};
          for (var g in globals) {
            oldGlobals[g] = __global[g];
            __global[g] = globals[g];
          }
        }

        // store a complete copy of the global object in order to detect changes
        if (!exports) {
          globalSnapshot = {};

          forEachGlobalValue(function(name, value) {
            globalSnapshot[name] = value;
          });
        }

        // return function to retrieve global
        return function() {
          var globalValue = exports ? getGlobalValue(exports) : {};

          var singleGlobal;
          var multipleExports = !!exports;

          if (!exports || encapsulate)
            forEachGlobalValue(function(name, value) {
              if (globalSnapshot[name] === value)
                return;
              if (typeof value == 'undefined')
                return;
              
              // allow global encapsulation where globals are removed
              if (encapsulate)
                __global[name] = undefined;

              if (!exports) {
                globalValue[name] = value;

                if (typeof singleGlobal != 'undefined') {
                  if (!multipleExports && singleGlobal !== value)
                    multipleExports = true;
                }
                else {
                  singleGlobal = value;
                }
              }
            });

          globalValue = multipleExports ? globalValue : singleGlobal;

          // revert globals
          if (oldGlobals) {
            for (var g in oldGlobals)
              __global[g] = oldGlobals[g];
          }
          __global.define = curDefine;

          return globalValue;
        };
      }
    }));
  };
});
/*
  SystemJS CommonJS Format
*/
(function() {
  // CJS Module Format
  // require('...') || exports[''] = ... || exports.asd = ... || module.exports = ...
  var cjsExportsRegEx = /(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.])(exports\s*(\[['"]|\.)|module(\.exports|\['exports'\]|\["exports"\])\s*(\[['"]|[=,\.]))/;
  // RegEx adjusted from https://github.com/jbrantly/yabble/blob/master/lib/yabble.js#L339
  var cjsRequireRegEx = /(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF."'])require\s*\(\s*("[^"\\]*(?:\\.[^"\\]*)*"|'[^'\\]*(?:\\.[^'\\]*)*')\s*\)/g;
  var commentRegEx = /(^|[^\\])(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg;

  var stringRegEx = /("[^"\\\n\r]*(\\.[^"\\\n\r]*)*"|'[^'\\\n\r]*(\\.[^'\\\n\r]*)*')/g;

  // used to support leading #!/usr/bin/env in scripts as supported in Node
  var hashBangRegEx = /^\#\!.*/;

  function getCJSDeps(source) {
    cjsRequireRegEx.lastIndex = commentRegEx.lastIndex = stringRegEx.lastIndex = 0;

    var deps = [];

    var match;

    // track string and comment locations for unminified source    
    var stringLocations = [], commentLocations = [];

    function inLocation(locations, match) {
      for (var i = 0; i < locations.length; i++)
        if (locations[i][0] < match.index && locations[i][1] > match.index)
          return true;
      return false;
    }

    if (source.length / source.split('\n').length < 200) {
      while (match = stringRegEx.exec(source))
        stringLocations.push([match.index, match.index + match[0].length]);

      // TODO: track template literals here before comments
      
      while (match = commentRegEx.exec(source)) {
        // only track comments not starting in strings
        if (!inLocation(stringLocations, match))
          commentLocations.push([match.index + match[1].length, match.index + match[0].length - 1]);
      }
    }

    while (match = cjsRequireRegEx.exec(source)) {
      // ensure we're not within a string or comment location
      if (!inLocation(stringLocations, match) && !inLocation(commentLocations, match)) {
        var dep = match[1].substr(1, match[1].length - 2);
        // skip cases like require('" + file + "')
        if (dep.match(/"|'/))
          continue;
        // trailing slash requires are removed as they don't map mains in SystemJS
        if (dep[dep.length - 1] == '/')
          dep = dep.substr(0, dep.length - 1);
        deps.push(dep);
      }
    }

    return deps;
  }

  hook('instantiate', function(instantiate) {
    return function(load) {
      var loader = this;
      if (!load.metadata.format) {
        cjsExportsRegEx.lastIndex = 0;
        cjsRequireRegEx.lastIndex = 0;
        if (cjsRequireRegEx.exec(load.source) || cjsExportsRegEx.exec(load.source))
          load.metadata.format = 'cjs';
      }

      if (load.metadata.format == 'cjs') {
        var metaDeps = load.metadata.deps;
        var deps = load.metadata.cjsRequireDetection === false ? [] : getCJSDeps(load.source);

        for (var g in load.metadata.globals)
          if (load.metadata.globals[g])
            deps.push(load.metadata.globals[g]);

        var entry = createEntry();

        load.metadata.entry = entry;

        entry.deps = deps;
        entry.executingRequire = true;
        entry.execute = function(_require, exports, module) {
          function require(name) {
            if (name[name.length - 1] == '/')
              name = name.substr(0, name.length - 1);
            return _require.apply(this, arguments);
          }
          require.resolve = function(name) {
            return loader.get('@@cjs-helpers').requireResolve(name, module.id);
          };
          // support module.paths ish
          module.paths = [];
          module.require = _require;

          // ensure meta deps execute first
          if (!load.metadata.cjsDeferDepsExecute)
            for (var i = 0; i < metaDeps.length; i++)
              require(metaDeps[i]);

          var pathVars = loader.get('@@cjs-helpers').getPathVars(module.id);
          var __cjsWrapper = {
            exports: exports,
            args: [require, exports, module, pathVars.filename, pathVars.dirname, __global, __global]
          };

          var cjsWrapper = "(function(require, exports, module, __filename, __dirname, global, GLOBAL";

          // add metadata.globals to the wrapper arguments
          if (load.metadata.globals)
            for (var g in load.metadata.globals) {
              __cjsWrapper.args.push(require(load.metadata.globals[g]));
              cjsWrapper += ", " + g;
            }

          // disable AMD detection
          var define = __global.define;
          __global.define = undefined;
          __global.__cjsWrapper = __cjsWrapper;

          load.source = cjsWrapper + ") {" + load.source.replace(hashBangRegEx, '') + "\n}).apply(__cjsWrapper.exports, __cjsWrapper.args);";

          __exec.call(loader, load);

          __global.__cjsWrapper = undefined;
          __global.define = define;
        };
      }

      return instantiate.call(loader, load);
    };
  });
})();
hookConstructor(function(constructor) {
  return function() {
    var loader = this;
    constructor.call(loader);

    if (typeof window != 'undefined' && typeof document != 'undefined' && window.location)
      var windowOrigin = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');

    function stripOrigin(path) {
      if (path.substr(0, 8) == 'file:///')
        return path.substr(7 + !!isWindows);
      
      if (windowOrigin && path.substr(0, windowOrigin.length) == windowOrigin)
        return path.substr(windowOrigin.length);

      return path;
    }

    loader.set('@@cjs-helpers', loader.newModule({
      requireResolve: function(request, parentId) {
        return stripOrigin(loader.normalizeSync(request, parentId));
      },
      getPathVars: function(moduleId) {
        // remove any plugin syntax
        var pluginIndex = moduleId.lastIndexOf('!');
        var filename;
        if (pluginIndex != -1)
          filename = moduleId.substr(0, pluginIndex);
        else
          filename = moduleId;

        var dirname = filename.split('/');
        dirname.pop();
        dirname = dirname.join('/');

        return {
          filename: stripOrigin(filename),
          dirname: stripOrigin(dirname)
        };
      }
    }))
  };
});/*
 * AMD Helper function module
 * Separated into its own file as this is the part needed for full AMD support in SFX builds
 * NB since implementations have now diverged this can be merged back with amd.js
 */

hook('fetch', function(fetch) {
  return function(load) {
    // script load implies define global leak
    if (load.metadata.scriptLoad && isBrowser)
      __global.define = this.amdDefine;
    return fetch.call(this, load);
  };
});
 
hookConstructor(function(constructor) {
  return function() {
    var loader = this;
    constructor.call(this);

    var commentRegEx = /(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg;
    var cjsRequirePre = "(?:^|[^$_a-zA-Z\\xA0-\\uFFFF.])";
    var cjsRequirePost = "\\s*\\(\\s*(\"([^\"]+)\"|'([^']+)')\\s*\\)";
    var fnBracketRegEx = /\(([^\)]*)\)/;
    var wsRegEx = /^\s+|\s+$/g;
    
    var requireRegExs = {};

    function getCJSDeps(source, requireIndex) {

      // remove comments
      source = source.replace(commentRegEx, '');

      // determine the require alias
      var params = source.match(fnBracketRegEx);
      var requireAlias = (params[1].split(',')[requireIndex] || 'require').replace(wsRegEx, '');

      // find or generate the regex for this requireAlias
      var requireRegEx = requireRegExs[requireAlias] || (requireRegExs[requireAlias] = new RegExp(cjsRequirePre + requireAlias + cjsRequirePost, 'g'));

      requireRegEx.lastIndex = 0;

      var deps = [];

      var match;
      while (match = requireRegEx.exec(source))
        deps.push(match[2] || match[3]);

      return deps;
    }

    /*
      AMD-compatible require
      To copy RequireJS, set window.require = window.requirejs = loader.amdRequire
    */
    function require(names, callback, errback, referer) {
      // in amd, first arg can be a config object... we just ignore
      if (typeof names == 'object' && !(names instanceof Array))
        return require.apply(null, Array.prototype.splice.call(arguments, 1, arguments.length - 1));

      // amd require
      if (typeof names == 'string' && typeof callback == 'function')
        names = [names];
      if (names instanceof Array) {
        var dynamicRequires = [];
        for (var i = 0; i < names.length; i++)
          dynamicRequires.push(loader['import'](names[i], referer));
        Promise.all(dynamicRequires).then(function(modules) {
          if (callback)
            callback.apply(null, modules);
        }, errback);
      }

      // commonjs require
      else if (typeof names == 'string') {
        var defaultJSExtension = loader.defaultJSExtensions && names.substr(names.length - 3, 3) != '.js';
        var normalized = loader.decanonicalize(names, referer);
        if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) == '.js')
          normalized = normalized.substr(0, normalized.length - 3);
        var module = loader.get(normalized);
        if (!module)
          throw new Error('Module not already loaded loading "' + names + '" as ' + normalized + (referer ? ' from "' + referer + '".' : '.'));
        return module.__useDefault ? module['default'] : module;
      }

      else
        throw new TypeError('Invalid require');
    }

    function define(name, deps, factory) {
      if (typeof name != 'string') {
        factory = deps;
        deps = name;
        name = null;
      }
      if (!(deps instanceof Array)) {
        factory = deps;
        deps = ['require', 'exports', 'module'].splice(0, factory.length);
      }

      if (typeof factory != 'function')
        factory = (function(factory) {
          return function() { return factory; }
        })(factory);

      // in IE8, a trailing comma becomes a trailing undefined entry
      if (deps[deps.length - 1] === undefined)
        deps.pop();

      // remove system dependencies
      var requireIndex, exportsIndex, moduleIndex;
      
      if ((requireIndex = indexOf.call(deps, 'require')) != -1) {
        
        deps.splice(requireIndex, 1);

        // only trace cjs requires for non-named
        // named defines assume the trace has already been done
        if (!name)
          deps = deps.concat(getCJSDeps(factory.toString(), requireIndex));
      }

      if ((exportsIndex = indexOf.call(deps, 'exports')) != -1)
        deps.splice(exportsIndex, 1);
      
      if ((moduleIndex = indexOf.call(deps, 'module')) != -1)
        deps.splice(moduleIndex, 1);

      function execute(req, exports, module) {
        var depValues = [];
        for (var i = 0; i < deps.length; i++)
          depValues.push(req(deps[i]));

        module.uri = module.id;

        module.config = function() {};

        // add back in system dependencies
        if (moduleIndex != -1)
          depValues.splice(moduleIndex, 0, module);
        
        if (exportsIndex != -1)
          depValues.splice(exportsIndex, 0, exports);
        
        if (requireIndex != -1) {
          function contextualRequire(names, callback, errback) {
            if (typeof names == 'string' && typeof callback != 'function')
              return req(names);
            return require.call(loader, names, callback, errback, module.id);
          }
          contextualRequire.toUrl = function(name) {
            // normalize without defaultJSExtensions
            var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';
            var url = loader.decanonicalize(name, module.id);
            if (defaultJSExtension && url.substr(url.length - 3, 3) == '.js')
              url = url.substr(0, url.length - 3);
            return url;
          };
          depValues.splice(requireIndex, 0, contextualRequire);
        }

        // set global require to AMD require
        var curRequire = __global.require;
        __global.require = require;

        var output = factory.apply(exportsIndex == -1 ? __global : exports, depValues);

        __global.require = curRequire;

        if (typeof output == 'undefined' && module)
          output = module.exports;

        if (typeof output != 'undefined')
          return output;
      }

      var entry = createEntry();
      entry.name = name && (loader.decanonicalize || loader.normalize).call(loader, name);
      entry.deps = deps;
      entry.execute = execute;

      loader.pushRegister_({
        amd: true,
        entry: entry
      });
    }
    define.amd = {};

    // reduction function to attach defines to a load record
    hook('reduceRegister_', function(reduceRegister) {
      return function(load, register) {
        // only handle AMD registers here
        if (!register || !register.amd)
          return reduceRegister.call(this, load, register);

        var curMeta = load && load.metadata;
        var entry = register.entry;

        if (curMeta) {
          if (!curMeta.format || curMeta.format == 'detect')
            curMeta.format = 'amd';
          else if (!entry.name && curMeta.format != 'amd')
            throw new Error('AMD define called while executing ' + curMeta.format + ' module ' + load.name);
        }

        // anonymous define
        if (!entry.name) {
          if (!curMeta)
            throw new TypeError('Unexpected anonymous AMD define.');

          if (curMeta.entry && !curMeta.entry.name)
            throw new Error('Multiple anonymous defines in module ' + load.name);
          
          curMeta.entry = entry;
        }
        // named define
        else {
          // if we don't have any other defines, 
          // then let this be an anonymous define
          // this is just to support single modules of the form:
          // define('jquery')
          // still loading anonymously
          // because it is done widely enough to be useful
          // as soon as there is more than one define, this gets removed though
          if (curMeta) {
            if (!curMeta.entry && !curMeta.bundle)
              curMeta.entry = entry;
            else if (curMeta.entry && curMeta.entry.name && curMeta.entry.name != load.name)
              curMeta.entry = undefined;

            // note this is now a bundle
            curMeta.bundle = true;
          }

          // define the module through the register registry
          if (!(entry.name in this.defined))
            this.defined[entry.name] = entry;
        }
      };
    });

    loader.amdDefine = define;
    loader.amdRequire = require;
  };
});/*
  SystemJS AMD Format
*/
(function() {
  // AMD Module Format Detection RegEx
  // define([.., .., ..], ...)
  // define(varName); || define(function(require, exports) {}); || define({})
  var amdRegEx = /(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.])define\s*\(\s*("[^"]+"\s*,\s*|'[^']+'\s*,\s*)?\s*(\[(\s*(("[^"]+"|'[^']+')\s*,|\/\/.*\r?\n|\/\*(.|\s)*?\*\/))*(\s*("[^"]+"|'[^']+')\s*,?)?(\s*(\/\/.*\r?\n|\/\*(.|\s)*?\*\/))*\s*\]|function\s*|{|[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*\))/;

  hook('instantiate', function(instantiate) {
    return function(load) {
      var loader = this;
      
      if (load.metadata.format == 'amd' || !load.metadata.format && load.source.match(amdRegEx)) {
        load.metadata.format = 'amd';
        
        if (!loader.builder && loader.execute !== false) {
          var curDefine = __global.define;
          __global.define = this.amdDefine;

          try {
            __exec.call(loader, load);
          }
          finally {
            __global.define = curDefine;
          }

          if (!load.metadata.entry && !load.metadata.bundle)
            throw new TypeError('AMD module ' + load.name + ' did not define');
        }
        else {
          load.metadata.execute = function() {
            return load.metadata.builderExecute.apply(this, arguments);
          };
        }
      }

      return instantiate.call(loader, load);
    };
  });

})();
/*
  SystemJS Loader Plugin Support

  Supports plugin loader syntax with "!", or via metadata.loader

  The plugin name is loaded as a module itself, and can override standard loader hooks
  for the plugin resource. See the plugin section of the systemjs readme.
*/

(function() {
  function getParentName(loader, parentName) {
    // if parent is a plugin, normalize against the parent plugin argument only
    if (parentName) {
      var parentPluginIndex;
      if (loader.pluginFirst) {
        if ((parentPluginIndex = parentName.lastIndexOf('!')) != -1)
          return parentName.substr(parentPluginIndex + 1);
      }
      else {
        if ((parentPluginIndex = parentName.indexOf('!')) != -1)
          return parentName.substr(0, parentPluginIndex);
      }

      return parentName;
    }
  }

  function parsePlugin(loader, name) {
    var argumentName;
    var pluginName;

    var pluginIndex = name.lastIndexOf('!');

    if (pluginIndex == -1)
      return;

    if (loader.pluginFirst) {
      argumentName = name.substr(pluginIndex + 1);
      pluginName = name.substr(0, pluginIndex);
    }
    else {
      argumentName = name.substr(0, pluginIndex);
      pluginName = name.substr(pluginIndex + 1) || argumentName.substr(argumentName.lastIndexOf('.') + 1);
    }

    return {
      argument: argumentName,
      plugin: pluginName
    };
  }

  // put name back together after parts have been normalized
  function combinePluginParts(loader, argumentName, pluginName, defaultExtension) {
    if (defaultExtension && argumentName.substr(argumentName.length - 3, 3) == '.js')
      argumentName = argumentName.substr(0, argumentName.length - 3);

    if (loader.pluginFirst) {
      return pluginName + '!' + argumentName;
    }
    else {
      return argumentName + '!' + pluginName;
    }
  }

  // note if normalize will add a default js extension
  // if so, remove for backwards compat
  // this is strange and sucks, but will be deprecated
  function checkDefaultExtension(loader, arg) {
    return loader.defaultJSExtensions && arg.substr(arg.length - 3, 3) != '.js'; 
  }

  function createNormalizeSync(normalizeSync) {
    return function(name, parentName, isPlugin) {
      var loader = this;
      
      var parsed = parsePlugin(loader, name);
      parentName = getParentName(this, parentName);

      if (!parsed)
        return normalizeSync.call(this, name, parentName, isPlugin);

      // if this is a plugin, normalize the plugin name and the argument
      var argumentName = loader.normalizeSync(parsed.argument, parentName, true);
      var pluginName = loader.normalizeSync(parsed.plugin, parentName, true);
      return combinePluginParts(loader, argumentName, pluginName, checkDefaultExtension(loader, parsed.argument));
    };
  }
  
  hook('decanonicalize', createNormalizeSync);
  hook('normalizeSync', createNormalizeSync);

  hook('normalize', function(normalize) {
    return function(name, parentName, isPlugin) {
      var loader = this;

      parentName = getParentName(this, parentName);

      var parsed = parsePlugin(loader, name);

      if (!parsed)
        return normalize.call(loader, name, parentName, isPlugin);

      return Promise.all([
        loader.normalize(parsed.argument, parentName, true),
        loader.normalize(parsed.plugin, parentName, false)
      ])
      .then(function(normalized) {
        return combinePluginParts(loader, normalized[0], normalized[1], checkDefaultExtension(loader, parsed.argument));
      });
    }
  });

  hook('locate', function(locate) {
    return function(load) {
      var loader = this;

      var name = load.name;

      // plugin syntax
      var pluginSyntaxIndex;
      if (loader.pluginFirst) {
        if ((pluginSyntaxIndex = name.indexOf('!')) != -1) {
          load.metadata.loader = name.substr(0, pluginSyntaxIndex);
          load.name = name.substr(pluginSyntaxIndex + 1);
        }
      }
      else {
        if ((pluginSyntaxIndex = name.lastIndexOf('!')) != -1) {
          load.metadata.loader = name.substr(pluginSyntaxIndex + 1);
          load.name = name.substr(0, pluginSyntaxIndex);
        }
      }

      return locate.call(loader, load)
      .then(function(address) {
        if (pluginSyntaxIndex != -1 || !load.metadata.loader)
          return address;

        // normalize plugin relative to parent in locate here when
        // using plugin via loader metadata
        return (loader.pluginLoader || loader).normalize(load.metadata.loader, load.name)
        .then(function(loaderNormalized) {
          load.metadata.loader = loaderNormalized;
          return address;
        });
      })
      .then(function(address) {
        var plugin = load.metadata.loader;

        if (!plugin)
          return address;

        // don't allow a plugin to load itself
        if (load.name == plugin)
          throw new Error('Plugin ' + plugin + ' cannot load itself, make sure it is excluded from any wildcard meta configuration via a custom loader: false rule.');

        // only fetch the plugin itself if this name isn't defined
        if (loader.defined && loader.defined[name])
          return address;

        var pluginLoader = loader.pluginLoader || loader;

        // load the plugin module and run standard locate
        return pluginLoader['import'](plugin)
        .then(function(loaderModule) {
          // store the plugin module itself on the metadata
          load.metadata.loaderModule = loaderModule;

          load.address = address;
          if (loaderModule.locate)
            return loaderModule.locate.call(loader, load);

          return address;
        });
      });
    };
  });

  hook('fetch', function(fetch) {
    return function(load) {
      var loader = this;
      if (load.metadata.loaderModule && load.metadata.loaderModule.fetch && load.metadata.format != 'defined') {
        load.metadata.scriptLoad = false;
        return load.metadata.loaderModule.fetch.call(loader, load, function(load) {
          return fetch.call(loader, load);
        });
      }
      else {
        return fetch.call(loader, load);
      }
    };
  });

  hook('translate', function(translate) {
    return function(load) {
      var loader = this;
      var args = arguments;
      if (load.metadata.loaderModule && load.metadata.loaderModule.translate && load.metadata.format != 'defined') {
        return Promise.resolve(load.metadata.loaderModule.translate.apply(loader, args)).then(function(result) {
          var sourceMap = load.metadata.sourceMap;

          // sanitize sourceMap if an object not a JSON string
          if (sourceMap) {
            if (typeof sourceMap != 'object')
              throw new Error('load.metadata.sourceMap must be set to an object.');

            var originalName = load.address.split('!')[0];
            
            // force set the filename of the original file
            if (!sourceMap.file || sourceMap.file == load.address)
              sourceMap.file = originalName + '!transpiled';

            // force set the sources list if only one source
            if (!sourceMap.sources || sourceMap.sources.length <= 1 && (!sourceMap.sources[0] || sourceMap.sources[0] == load.address))
              sourceMap.sources = [originalName];
          }

          // if running on file:/// URLs, sourcesContent is necessary
          // load.metadata.sourceMap.sourcesContent = [load.source];

          if (typeof result == 'string')
            load.source = result;
          else
            warn.call(this, 'Plugin ' + load.metadata.loader + ' should return the source in translate, instead of setting load.source directly. This support will be deprecated.');

          return translate.apply(loader, args);
        });
      }
      else {
        return translate.apply(loader, args);
      }
    };
  });

  hook('instantiate', function(instantiate) {
    return function(load) {
      var loader = this;
      var calledInstantiate = false;

      if (load.metadata.loaderModule && load.metadata.loaderModule.instantiate && !loader.builder && load.metadata.format != 'defined')
        return Promise.resolve(load.metadata.loaderModule.instantiate.call(loader, load, function(load) {
          if (calledInstantiate)
            throw new Error('Instantiate must only be called once.');
          calledInstantiate = true;
          return instantiate.call(loader, load);
        })).then(function(result) {
          if (calledInstantiate)
            return result;

          load.metadata.entry = createEntry();
          load.metadata.entry.execute = function() {
            return result;
          }
          load.metadata.entry.deps = load.metadata.deps;
          load.metadata.format = 'defined';
          return instantiate.call(loader, load);
        });
      else
        return instantiate.call(loader, load);
    };
  });

})();/*
 * Conditions Extension
 *
 *   Allows a condition module to alter the resolution of an import via syntax:
 *
 *     import $ from 'jquery/#{browser}';
 *
 *   Will first load the module 'browser' via `SystemJS.import('browser')` and 
 *   take the default export of that module.
 *   If the default export is not a string, an error is thrown.
 * 
 *   We then substitute the string into the require to get the conditional resolution
 *   enabling environment-specific variations like:
 * 
 *     import $ from 'jquery/ie'
 *     import $ from 'jquery/firefox'
 *     import $ from 'jquery/chrome'
 *     import $ from 'jquery/safari'
 *
 *   It can be useful for a condition module to define multiple conditions.
 *   This can be done via the `|` modifier to specify an export member expression:
 *
 *     import 'jquery/#{./browser.js|grade.version}'
 *
 *   Where the `grade` export `version` member in the `browser.js` module  is substituted.
 *
 *
 * Boolean Conditionals
 *
 *   For polyfill modules, that are used as imports but have no module value,
 *   a binary conditional allows a module not to be loaded at all if not needed:
 *
 *     import 'es5-shim#?./conditions.js|needs-es5shim'
 *
 *   These conditions can also be negated via:
 *     
 *     import 'es5-shim#?./conditions.js|~es6'
 *
 */

  var sysConditions = ['browser', 'node', 'dev', 'build', 'production', 'default'];

  function parseCondition(condition) {
    var conditionExport, conditionModule, negation;

    var negation = condition[0] == '~';
    var conditionExportIndex = condition.lastIndexOf('|');
    if (conditionExportIndex != -1) {
      conditionExport = condition.substr(conditionExportIndex + 1);
      conditionModule = condition.substr(negation, conditionExportIndex - negation);
      
      if (negation)
        warn.call(this, 'Condition negation form "' + condition + '" is deprecated for "' + conditionModule + '|~' + conditionExport + '"');

      if (conditionExport[0] == '~') {
        negation = true;
        conditionExport = conditionExport.substr(1);
      }
    }
    else {
      conditionExport = 'default';
      conditionModule = condition.substr(negation);
      if (sysConditions.indexOf(conditionModule) != -1) {
        conditionExport = conditionModule;
        conditionModule = null;
      }
    }

    return {
      module: conditionModule || '@system-env',
      prop: conditionExport,
      negate: negation
    };
  }

  function serializeCondition(conditionObj) {
    return conditionObj.module + '|' + (conditionObj.negate ? '~' : '') + conditionObj.prop;
  }

  function resolveCondition(conditionObj, parentName, bool) {
    var self = this;
    return this.normalize(conditionObj.module, parentName)
    .then(function(normalizedCondition) {
      return self.load(normalizedCondition)
      .then(function(q) {
        var m = readMemberExpression(conditionObj.prop, self.get(normalizedCondition));

        if (bool && typeof m != 'boolean')
          throw new TypeError('Condition ' + serializeCondition(conditionObj) + ' did not resolve to a boolean.');

        return conditionObj.negate ? !m : m;
      });
    });
  }

  var interpolationRegEx = /#\{[^\}]+\}/;
  function interpolateConditional(name, parentName) {
    // first we normalize the conditional
    var conditionalMatch = name.match(interpolationRegEx);

    if (!conditionalMatch)
      return Promise.resolve(name);

    var conditionObj = parseCondition.call(this, conditionalMatch[0].substr(2, conditionalMatch[0].length - 3));

    // in builds, return normalized conditional
    if (this.builder)
      return this['normalize'](conditionObj.module, parentName)
      .then(function(conditionModule) {
        conditionObj.module = conditionModule;
        return name.replace(interpolationRegEx, '#{' + serializeCondition(conditionObj) + '}');
      });

    return resolveCondition.call(this, conditionObj, parentName, false)
    .then(function(conditionValue) {
      if (typeof conditionValue !== 'string')
        throw new TypeError('The condition value for ' + name + ' doesn\'t resolve to a string.');

      if (conditionValue.indexOf('/') != -1)
        throw new TypeError('Unabled to interpolate conditional ' + name + (parentName ? ' in ' + parentName : '') + '\n\tThe condition value ' + conditionValue + ' cannot contain a "/" separator.');

      return name.replace(interpolationRegEx, conditionValue);
    });
  }

  function booleanConditional(name, parentName) {
    // first we normalize the conditional
    var booleanIndex = name.lastIndexOf('#?');

    if (booleanIndex == -1)
      return Promise.resolve(name);

    var conditionObj = parseCondition.call(this, name.substr(booleanIndex + 2));

    // in builds, return normalized conditional
    if (this.builder)
      return this['normalize'](conditionObj.module, parentName)
      .then(function(conditionModule) {
        conditionObj.module = conditionModule;
        return name.substr(0, booleanIndex) + '#?' + serializeCondition(conditionObj);
      });

    return resolveCondition.call(this, conditionObj, parentName, true)
    .then(function(conditionValue) {
      return conditionValue ? name.substr(0, booleanIndex) : '@empty';
    });
  }

  // normalizeSync does not parse conditionals at all although it could
  hook('normalize', function(normalize) {
    return function(name, parentName, skipExt) {
      var loader = this;
      return booleanConditional.call(loader, name, parentName)
      .then(function(name) {
        return normalize.call(loader, name, parentName, skipExt);
      })
      .then(function(normalized) {
        return interpolateConditional.call(loader, normalized, parentName);
      });
    };
  });
/*
 * Alias Extension
 *
 * Allows a module to be a plain copy of another module by module name
 *
 * SystemJS.meta['mybootstrapalias'] = { alias: 'bootstrap' };
 *
 */
(function() {
  // aliases
  hook('fetch', function(fetch) {
    return function(load) {
      var alias = load.metadata.alias;
      var aliasDeps = load.metadata.deps || [];
      if (alias) {
        load.metadata.format = 'defined';
        var entry = createEntry();
        this.defined[load.name] = entry;
        entry.declarative = true;
        entry.deps = aliasDeps.concat([alias]);
        entry.declare = function(_export) {
          return {
            setters: [function(module) {
              for (var p in module)
                _export(p, module[p]);
              if (module.__useDefault)
                entry.module.exports.__useDefault = true;
            }],
            execute: function() {}
          };
        };
        return '';
      }

      return fetch.call(this, load);
    };
  });
})();/*
 * Meta Extension
 *
 * Sets default metadata on a load record (load.metadata) from
 * loader.metadata via SystemJS.meta function.
 *
 *
 * Also provides an inline meta syntax for module meta in source.
 *
 * Eg:
 *
 * loader.meta({
 *   'my/module': { deps: ['jquery'] }
 *   'my/*': { format: 'amd' }
 * });
 *
 * Which in turn populates loader.metadata.
 *
 * load.metadata.deps and load.metadata.format will then be set
 * for 'my/module'
 *
 * The same meta could be set with a my/module.js file containing:
 *
 * my/module.js
 *   "format amd";
 *   "deps[] jquery";
 *   "globals.some value"
 *   console.log('this is my/module');
 *
 * Configuration meta always takes preference to inline meta.
 *
 * Multiple matches in wildcards are supported and ammend the meta.
 *
 *
 * The benefits of the function form is that paths are URL-normalized
 * supporting say
 *
 * loader.meta({ './app': { format: 'cjs' } });
 *
 * Instead of needing to set against the absolute URL (https://site.com/app.js)
 *
 */

(function() {

  hookConstructor(function(constructor) {
    return function() {
      this.meta = {};
      constructor.call(this);
    };
  });

  hook('locate', function(locate) {
    return function(load) {
      var meta = this.meta;
      var name = load.name;

      // NB for perf, maybe introduce a fast-path wildcard lookup cache here
      // which is checked first

      // apply wildcard metas
      var bestDepth = 0;
      var wildcardIndex;
      for (var module in meta) {
        wildcardIndex = module.indexOf('*');
        if (wildcardIndex === -1)
          continue;
        if (module.substr(0, wildcardIndex) === name.substr(0, wildcardIndex)
            && module.substr(wildcardIndex + 1) === name.substr(name.length - module.length + wildcardIndex + 1)) {
          var depth = module.split('/').length;
          if (depth > bestDepth)
            bestDepth = depth;
          extendMeta(load.metadata, meta[module], bestDepth != depth);
        }
      }

      // apply exact meta
      if (meta[name])
        extendMeta(load.metadata, meta[name]);

      return locate.call(this, load);
    };
  });

  // detect any meta header syntax
  // only set if not already set
  var metaRegEx = /^(\s*\/\*[^\*]*(\*(?!\/)[^\*]*)*\*\/|\s*\/\/[^\n]*|\s*"[^"]+"\s*;?|\s*'[^']+'\s*;?)+/;
  var metaPartRegEx = /\/\*[^\*]*(\*(?!\/)[^\*]*)*\*\/|\/\/[^\n]*|"[^"]+"\s*;?|'[^']+'\s*;?/g;

  function setMetaProperty(target, p, value) {
    var pParts = p.split('.');
    var curPart;
    while (pParts.length > 1) {
      curPart = pParts.shift();
      target = target[curPart] = target[curPart] || {};
    }
    curPart = pParts.shift();
    if (!(curPart in target))
      target[curPart] = value;
  }

  hook('translate', function(translate) {
    return function(load) {
      // shortpath for bundled
      if (load.metadata.format == 'defined') {
        load.metadata.deps = load.metadata.deps || [];
        return Promise.resolve(load.source);
      }

      // NB meta will be post-translate pending transpiler conversion to plugins
      var meta = load.source.match(metaRegEx);
      if (meta) {
        var metaParts = meta[0].match(metaPartRegEx);

        for (var i = 0; i < metaParts.length; i++) {
          var curPart = metaParts[i];
          var len = curPart.length;

          var firstChar = curPart.substr(0, 1);
          if (curPart.substr(len - 1, 1) == ';')
            len--;

          if (firstChar != '"' && firstChar != "'")
            continue;

          var metaString = curPart.substr(1, curPart.length - 3);
          var metaName = metaString.substr(0, metaString.indexOf(' '));

          if (metaName) {
            var metaValue = metaString.substr(metaName.length + 1, metaString.length - metaName.length - 1);

            if (metaName.substr(metaName.length - 2, 2) == '[]') {
              metaName = metaName.substr(0, metaName.length - 2);
              load.metadata[metaName] = load.metadata[metaName] || [];
              load.metadata[metaName].push(metaValue);
            }
            else if (load.metadata[metaName] instanceof Array) {
              // temporary backwards compat for previous "deps" syntax
              warn.call(this, 'Module ' + load.name + ' contains deprecated "deps ' + metaValue + '" meta syntax.\nThis should be updated to "deps[] ' + metaValue + '" for pushing to array meta.');
              load.metadata[metaName].push(metaValue);
            }
            else {
              setMetaProperty(load.metadata, metaName, metaValue);
            }
          }
          else {
            load.metadata[metaString] = true;
          }
        }
      }

      return translate.apply(this, arguments);
    };
  });
})();
/*
  System bundles

  Allows a bundle module to be specified which will be dynamically 
  loaded before trying to load a given module.

  For example:
  SystemJS.bundles['mybundle'] = ['jquery', 'bootstrap/js/bootstrap']

  Will result in a load to "mybundle" whenever a load to "jquery"
  or "bootstrap/js/bootstrap" is made.

  In this way, the bundle becomes the request that provides the module
*/

(function() {
  // bundles support (just like RequireJS)
  // bundle name is module name of bundle itself
  // bundle is array of modules defined by the bundle
  // when a module in the bundle is requested, the bundle is loaded instead
  // of the form SystemJS.bundles['mybundle'] = ['jquery', 'bootstrap/js/bootstrap']
  hookConstructor(function(constructor) {
    return function() {
      constructor.call(this);
      this.bundles = {};
      this._loader.loadedBundles = {};
    };
  });

  // assign bundle metadata for bundle loads
  hook('locate', function(locate) {
    return function(load) {
      var loader = this;
      var matched = false;

      if (!(load.name in loader.defined))
        for (var b in loader.bundles) {
          for (var i = 0; i < loader.bundles[b].length; i++) {
            var curModule = loader.bundles[b][i];

            if (curModule == load.name) {
              matched = true;
              break;
            }

            // wildcard in bundles does not include / boundaries
            if (curModule.indexOf('*') != -1) {
              var parts = curModule.split('*');
              if (parts.length != 2) {
                loader.bundles[b].splice(i--, 1);
                continue;
              }
              
              if (load.name.substring(0, parts[0].length) == parts[0] &&
                  load.name.substr(load.name.length - parts[1].length, parts[1].length) == parts[1] &&
                  load.name.substr(parts[0].length, load.name.length - parts[1].length - parts[0].length).indexOf('/') == -1) {
                matched = true;
                break;
              }
            }
          }

          if (matched)
            return loader['import'](b)
            .then(function() {
              return locate.call(loader, load);
            });
        }

      return locate.call(loader, load);
    };
  });
})();
/*
 * Dependency Tree Cache
 * 
 * Allows a build to pre-populate a dependency trace tree on the loader of 
 * the expected dependency tree, to be loaded upfront when requesting the
 * module, avoinding the n round trips latency of module loading, where 
 * n is the dependency tree depth.
 *
 * eg:
 * SystemJS.depCache = {
 *  'app': ['normalized', 'deps'],
 *  'normalized': ['another'],
 *  'deps': ['tree']
 * };
 * 
 * SystemJS.import('app') 
 * // simultaneously starts loading all of:
 * // 'normalized', 'deps', 'another', 'tree'
 * // before "app" source is even loaded
 *
 */

(function() {
  hookConstructor(function(constructor) {
    return function() {
      constructor.call(this);
      this.depCache = {};
    }
  });

  hook('locate', function(locate) {
    return function(load) {
      var loader = this;
      // load direct deps, in turn will pick up their trace trees
      var deps = loader.depCache[load.name];
      if (deps)
        for (var i = 0; i < deps.length; i++)
          loader['import'](deps[i], load.name);

      return locate.call(loader, load);
    };
  });
})();
  
System = new SystemJSLoader();

__global.SystemJS = System;
System.version = '0.19.39 Standard';
  if (typeof module == 'object' && module.exports && typeof exports == 'object')
    module.exports = System;

  __global.System = System;

})(typeof self != 'undefined' ? self : global);}

// auto-load Promise polyfill if needed in the browser
var doPolyfill = typeof Promise === 'undefined';

// document.write
if (typeof document !== 'undefined') {
  var scripts = document.getElementsByTagName('script');
  $__curScript = scripts[scripts.length - 1];
  if (document.currentScript && ($__curScript.defer || $__curScript.async))
    $__curScript = document.currentScript;
  if (doPolyfill) {
    var curPath = $__curScript.src;
    var basePath = curPath.substr(0, curPath.lastIndexOf('/') + 1);
    window.systemJSBootstrap = bootstrap;
    document.write(
      '<' + 'script type="text/javascript" src="' + basePath + 'system-polyfills.js">' + '<' + '/script>'
    );
  }
  else {
    bootstrap();
  }
}
// importScripts
else if (typeof importScripts !== 'undefined') {
  var basePath = '';
  try {
    throw new Error('_');
  } catch (e) {
    e.stack.replace(/(?:at|@).*(http.+):[\d]+:[\d]+/, function(m, url) {
      $__curScript = { src: url };
      basePath = url.replace(/\/[^\/]*$/, '/');
    });
  }
  if (doPolyfill)
    importScripts(basePath + 'system-polyfills.js');
  bootstrap();
}
else {
  $__curScript = typeof __filename != 'undefined' ? { src: __filename } : null;
  bootstrap();
}


})();
/**
  @license
  Apache License 2.0 https://github.com/ReactiveX/RxJS/blob/master/LICENSE.txt
 **/
(function(z){"object"===typeof exports&&"undefined"!==typeof module?module.exports=z():"function"===typeof define&&define.amd?define([],z):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Rx=z()})(function(){return function a(b,f,h){function l(e,c){if(!f[e]){if(!b[e]){var d="function"==typeof require&&require;if(!c&&d)return d(e,!0);if(k)return k(e,!0);d=Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d;}d=f[e]={exports:{}};
b[e][0].call(d.exports,function(a){var d=b[e][1][a];return l(d?d:a)},d,d.exports,a,b,f,h)}return f[e].exports}for(var k="function"==typeof require&&require,g=0;g<h.length;g++)l(h[g]);return l}({1:[function(a,b,f){var h=this&&this.__extends||function(a,g){function e(){this.constructor=a}for(var c in g)g.hasOwnProperty(c)&&(a[c]=g[c]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)};b=a("./Subject");var l=a("./Subscription");a=function(a){function g(){a.apply(this,arguments);this.value=
null;this.hasCompleted=this.hasNext=!1}h(g,a);g.prototype._subscribe=function(e){return this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),l.Subscription.EMPTY):this.hasError?(e.error(this.thrownError),l.Subscription.EMPTY):a.prototype._subscribe.call(this,e)};g.prototype.next=function(a){this.hasCompleted||(this.value=a,this.hasNext=!0)};g.prototype.complete=function(){this.hasCompleted=!0;this.hasNext&&a.prototype.next.call(this,this.value);a.prototype.complete.call(this)};return g}(b.Subject);
f.AsyncSubject=a},{"./Subject":11,"./Subscription":14}],2:[function(a,b,f){var h=this&&this.__extends||function(a,g){function e(){this.constructor=a}for(var c in g)g.hasOwnProperty(c)&&(a[c]=g[c]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)};b=a("./Subject");var l=a("./util/ObjectUnsubscribedError");a=function(a){function g(e){a.call(this);this._value=e}h(g,a);Object.defineProperty(g.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0});
g.prototype._subscribe=function(e){var c=a.prototype._subscribe.call(this,e);c&&!c.closed&&e.next(this._value);return c};g.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new l.ObjectUnsubscribedError;return this._value};g.prototype.next=function(e){a.prototype.next.call(this,this._value=e)};return g}(b.Subject);f.BehaviorSubject=a},{"./Subject":11,"./util/ObjectUnsubscribedError":326}],3:[function(a,b,f){var h=this&&this.__extends||function(a,b){function g(){this.constructor=
a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)};a=function(a){function b(g,e,c){a.call(this);this.parent=g;this.outerValue=e;this.outerIndex=c;this.index=0}h(b,a);b.prototype._next=function(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)};b.prototype._error=function(a){this.parent.notifyError(a,this);this.unsubscribe()};b.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe()};
return b}(a("./Subscriber").Subscriber);f.InnerSubscriber=a},{"./Subscriber":13}],4:[function(a,b,f){var h=a("./Observable");a=function(){function a(b,g,e){this.kind=b;this.value=g;this.exception=e;this.hasValue="N"===b}a.prototype.observe=function(a){switch(this.kind){case "N":return a.next&&a.next(this.value);case "E":return a.error&&a.error(this.exception);case "C":return a.complete&&a.complete()}};a.prototype["do"]=function(a,g,e){switch(this.kind){case "N":return a&&a(this.value);case "E":return g&&
g(this.exception);case "C":return e&&e()}};a.prototype.accept=function(a,g,e){return a&&"function"===typeof a.next?this.observe(a):this["do"](a,g,e)};a.prototype.toObservable=function(){switch(this.kind){case "N":return h.Observable.of(this.value);case "E":return h.Observable["throw"](this.exception);case "C":return h.Observable.empty()}throw Error("unexpected notification kind value");};a.createNext=function(b){return"undefined"!==typeof b?new a("N",b):this.undefinedValueNotification};a.createError=
function(b){return new a("E",void 0,b)};a.createComplete=function(){return this.completeNotification};a.completeNotification=new a("C");a.undefinedValueNotification=new a("N",void 0);return a}();f.Notification=a},{"./Observable":5}],5:[function(a,b,f){var h=a("./util/root"),l=a("./util/toSubscriber"),k=a("./symbol/observable");a=function(){function a(e){this._isScalar=!1;e&&(this._subscribe=e)}a.prototype.lift=function(e){var c=new a;c.source=this;c.operator=e;return c};a.prototype.subscribe=function(a,
c,d){var m=this.operator;a=l.toSubscriber(a,c,d);m?m.call(a,this):a.add(this._subscribe(a));if(a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a};a.prototype.forEach=function(a,c){var d=this;c||(h.root.Rx&&h.root.Rx.config&&h.root.Rx.config.Promise?c=h.root.Rx.config.Promise:h.root.Promise&&(c=h.root.Promise));if(!c)throw Error("no Promise impl found");return new c(function(c,n){var g=d.subscribe(function(d){if(g)try{a(d)}catch(c){n(c),g.unsubscribe()}else a(d)},
n,c)})};a.prototype._subscribe=function(a){return this.source.subscribe(a)};a.prototype[k.$$observable]=function(){return this};a.create=function(e){return new a(e)};return a}();f.Observable=a},{"./symbol/observable":312,"./util/root":340,"./util/toSubscriber":342}],6:[function(a,b,f){f.empty={closed:!0,next:function(a){},error:function(a){throw a;},complete:function(){}}},{}],7:[function(a,b,f){var h=this&&this.__extends||function(a,b){function g(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&
(a[e]=b[e]);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)};a=function(a){function b(){a.apply(this,arguments)}h(b,a);b.prototype.notifyNext=function(a,e,c,d,m){this.destination.next(e)};b.prototype.notifyError=function(a,e){this.destination.error(a)};b.prototype.notifyComplete=function(a){this.destination.complete()};return b}(a("./Subscriber").Subscriber);f.OuterSubscriber=a},{"./Subscriber":13}],8:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=
a}for(var m in c)c.hasOwnProperty(m)&&(a[m]=c[m]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("./Subject");var l=a("./scheduler/queue"),k=a("./operator/observeOn");a=function(a){function c(d,c,n){void 0===d&&(d=Number.POSITIVE_INFINITY);void 0===c&&(c=Number.POSITIVE_INFINITY);a.call(this);this.scheduler=n;this._events=[];this._bufferSize=1>d?1:d;this._windowTime=1>c?1:c}h(c,a);c.prototype.next=function(d){var c=this._getNow();this._events.push(new g(c,d));this._trimBufferThenGetEvents();
a.prototype.next.call(this,d)};c.prototype._subscribe=function(d){var c=this._trimBufferThenGetEvents(),n=this.scheduler;n&&d.add(d=new k.ObserveOnSubscriber(d,n));for(var n=c.length,g=0;g<n&&!d.closed;g++)d.next(c[g].value);return a.prototype._subscribe.call(this,d)};c.prototype._getNow=function(){return(this.scheduler||l.queue).now()};c.prototype._trimBufferThenGetEvents=function(){for(var a=this._getNow(),c=this._bufferSize,e=this._windowTime,g=this._events,b=g.length,f=0;f<b&&!(a-g[f].time<e);)f++;
b>c&&(f=Math.max(f,b-c));0<f&&g.splice(0,f);return g};return c}(b.Subject);f.ReplaySubject=a;var g=function(){return function(a,c){this.time=a;this.value=c}}()},{"./Subject":11,"./operator/observeOn":248,"./scheduler/queue":310}],9:[function(a,b,f){b=a("./Subject");f.Subject=b.Subject;b=a("./Observable");f.Observable=b.Observable;a("./add/observable/bindCallback");a("./add/observable/bindNodeCallback");a("./add/observable/combineLatest");a("./add/observable/concat");a("./add/observable/defer");a("./add/observable/empty");
a("./add/observable/forkJoin");a("./add/observable/from");a("./add/observable/fromEvent");a("./add/observable/fromEventPattern");a("./add/observable/fromPromise");a("./add/observable/generate");a("./add/observable/if");a("./add/observable/interval");a("./add/observable/merge");a("./add/observable/race");a("./add/observable/never");a("./add/observable/of");a("./add/observable/onErrorResumeNext");a("./add/observable/pairs");a("./add/observable/range");a("./add/observable/using");a("./add/observable/throw");
a("./add/observable/timer");a("./add/observable/zip");a("./add/observable/dom/ajax");a("./add/observable/dom/webSocket");a("./add/operator/buffer");a("./add/operator/bufferCount");a("./add/operator/bufferTime");a("./add/operator/bufferToggle");a("./add/operator/bufferWhen");a("./add/operator/cache");a("./add/operator/catch");a("./add/operator/combineAll");a("./add/operator/combineLatest");a("./add/operator/concat");a("./add/operator/concatAll");a("./add/operator/concatMap");a("./add/operator/concatMapTo");
a("./add/operator/count");a("./add/operator/dematerialize");a("./add/operator/debounce");a("./add/operator/debounceTime");a("./add/operator/defaultIfEmpty");a("./add/operator/delay");a("./add/operator/delayWhen");a("./add/operator/distinct");a("./add/operator/distinctKey");a("./add/operator/distinctUntilChanged");a("./add/operator/distinctUntilKeyChanged");a("./add/operator/do");a("./add/operator/exhaust");a("./add/operator/exhaustMap");a("./add/operator/expand");a("./add/operator/elementAt");a("./add/operator/filter");
a("./add/operator/finally");a("./add/operator/find");a("./add/operator/findIndex");a("./add/operator/first");a("./add/operator/groupBy");a("./add/operator/ignoreElements");a("./add/operator/isEmpty");a("./add/operator/audit");a("./add/operator/auditTime");a("./add/operator/last");a("./add/operator/let");a("./add/operator/every");a("./add/operator/map");a("./add/operator/mapTo");a("./add/operator/materialize");a("./add/operator/max");a("./add/operator/merge");a("./add/operator/mergeAll");a("./add/operator/mergeMap");
a("./add/operator/mergeMapTo");a("./add/operator/mergeScan");a("./add/operator/min");a("./add/operator/multicast");a("./add/operator/observeOn");a("./add/operator/onErrorResumeNext");a("./add/operator/pairwise");a("./add/operator/partition");a("./add/operator/pluck");a("./add/operator/publish");a("./add/operator/publishBehavior");a("./add/operator/publishReplay");a("./add/operator/publishLast");a("./add/operator/race");a("./add/operator/reduce");a("./add/operator/repeat");a("./add/operator/repeatWhen");
a("./add/operator/retry");a("./add/operator/retryWhen");a("./add/operator/sample");a("./add/operator/sampleTime");a("./add/operator/scan");a("./add/operator/sequenceEqual");a("./add/operator/share");a("./add/operator/single");a("./add/operator/skip");a("./add/operator/skipUntil");a("./add/operator/skipWhile");a("./add/operator/startWith");a("./add/operator/subscribeOn");a("./add/operator/switch");a("./add/operator/switchMap");a("./add/operator/switchMapTo");a("./add/operator/take");a("./add/operator/takeLast");
a("./add/operator/takeUntil");a("./add/operator/takeWhile");a("./add/operator/throttle");a("./add/operator/throttleTime");a("./add/operator/timeInterval");a("./add/operator/timeout");a("./add/operator/timeoutWith");a("./add/operator/timestamp");a("./add/operator/toArray");a("./add/operator/toPromise");a("./add/operator/window");a("./add/operator/windowCount");a("./add/operator/windowTime");a("./add/operator/windowToggle");a("./add/operator/windowWhen");a("./add/operator/withLatestFrom");a("./add/operator/zip");
a("./add/operator/zipAll");b=a("./Subscription");f.Subscription=b.Subscription;b=a("./Subscriber");f.Subscriber=b.Subscriber;b=a("./AsyncSubject");f.AsyncSubject=b.AsyncSubject;b=a("./ReplaySubject");f.ReplaySubject=b.ReplaySubject;b=a("./BehaviorSubject");f.BehaviorSubject=b.BehaviorSubject;b=a("./observable/MulticastObservable");f.MulticastObservable=b.MulticastObservable;b=a("./observable/ConnectableObservable");f.ConnectableObservable=b.ConnectableObservable;b=a("./Notification");f.Notification=
b.Notification;b=a("./util/EmptyError");f.EmptyError=b.EmptyError;b=a("./util/ArgumentOutOfRangeError");f.ArgumentOutOfRangeError=b.ArgumentOutOfRangeError;b=a("./util/ObjectUnsubscribedError");f.ObjectUnsubscribedError=b.ObjectUnsubscribedError;b=a("./util/UnsubscriptionError");f.UnsubscriptionError=b.UnsubscriptionError;b=a("./operator/timeInterval");f.TimeInterval=b.TimeInterval;b=a("./operator/timestamp");f.Timestamp=b.Timestamp;b=a("./testing/TestScheduler");f.TestScheduler=b.TestScheduler;b=
a("./scheduler/VirtualTimeScheduler");f.VirtualTimeScheduler=b.VirtualTimeScheduler;b=a("./observable/dom/AjaxObservable");f.AjaxResponse=b.AjaxResponse;f.AjaxError=b.AjaxError;f.AjaxTimeoutError=b.AjaxTimeoutError;b=a("./scheduler/asap");var h=a("./scheduler/async"),l=a("./scheduler/queue"),k=a("./scheduler/animationFrame"),g=a("./symbol/rxSubscriber"),e=a("./symbol/iterator");a=a("./symbol/observable");f.Scheduler={asap:b.asap,queue:l.queue,animationFrame:k.animationFrame,async:h.async};f.Symbol=
{rxSubscriber:g.$$rxSubscriber,observable:a.$$observable,iterator:e.$$iterator}},{"./AsyncSubject":1,"./BehaviorSubject":2,"./Notification":4,"./Observable":5,"./ReplaySubject":8,"./Subject":11,"./Subscriber":13,"./Subscription":14,"./add/observable/bindCallback":15,"./add/observable/bindNodeCallback":16,"./add/observable/combineLatest":17,"./add/observable/concat":18,"./add/observable/defer":19,"./add/observable/dom/ajax":20,"./add/observable/dom/webSocket":21,"./add/observable/empty":22,"./add/observable/forkJoin":23,
"./add/observable/from":24,"./add/observable/fromEvent":25,"./add/observable/fromEventPattern":26,"./add/observable/fromPromise":27,"./add/observable/generate":28,"./add/observable/if":29,"./add/observable/interval":30,"./add/observable/merge":31,"./add/observable/never":32,"./add/observable/of":33,"./add/observable/onErrorResumeNext":34,"./add/observable/pairs":35,"./add/observable/race":36,"./add/observable/range":37,"./add/observable/throw":38,"./add/observable/timer":39,"./add/observable/using":40,
"./add/observable/zip":41,"./add/operator/audit":42,"./add/operator/auditTime":43,"./add/operator/buffer":44,"./add/operator/bufferCount":45,"./add/operator/bufferTime":46,"./add/operator/bufferToggle":47,"./add/operator/bufferWhen":48,"./add/operator/cache":49,"./add/operator/catch":50,"./add/operator/combineAll":51,"./add/operator/combineLatest":52,"./add/operator/concat":53,"./add/operator/concatAll":54,"./add/operator/concatMap":55,"./add/operator/concatMapTo":56,"./add/operator/count":57,"./add/operator/debounce":58,
"./add/operator/debounceTime":59,"./add/operator/defaultIfEmpty":60,"./add/operator/delay":61,"./add/operator/delayWhen":62,"./add/operator/dematerialize":63,"./add/operator/distinct":64,"./add/operator/distinctKey":65,"./add/operator/distinctUntilChanged":66,"./add/operator/distinctUntilKeyChanged":67,"./add/operator/do":68,"./add/operator/elementAt":69,"./add/operator/every":70,"./add/operator/exhaust":71,"./add/operator/exhaustMap":72,"./add/operator/expand":73,"./add/operator/filter":74,"./add/operator/finally":75,
"./add/operator/find":76,"./add/operator/findIndex":77,"./add/operator/first":78,"./add/operator/groupBy":79,"./add/operator/ignoreElements":80,"./add/operator/isEmpty":81,"./add/operator/last":82,"./add/operator/let":83,"./add/operator/map":84,"./add/operator/mapTo":85,"./add/operator/materialize":86,"./add/operator/max":87,"./add/operator/merge":88,"./add/operator/mergeAll":89,"./add/operator/mergeMap":90,"./add/operator/mergeMapTo":91,"./add/operator/mergeScan":92,"./add/operator/min":93,"./add/operator/multicast":94,
"./add/operator/observeOn":95,"./add/operator/onErrorResumeNext":96,"./add/operator/pairwise":97,"./add/operator/partition":98,"./add/operator/pluck":99,"./add/operator/publish":100,"./add/operator/publishBehavior":101,"./add/operator/publishLast":102,"./add/operator/publishReplay":103,"./add/operator/race":104,"./add/operator/reduce":105,"./add/operator/repeat":106,"./add/operator/repeatWhen":107,"./add/operator/retry":108,"./add/operator/retryWhen":109,"./add/operator/sample":110,"./add/operator/sampleTime":111,
"./add/operator/scan":112,"./add/operator/sequenceEqual":113,"./add/operator/share":114,"./add/operator/single":115,"./add/operator/skip":116,"./add/operator/skipUntil":117,"./add/operator/skipWhile":118,"./add/operator/startWith":119,"./add/operator/subscribeOn":120,"./add/operator/switch":121,"./add/operator/switchMap":122,"./add/operator/switchMapTo":123,"./add/operator/take":124,"./add/operator/takeLast":125,"./add/operator/takeUntil":126,"./add/operator/takeWhile":127,"./add/operator/throttle":128,
"./add/operator/throttleTime":129,"./add/operator/timeInterval":130,"./add/operator/timeout":131,"./add/operator/timeoutWith":132,"./add/operator/timestamp":133,"./add/operator/toArray":134,"./add/operator/toPromise":135,"./add/operator/window":136,"./add/operator/windowCount":137,"./add/operator/windowTime":138,"./add/operator/windowToggle":139,"./add/operator/windowWhen":140,"./add/operator/withLatestFrom":141,"./add/operator/zip":142,"./add/operator/zipAll":143,"./observable/ConnectableObservable":148,
"./observable/MulticastObservable":160,"./observable/dom/AjaxObservable":174,"./operator/timeInterval":283,"./operator/timestamp":286,"./scheduler/VirtualTimeScheduler":306,"./scheduler/animationFrame":307,"./scheduler/asap":308,"./scheduler/async":309,"./scheduler/queue":310,"./symbol/iterator":311,"./symbol/observable":312,"./symbol/rxSubscriber":313,"./testing/TestScheduler":318,"./util/ArgumentOutOfRangeError":320,"./util/EmptyError":321,"./util/ObjectUnsubscribedError":326,"./util/UnsubscriptionError":327}],
10:[function(a,b,f){a=function(){function a(b,f){void 0===f&&(f=a.now);this.SchedulerAction=b;this.now=f}a.prototype.schedule=function(a,b,g){void 0===b&&(b=0);return(new this.SchedulerAction(this,a)).schedule(g,b)};a.now=Date.now?Date.now:function(){return+new Date};return a}();f.Scheduler=a},{}],11:[function(a,b,f){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,
new c)},l=a("./Observable");b=a("./Subscriber");var k=a("./Subscription"),g=a("./util/ObjectUnsubscribedError"),e=a("./SubjectSubscription"),c=a("./symbol/rxSubscriber"),d=function(a){function d(c){a.call(this,c);this.destination=c}h(d,a);return d}(b.Subscriber);f.SubjectSubscriber=d;a=function(a){function b(){a.call(this);this.observers=[];this.hasError=this.isStopped=this.closed=!1;this.thrownError=null}h(b,a);b.prototype[c.$$rxSubscriber]=function(){return new d(this)};b.prototype.lift=function(a){var d=
new m(this,this);d.operator=a;return d};b.prototype.next=function(a){if(this.closed)throw new g.ObjectUnsubscribedError;if(!this.isStopped)for(var d=this.observers,c=d.length,d=d.slice(),e=0;e<c;e++)d[e].next(a)};b.prototype.error=function(a){if(this.closed)throw new g.ObjectUnsubscribedError;this.hasError=!0;this.thrownError=a;this.isStopped=!0;for(var d=this.observers,c=d.length,d=d.slice(),e=0;e<c;e++)d[e].error(a);this.observers.length=0};b.prototype.complete=function(){if(this.closed)throw new g.ObjectUnsubscribedError;
this.isStopped=!0;for(var a=this.observers,d=a.length,a=a.slice(),c=0;c<d;c++)a[c].complete();this.observers.length=0};b.prototype.unsubscribe=function(){this.closed=this.isStopped=!0;this.observers=null};b.prototype._subscribe=function(a){if(this.closed)throw new g.ObjectUnsubscribedError;if(this.hasError)return a.error(this.thrownError),k.Subscription.EMPTY;if(this.isStopped)return a.complete(),k.Subscription.EMPTY;this.observers.push(a);return new e.SubjectSubscription(this,a)};b.prototype.asObservable=
function(){var a=new l.Observable;a.source=this;return a};b.create=function(a,d){return new m(a,d)};return b}(l.Observable);f.Subject=a;var m=function(a){function d(c,e){a.call(this);this.destination=c;this.source=e}h(d,a);d.prototype.next=function(a){var d=this.destination;d&&d.next&&d.next(a)};d.prototype.error=function(a){var d=this.destination;d&&d.error&&this.destination.error(a)};d.prototype.complete=function(){var a=this.destination;a&&a.complete&&this.destination.complete()};d.prototype._subscribe=
function(a){return this.source?this.source.subscribe(a):k.Subscription.EMPTY};return d}(a);f.AnonymousSubject=m},{"./Observable":5,"./SubjectSubscription":12,"./Subscriber":13,"./Subscription":14,"./symbol/rxSubscriber":313,"./util/ObjectUnsubscribedError":326}],12:[function(a,b,f){var h=this&&this.__extends||function(a,b){function g(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)};a=function(a){function b(g,
e){a.call(this);this.subject=g;this.subscriber=e;this.closed=!1}h(b,a);b.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var a=this.subject,e=a.observers;this.subject=null;!e||0===e.length||a.isStopped||a.closed||(a=e.indexOf(this.subscriber),-1!==a&&e.splice(a,1))}};return b}(a("./Subscription").Subscription);f.SubjectSubscription=a},{"./Subscription":14}],13:[function(a,b,f){var h=this&&this.__extends||function(a,d){function e(){this.constructor=a}for(var n in d)d.hasOwnProperty(n)&&
(a[n]=d[n]);a.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)},l=a("./util/isFunction");b=a("./Subscription");var k=a("./Observer"),g=a("./symbol/rxSubscriber");a=function(a){function d(m,n,b){a.call(this);this.syncErrorValue=null;this.isStopped=this.syncErrorThrowable=this.syncErrorThrown=!1;switch(arguments.length){case 0:this.destination=k.empty;break;case 1:if(!m){this.destination=k.empty;break}if("object"===typeof m){m instanceof d?(this.destination=m,this.destination.add(this)):
(this.syncErrorThrowable=!0,this.destination=new e(this,m));break}default:this.syncErrorThrowable=!0,this.destination=new e(this,m,n,b)}}h(d,a);d.prototype[g.$$rxSubscriber]=function(){return this};d.create=function(a,c,e){a=new d(a,c,e);a.syncErrorThrowable=!1;return a};d.prototype.next=function(a){this.isStopped||this._next(a)};d.prototype.error=function(a){this.isStopped||(this.isStopped=!0,this._error(a))};d.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())};d.prototype.unsubscribe=
function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))};d.prototype._next=function(a){this.destination.next(a)};d.prototype._error=function(a){this.destination.error(a);this.unsubscribe()};d.prototype._complete=function(){this.destination.complete();this.unsubscribe()};return d}(b.Subscription);f.Subscriber=a;var e=function(a){function d(d,e,b,g){a.call(this);this._parent=d;var f;d=this;l.isFunction(e)?f=e:e&&(d=e,f=e.next,b=e.error,g=e.complete,l.isFunction(d.unsubscribe)&&
this.add(d.unsubscribe.bind(d)),d.unsubscribe=this.unsubscribe.bind(this));this._context=d;this._next=f;this._error=b;this._complete=g}h(d,a);d.prototype.next=function(a){if(!this.isStopped&&this._next){var d=this._parent;d.syncErrorThrowable?this.__tryOrSetError(d,this._next,a)&&this.unsubscribe():this.__tryOrUnsub(this._next,a)}};d.prototype.error=function(a){if(!this.isStopped){var d=this._parent;if(this._error)d.syncErrorThrowable?this.__tryOrSetError(d,this._error,a):this.__tryOrUnsub(this._error,
a),this.unsubscribe();else if(d.syncErrorThrowable)d.syncErrorValue=a,d.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),a;}};d.prototype.complete=function(){if(!this.isStopped){var a=this._parent;this._complete&&(a.syncErrorThrowable?this.__tryOrSetError(a,this._complete):this.__tryOrUnsub(this._complete));this.unsubscribe()}};d.prototype.__tryOrUnsub=function(a,d){try{a.call(this._context,d)}catch(c){throw this.unsubscribe(),c;}};d.prototype.__tryOrSetError=function(a,d,c){try{d.call(this._context,
c)}catch(e){return a.syncErrorValue=e,a.syncErrorThrown=!0}return!1};d.prototype._unsubscribe=function(){var a=this._parent;this._parent=this._context=null;a.unsubscribe()};return d}(a)},{"./Observer":6,"./Subscription":14,"./symbol/rxSubscriber":313,"./util/isFunction":333}],14:[function(a,b,f){var h=a("./util/isArray"),l=a("./util/isObject"),k=a("./util/isFunction"),g=a("./util/tryCatch"),e=a("./util/errorObject"),c=a("./util/UnsubscriptionError");a=function(){function a(d){this.closed=!1;d&&(this._unsubscribe=
d)}a.prototype.unsubscribe=function(){var a=!1,d;if(!this.closed){this.closed=!0;var b=this._unsubscribe,f=this._subscriptions;this._subscriptions=null;if(k.isFunction(b)){var p=g.tryCatch(b).call(this);p===e.errorObject&&(a=!0,(d=d||[]).push(e.errorObject.e))}if(h.isArray(f))for(var b=-1,v=f.length;++b<v;)p=f[b],l.isObject(p)&&(p=g.tryCatch(p.unsubscribe).call(p),p===e.errorObject&&(a=!0,d=d||[],p=e.errorObject.e,p instanceof c.UnsubscriptionError?d=d.concat(p.errors):d.push(p)));if(a)throw new c.UnsubscriptionError(d);
}};a.prototype.add=function(c){if(!c||c===a.EMPTY)return a.EMPTY;if(c===this)return this;var e=c;switch(typeof c){case "function":e=new a(c);case "object":e.closed||"function"!==typeof e.unsubscribe||(this.closed?e.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(e));break;default:throw Error("unrecognized teardown "+c+" added to Subscription.");}return e};a.prototype.remove=function(c){if(null!=c&&c!==this&&c!==a.EMPTY){var e=this._subscriptions;e&&(c=e.indexOf(c),-1!==c&&e.splice(c,
1))}};a.EMPTY=function(a){a.closed=!0;return a}(new a);return a}();f.Subscription=a},{"./util/UnsubscriptionError":327,"./util/errorObject":330,"./util/isArray":331,"./util/isFunction":333,"./util/isObject":335,"./util/tryCatch":343}],15:[function(a,b,f){b=a("../../Observable");a=a("../../observable/bindCallback");b.Observable.bindCallback=a.bindCallback},{"../../Observable":5,"../../observable/bindCallback":169}],16:[function(a,b,f){b=a("../../Observable");a=a("../../observable/bindNodeCallback");
b.Observable.bindNodeCallback=a.bindNodeCallback},{"../../Observable":5,"../../observable/bindNodeCallback":170}],17:[function(a,b,f){b=a("../../Observable");a=a("../../observable/combineLatest");b.Observable.combineLatest=a.combineLatest},{"../../Observable":5,"../../observable/combineLatest":171}],18:[function(a,b,f){b=a("../../Observable");a=a("../../observable/concat");b.Observable.concat=a.concat},{"../../Observable":5,"../../observable/concat":172}],19:[function(a,b,f){b=a("../../Observable");
a=a("../../observable/defer");b.Observable.defer=a.defer},{"../../Observable":5,"../../observable/defer":173}],20:[function(a,b,f){b=a("../../../Observable");a=a("../../../observable/dom/ajax");b.Observable.ajax=a.ajax},{"../../../Observable":5,"../../../observable/dom/ajax":176}],21:[function(a,b,f){b=a("../../../Observable");a=a("../../../observable/dom/webSocket");b.Observable.webSocket=a.webSocket},{"../../../Observable":5,"../../../observable/dom/webSocket":177}],22:[function(a,b,f){b=a("../../Observable");
a=a("../../observable/empty");b.Observable.empty=a.empty},{"../../Observable":5,"../../observable/empty":178}],23:[function(a,b,f){b=a("../../Observable");a=a("../../observable/forkJoin");b.Observable.forkJoin=a.forkJoin},{"../../Observable":5,"../../observable/forkJoin":179}],24:[function(a,b,f){b=a("../../Observable");a=a("../../observable/from");b.Observable.from=a.from},{"../../Observable":5,"../../observable/from":180}],25:[function(a,b,f){b=a("../../Observable");a=a("../../observable/fromEvent");
b.Observable.fromEvent=a.fromEvent},{"../../Observable":5,"../../observable/fromEvent":181}],26:[function(a,b,f){b=a("../../Observable");a=a("../../observable/fromEventPattern");b.Observable.fromEventPattern=a.fromEventPattern},{"../../Observable":5,"../../observable/fromEventPattern":182}],27:[function(a,b,f){b=a("../../Observable");a=a("../../observable/fromPromise");b.Observable.fromPromise=a.fromPromise},{"../../Observable":5,"../../observable/fromPromise":183}],28:[function(a,b,f){b=a("../../Observable");
a=a("../../observable/GenerateObservable");b.Observable.generate=a.GenerateObservable.create},{"../../Observable":5,"../../observable/GenerateObservable":156}],29:[function(a,b,f){b=a("../../Observable");a=a("../../observable/if");b.Observable["if"]=a._if},{"../../Observable":5,"../../observable/if":184}],30:[function(a,b,f){b=a("../../Observable");a=a("../../observable/interval");b.Observable.interval=a.interval},{"../../Observable":5,"../../observable/interval":185}],31:[function(a,b,f){b=a("../../Observable");
a=a("../../observable/merge");b.Observable.merge=a.merge},{"../../Observable":5,"../../observable/merge":186}],32:[function(a,b,f){b=a("../../Observable");a=a("../../observable/never");b.Observable.never=a.never},{"../../Observable":5,"../../observable/never":187}],33:[function(a,b,f){b=a("../../Observable");a=a("../../observable/of");b.Observable.of=a.of},{"../../Observable":5,"../../observable/of":188}],34:[function(a,b,f){b=a("../../Observable");a=a("../../operator/onErrorResumeNext");b.Observable.onErrorResumeNext=
a.onErrorResumeNextStatic},{"../../Observable":5,"../../operator/onErrorResumeNext":249}],35:[function(a,b,f){b=a("../../Observable");a=a("../../observable/pairs");b.Observable.pairs=a.pairs},{"../../Observable":5,"../../observable/pairs":189}],36:[function(a,b,f){b=a("../../Observable");a=a("../../operator/race");b.Observable.race=a.raceStatic},{"../../Observable":5,"../../operator/race":257}],37:[function(a,b,f){b=a("../../Observable");a=a("../../observable/range");b.Observable.range=a.range},{"../../Observable":5,
"../../observable/range":190}],38:[function(a,b,f){b=a("../../Observable");a=a("../../observable/throw");b.Observable["throw"]=a._throw},{"../../Observable":5,"../../observable/throw":191}],39:[function(a,b,f){b=a("../../Observable");a=a("../../observable/timer");b.Observable.timer=a.timer},{"../../Observable":5,"../../observable/timer":192}],40:[function(a,b,f){b=a("../../Observable");a=a("../../observable/using");b.Observable.using=a.using},{"../../Observable":5,"../../observable/using":193}],41:[function(a,
b,f){b=a("../../Observable");a=a("../../observable/zip");b.Observable.zip=a.zip},{"../../Observable":5,"../../observable/zip":194}],42:[function(a,b,f){b=a("../../Observable");a=a("../../operator/audit");b.Observable.prototype.audit=a.audit},{"../../Observable":5,"../../operator/audit":195}],43:[function(a,b,f){b=a("../../Observable");a=a("../../operator/auditTime");b.Observable.prototype.auditTime=a.auditTime},{"../../Observable":5,"../../operator/auditTime":196}],44:[function(a,b,f){b=a("../../Observable");
a=a("../../operator/buffer");b.Observable.prototype.buffer=a.buffer},{"../../Observable":5,"../../operator/buffer":197}],45:[function(a,b,f){b=a("../../Observable");a=a("../../operator/bufferCount");b.Observable.prototype.bufferCount=a.bufferCount},{"../../Observable":5,"../../operator/bufferCount":198}],46:[function(a,b,f){b=a("../../Observable");a=a("../../operator/bufferTime");b.Observable.prototype.bufferTime=a.bufferTime},{"../../Observable":5,"../../operator/bufferTime":199}],47:[function(a,
b,f){b=a("../../Observable");a=a("../../operator/bufferToggle");b.Observable.prototype.bufferToggle=a.bufferToggle},{"../../Observable":5,"../../operator/bufferToggle":200}],48:[function(a,b,f){b=a("../../Observable");a=a("../../operator/bufferWhen");b.Observable.prototype.bufferWhen=a.bufferWhen},{"../../Observable":5,"../../operator/bufferWhen":201}],49:[function(a,b,f){b=a("../../Observable");a=a("../../operator/cache");b.Observable.prototype.cache=a.cache},{"../../Observable":5,"../../operator/cache":202}],
50:[function(a,b,f){b=a("../../Observable");a=a("../../operator/catch");b.Observable.prototype["catch"]=a._catch;b.Observable.prototype._catch=a._catch},{"../../Observable":5,"../../operator/catch":203}],51:[function(a,b,f){b=a("../../Observable");a=a("../../operator/combineAll");b.Observable.prototype.combineAll=a.combineAll},{"../../Observable":5,"../../operator/combineAll":204}],52:[function(a,b,f){b=a("../../Observable");a=a("../../operator/combineLatest");b.Observable.prototype.combineLatest=
a.combineLatest},{"../../Observable":5,"../../operator/combineLatest":205}],53:[function(a,b,f){b=a("../../Observable");a=a("../../operator/concat");b.Observable.prototype.concat=a.concat},{"../../Observable":5,"../../operator/concat":206}],54:[function(a,b,f){b=a("../../Observable");a=a("../../operator/concatAll");b.Observable.prototype.concatAll=a.concatAll},{"../../Observable":5,"../../operator/concatAll":207}],55:[function(a,b,f){b=a("../../Observable");a=a("../../operator/concatMap");b.Observable.prototype.concatMap=
a.concatMap},{"../../Observable":5,"../../operator/concatMap":208}],56:[function(a,b,f){b=a("../../Observable");a=a("../../operator/concatMapTo");b.Observable.prototype.concatMapTo=a.concatMapTo},{"../../Observable":5,"../../operator/concatMapTo":209}],57:[function(a,b,f){b=a("../../Observable");a=a("../../operator/count");b.Observable.prototype.count=a.count},{"../../Observable":5,"../../operator/count":210}],58:[function(a,b,f){b=a("../../Observable");a=a("../../operator/debounce");b.Observable.prototype.debounce=
a.debounce},{"../../Observable":5,"../../operator/debounce":211}],59:[function(a,b,f){b=a("../../Observable");a=a("../../operator/debounceTime");b.Observable.prototype.debounceTime=a.debounceTime},{"../../Observable":5,"../../operator/debounceTime":212}],60:[function(a,b,f){b=a("../../Observable");a=a("../../operator/defaultIfEmpty");b.Observable.prototype.defaultIfEmpty=a.defaultIfEmpty},{"../../Observable":5,"../../operator/defaultIfEmpty":213}],61:[function(a,b,f){b=a("../../Observable");a=a("../../operator/delay");
b.Observable.prototype.delay=a.delay},{"../../Observable":5,"../../operator/delay":214}],62:[function(a,b,f){b=a("../../Observable");a=a("../../operator/delayWhen");b.Observable.prototype.delayWhen=a.delayWhen},{"../../Observable":5,"../../operator/delayWhen":215}],63:[function(a,b,f){b=a("../../Observable");a=a("../../operator/dematerialize");b.Observable.prototype.dematerialize=a.dematerialize},{"../../Observable":5,"../../operator/dematerialize":216}],64:[function(a,b,f){b=a("../../Observable");
a=a("../../operator/distinct");b.Observable.prototype.distinct=a.distinct},{"../../Observable":5,"../../operator/distinct":217}],65:[function(a,b,f){b=a("../../Observable");a=a("../../operator/distinctKey");b.Observable.prototype.distinctKey=a.distinctKey},{"../../Observable":5,"../../operator/distinctKey":218}],66:[function(a,b,f){b=a("../../Observable");a=a("../../operator/distinctUntilChanged");b.Observable.prototype.distinctUntilChanged=a.distinctUntilChanged},{"../../Observable":5,"../../operator/distinctUntilChanged":219}],
67:[function(a,b,f){b=a("../../Observable");a=a("../../operator/distinctUntilKeyChanged");b.Observable.prototype.distinctUntilKeyChanged=a.distinctUntilKeyChanged},{"../../Observable":5,"../../operator/distinctUntilKeyChanged":220}],68:[function(a,b,f){b=a("../../Observable");a=a("../../operator/do");b.Observable.prototype["do"]=a._do;b.Observable.prototype._do=a._do},{"../../Observable":5,"../../operator/do":221}],69:[function(a,b,f){b=a("../../Observable");a=a("../../operator/elementAt");b.Observable.prototype.elementAt=
a.elementAt},{"../../Observable":5,"../../operator/elementAt":222}],70:[function(a,b,f){b=a("../../Observable");a=a("../../operator/every");b.Observable.prototype.every=a.every},{"../../Observable":5,"../../operator/every":223}],71:[function(a,b,f){b=a("../../Observable");a=a("../../operator/exhaust");b.Observable.prototype.exhaust=a.exhaust},{"../../Observable":5,"../../operator/exhaust":224}],72:[function(a,b,f){b=a("../../Observable");a=a("../../operator/exhaustMap");b.Observable.prototype.exhaustMap=
a.exhaustMap},{"../../Observable":5,"../../operator/exhaustMap":225}],73:[function(a,b,f){b=a("../../Observable");a=a("../../operator/expand");b.Observable.prototype.expand=a.expand},{"../../Observable":5,"../../operator/expand":226}],74:[function(a,b,f){b=a("../../Observable");a=a("../../operator/filter");b.Observable.prototype.filter=a.filter},{"../../Observable":5,"../../operator/filter":227}],75:[function(a,b,f){b=a("../../Observable");a=a("../../operator/finally");b.Observable.prototype["finally"]=
a._finally;b.Observable.prototype._finally=a._finally},{"../../Observable":5,"../../operator/finally":228}],76:[function(a,b,f){b=a("../../Observable");a=a("../../operator/find");b.Observable.prototype.find=a.find},{"../../Observable":5,"../../operator/find":229}],77:[function(a,b,f){b=a("../../Observable");a=a("../../operator/findIndex");b.Observable.prototype.findIndex=a.findIndex},{"../../Observable":5,"../../operator/findIndex":230}],78:[function(a,b,f){b=a("../../Observable");a=a("../../operator/first");
b.Observable.prototype.first=a.first},{"../../Observable":5,"../../operator/first":231}],79:[function(a,b,f){b=a("../../Observable");a=a("../../operator/groupBy");b.Observable.prototype.groupBy=a.groupBy},{"../../Observable":5,"../../operator/groupBy":232}],80:[function(a,b,f){b=a("../../Observable");a=a("../../operator/ignoreElements");b.Observable.prototype.ignoreElements=a.ignoreElements},{"../../Observable":5,"../../operator/ignoreElements":233}],81:[function(a,b,f){b=a("../../Observable");a=
a("../../operator/isEmpty");b.Observable.prototype.isEmpty=a.isEmpty},{"../../Observable":5,"../../operator/isEmpty":234}],82:[function(a,b,f){b=a("../../Observable");a=a("../../operator/last");b.Observable.prototype.last=a.last},{"../../Observable":5,"../../operator/last":235}],83:[function(a,b,f){b=a("../../Observable");a=a("../../operator/let");b.Observable.prototype.let=a.letProto;b.Observable.prototype.letBind=a.letProto},{"../../Observable":5,"../../operator/let":236}],84:[function(a,b,f){b=
a("../../Observable");a=a("../../operator/map");b.Observable.prototype.map=a.map},{"../../Observable":5,"../../operator/map":237}],85:[function(a,b,f){b=a("../../Observable");a=a("../../operator/mapTo");b.Observable.prototype.mapTo=a.mapTo},{"../../Observable":5,"../../operator/mapTo":238}],86:[function(a,b,f){b=a("../../Observable");a=a("../../operator/materialize");b.Observable.prototype.materialize=a.materialize},{"../../Observable":5,"../../operator/materialize":239}],87:[function(a,b,f){b=a("../../Observable");
a=a("../../operator/max");b.Observable.prototype.max=a.max},{"../../Observable":5,"../../operator/max":240}],88:[function(a,b,f){b=a("../../Observable");a=a("../../operator/merge");b.Observable.prototype.merge=a.merge},{"../../Observable":5,"../../operator/merge":241}],89:[function(a,b,f){b=a("../../Observable");a=a("../../operator/mergeAll");b.Observable.prototype.mergeAll=a.mergeAll},{"../../Observable":5,"../../operator/mergeAll":242}],90:[function(a,b,f){b=a("../../Observable");a=a("../../operator/mergeMap");
b.Observable.prototype.mergeMap=a.mergeMap;b.Observable.prototype.flatMap=a.mergeMap},{"../../Observable":5,"../../operator/mergeMap":243}],91:[function(a,b,f){b=a("../../Observable");a=a("../../operator/mergeMapTo");b.Observable.prototype.flatMapTo=a.mergeMapTo;b.Observable.prototype.mergeMapTo=a.mergeMapTo},{"../../Observable":5,"../../operator/mergeMapTo":244}],92:[function(a,b,f){b=a("../../Observable");a=a("../../operator/mergeScan");b.Observable.prototype.mergeScan=a.mergeScan},{"../../Observable":5,
"../../operator/mergeScan":245}],93:[function(a,b,f){b=a("../../Observable");a=a("../../operator/min");b.Observable.prototype.min=a.min},{"../../Observable":5,"../../operator/min":246}],94:[function(a,b,f){b=a("../../Observable");a=a("../../operator/multicast");b.Observable.prototype.multicast=a.multicast},{"../../Observable":5,"../../operator/multicast":247}],95:[function(a,b,f){b=a("../../Observable");a=a("../../operator/observeOn");b.Observable.prototype.observeOn=a.observeOn},{"../../Observable":5,
"../../operator/observeOn":248}],96:[function(a,b,f){b=a("../../Observable");a=a("../../operator/onErrorResumeNext");b.Observable.prototype.onErrorResumeNext=a.onErrorResumeNext},{"../../Observable":5,"../../operator/onErrorResumeNext":249}],97:[function(a,b,f){b=a("../../Observable");a=a("../../operator/pairwise");b.Observable.prototype.pairwise=a.pairwise},{"../../Observable":5,"../../operator/pairwise":250}],98:[function(a,b,f){b=a("../../Observable");a=a("../../operator/partition");b.Observable.prototype.partition=
a.partition},{"../../Observable":5,"../../operator/partition":251}],99:[function(a,b,f){b=a("../../Observable");a=a("../../operator/pluck");b.Observable.prototype.pluck=a.pluck},{"../../Observable":5,"../../operator/pluck":252}],100:[function(a,b,f){b=a("../../Observable");a=a("../../operator/publish");b.Observable.prototype.publish=a.publish},{"../../Observable":5,"../../operator/publish":253}],101:[function(a,b,f){b=a("../../Observable");a=a("../../operator/publishBehavior");b.Observable.prototype.publishBehavior=
a.publishBehavior},{"../../Observable":5,"../../operator/publishBehavior":254}],102:[function(a,b,f){b=a("../../Observable");a=a("../../operator/publishLast");b.Observable.prototype.publishLast=a.publishLast},{"../../Observable":5,"../../operator/publishLast":255}],103:[function(a,b,f){b=a("../../Observable");a=a("../../operator/publishReplay");b.Observable.prototype.publishReplay=a.publishReplay},{"../../Observable":5,"../../operator/publishReplay":256}],104:[function(a,b,f){b=a("../../Observable");
a=a("../../operator/race");b.Observable.prototype.race=a.race},{"../../Observable":5,"../../operator/race":257}],105:[function(a,b,f){b=a("../../Observable");a=a("../../operator/reduce");b.Observable.prototype.reduce=a.reduce},{"../../Observable":5,"../../operator/reduce":258}],106:[function(a,b,f){b=a("../../Observable");a=a("../../operator/repeat");b.Observable.prototype.repeat=a.repeat},{"../../Observable":5,"../../operator/repeat":259}],107:[function(a,b,f){b=a("../../Observable");a=a("../../operator/repeatWhen");
b.Observable.prototype.repeatWhen=a.repeatWhen},{"../../Observable":5,"../../operator/repeatWhen":260}],108:[function(a,b,f){b=a("../../Observable");a=a("../../operator/retry");b.Observable.prototype.retry=a.retry},{"../../Observable":5,"../../operator/retry":261}],109:[function(a,b,f){b=a("../../Observable");a=a("../../operator/retryWhen");b.Observable.prototype.retryWhen=a.retryWhen},{"../../Observable":5,"../../operator/retryWhen":262}],110:[function(a,b,f){b=a("../../Observable");a=a("../../operator/sample");
b.Observable.prototype.sample=a.sample},{"../../Observable":5,"../../operator/sample":263}],111:[function(a,b,f){b=a("../../Observable");a=a("../../operator/sampleTime");b.Observable.prototype.sampleTime=a.sampleTime},{"../../Observable":5,"../../operator/sampleTime":264}],112:[function(a,b,f){b=a("../../Observable");a=a("../../operator/scan");b.Observable.prototype.scan=a.scan},{"../../Observable":5,"../../operator/scan":265}],113:[function(a,b,f){b=a("../../Observable");a=a("../../operator/sequenceEqual");
b.Observable.prototype.sequenceEqual=a.sequenceEqual},{"../../Observable":5,"../../operator/sequenceEqual":266}],114:[function(a,b,f){b=a("../../Observable");a=a("../../operator/share");b.Observable.prototype.share=a.share},{"../../Observable":5,"../../operator/share":267}],115:[function(a,b,f){b=a("../../Observable");a=a("../../operator/single");b.Observable.prototype.single=a.single},{"../../Observable":5,"../../operator/single":268}],116:[function(a,b,f){b=a("../../Observable");a=a("../../operator/skip");
b.Observable.prototype.skip=a.skip},{"../../Observable":5,"../../operator/skip":269}],117:[function(a,b,f){b=a("../../Observable");a=a("../../operator/skipUntil");b.Observable.prototype.skipUntil=a.skipUntil},{"../../Observable":5,"../../operator/skipUntil":270}],118:[function(a,b,f){b=a("../../Observable");a=a("../../operator/skipWhile");b.Observable.prototype.skipWhile=a.skipWhile},{"../../Observable":5,"../../operator/skipWhile":271}],119:[function(a,b,f){b=a("../../Observable");a=a("../../operator/startWith");
b.Observable.prototype.startWith=a.startWith},{"../../Observable":5,"../../operator/startWith":272}],120:[function(a,b,f){b=a("../../Observable");a=a("../../operator/subscribeOn");b.Observable.prototype.subscribeOn=a.subscribeOn},{"../../Observable":5,"../../operator/subscribeOn":273}],121:[function(a,b,f){b=a("../../Observable");a=a("../../operator/switch");b.Observable.prototype["switch"]=a._switch;b.Observable.prototype._switch=a._switch},{"../../Observable":5,"../../operator/switch":274}],122:[function(a,
b,f){b=a("../../Observable");a=a("../../operator/switchMap");b.Observable.prototype.switchMap=a.switchMap},{"../../Observable":5,"../../operator/switchMap":275}],123:[function(a,b,f){b=a("../../Observable");a=a("../../operator/switchMapTo");b.Observable.prototype.switchMapTo=a.switchMapTo},{"../../Observable":5,"../../operator/switchMapTo":276}],124:[function(a,b,f){b=a("../../Observable");a=a("../../operator/take");b.Observable.prototype.take=a.take},{"../../Observable":5,"../../operator/take":277}],
125:[function(a,b,f){b=a("../../Observable");a=a("../../operator/takeLast");b.Observable.prototype.takeLast=a.takeLast},{"../../Observable":5,"../../operator/takeLast":278}],126:[function(a,b,f){b=a("../../Observable");a=a("../../operator/takeUntil");b.Observable.prototype.takeUntil=a.takeUntil},{"../../Observable":5,"../../operator/takeUntil":279}],127:[function(a,b,f){b=a("../../Observable");a=a("../../operator/takeWhile");b.Observable.prototype.takeWhile=a.takeWhile},{"../../Observable":5,"../../operator/takeWhile":280}],
128:[function(a,b,f){b=a("../../Observable");a=a("../../operator/throttle");b.Observable.prototype.throttle=a.throttle},{"../../Observable":5,"../../operator/throttle":281}],129:[function(a,b,f){b=a("../../Observable");a=a("../../operator/throttleTime");b.Observable.prototype.throttleTime=a.throttleTime},{"../../Observable":5,"../../operator/throttleTime":282}],130:[function(a,b,f){b=a("../../Observable");a=a("../../operator/timeInterval");b.Observable.prototype.timeInterval=a.timeInterval},{"../../Observable":5,
"../../operator/timeInterval":283}],131:[function(a,b,f){b=a("../../Observable");a=a("../../operator/timeout");b.Observable.prototype.timeout=a.timeout},{"../../Observable":5,"../../operator/timeout":284}],132:[function(a,b,f){b=a("../../Observable");a=a("../../operator/timeoutWith");b.Observable.prototype.timeoutWith=a.timeoutWith},{"../../Observable":5,"../../operator/timeoutWith":285}],133:[function(a,b,f){b=a("../../Observable");a=a("../../operator/timestamp");b.Observable.prototype.timestamp=
a.timestamp},{"../../Observable":5,"../../operator/timestamp":286}],134:[function(a,b,f){b=a("../../Observable");a=a("../../operator/toArray");b.Observable.prototype.toArray=a.toArray},{"../../Observable":5,"../../operator/toArray":287}],135:[function(a,b,f){b=a("../../Observable");a=a("../../operator/toPromise");b.Observable.prototype.toPromise=a.toPromise},{"../../Observable":5,"../../operator/toPromise":288}],136:[function(a,b,f){b=a("../../Observable");a=a("../../operator/window");b.Observable.prototype.window=
a.window},{"../../Observable":5,"../../operator/window":289}],137:[function(a,b,f){b=a("../../Observable");a=a("../../operator/windowCount");b.Observable.prototype.windowCount=a.windowCount},{"../../Observable":5,"../../operator/windowCount":290}],138:[function(a,b,f){b=a("../../Observable");a=a("../../operator/windowTime");b.Observable.prototype.windowTime=a.windowTime},{"../../Observable":5,"../../operator/windowTime":291}],139:[function(a,b,f){b=a("../../Observable");a=a("../../operator/windowToggle");
b.Observable.prototype.windowToggle=a.windowToggle},{"../../Observable":5,"../../operator/windowToggle":292}],140:[function(a,b,f){b=a("../../Observable");a=a("../../operator/windowWhen");b.Observable.prototype.windowWhen=a.windowWhen},{"../../Observable":5,"../../operator/windowWhen":293}],141:[function(a,b,f){b=a("../../Observable");a=a("../../operator/withLatestFrom");b.Observable.prototype.withLatestFrom=a.withLatestFrom},{"../../Observable":5,"../../operator/withLatestFrom":294}],142:[function(a,
b,f){b=a("../../Observable");a=a("../../operator/zip");b.Observable.prototype.zip=a.zipProto},{"../../Observable":5,"../../operator/zip":295}],143:[function(a,b,f){b=a("../../Observable");a=a("../../operator/zipAll");b.Observable.prototype.zipAll=a.zipAll},{"../../Observable":5,"../../operator/zipAll":296}],144:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=
e.prototype,new c)};b=a("../Observable");var l=a("./ScalarObservable"),k=a("./EmptyObservable");a=function(a){function e(c,d){a.call(this);this.arrayLike=c;this.scheduler=d;d||1!==c.length||(this._isScalar=!0,this.value=c[0])}h(e,a);e.create=function(a,d){var m=a.length;return 0===m?new k.EmptyObservable:1===m?new l.ScalarObservable(a[0],d):new e(a,d)};e.dispatch=function(a){var d=a.arrayLike,e=a.index,n=a.length,b=a.subscriber;b.closed||(e>=n?b.complete():(b.next(d[e]),a.index=e+1,this.schedule(a)))};
e.prototype._subscribe=function(a){var d=this.arrayLike,m=this.scheduler,n=d.length;if(m)return m.schedule(e.dispatch,0,{arrayLike:d,index:0,length:n,subscriber:a});for(m=0;m<n&&!a.closed;m++)a.next(d[m]);a.complete()};return e}(b.Observable);f.ArrayLikeObservable=a},{"../Observable":5,"./EmptyObservable":150,"./ScalarObservable":165}],145:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var m in c)c.hasOwnProperty(m)&&(a[m]=c[m]);a.prototype=null===c?
Object.create(c):(d.prototype=c.prototype,new d)};b=a("../Observable");var l=a("./ScalarObservable"),k=a("./EmptyObservable"),g=a("../util/isScheduler");a=function(a){function c(d,c){a.call(this);this.array=d;this.scheduler=c;c||1!==d.length||(this._isScalar=!0,this.value=d[0])}h(c,a);c.create=function(a,e){return new c(a,e)};c.of=function(){for(var a=[],e=0;e<arguments.length;e++)a[e-0]=arguments[e];e=a[a.length-1];g.isScheduler(e)?a.pop():e=null;var n=a.length;return 1<n?new c(a,e):1===n?new l.ScalarObservable(a[0],
e):new k.EmptyObservable(e)};c.dispatch=function(a){var c=a.array,e=a.index,b=a.subscriber;e>=a.count?b.complete():(b.next(c[e]),b.closed||(a.index=e+1,this.schedule(a)))};c.prototype._subscribe=function(a){var e=this.array,n=e.length,b=this.scheduler;if(b)return b.schedule(c.dispatch,0,{array:e,index:0,count:n,subscriber:a});for(b=0;b<n&&!a.closed;b++)a.next(e[b]);a.complete()};return c}(b.Observable);f.ArrayObservable=a},{"../Observable":5,"../util/isScheduler":337,"./EmptyObservable":150,"./ScalarObservable":165}],
146:[function(a,b,f){function h(a){var c=a.subject;c.next(a.value);c.complete()}function l(a){a.subject.error(a.err)}var k=this&&this.__extends||function(a,c){function e(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)};b=a("../Observable");var g=a("../util/tryCatch"),e=a("../util/errorObject"),c=a("../AsyncSubject");a=function(a){function m(c,e,m,b){a.call(this);this.callbackFunc=c;this.selector=e;this.args=
m;this.scheduler=b}k(m,a);m.create=function(a,d,c){void 0===d&&(d=void 0);return function(){for(var e=[],b=0;b<arguments.length;b++)e[b-0]=arguments[b];return new m(a,d,e,c)}};m.prototype._subscribe=function(a){var d=this.callbackFunc,b=this.args,f=this.scheduler,k=this.subject;if(f)return f.schedule(m.dispatch,0,{source:this,subscriber:a});k||(k=this.subject=new c.AsyncSubject,f=function r(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];var c=r.source,d=c.selector,c=c.subject;d?(a=
g.tryCatch(d).apply(this,a),a===e.errorObject?c.error(e.errorObject.e):(c.next(a),c.complete())):(c.next(1===a.length?a[0]:a),c.complete())},f.source=this,g.tryCatch(d).apply(this,b.concat(f))===e.errorObject&&k.error(e.errorObject.e));return k.subscribe(a)};m.dispatch=function(a){var d=this,m=a.source;a=a.subscriber;var b=m.callbackFunc,f=m.args,k=m.scheduler,r=m.subject;if(!r){var r=m.subject=new c.AsyncSubject,x=function E(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var m=E.source,
c=m.selector,m=m.subject;c?(a=g.tryCatch(c).apply(this,a),a===e.errorObject?d.add(k.schedule(l,0,{err:e.errorObject.e,subject:m})):d.add(k.schedule(h,0,{value:a,subject:m}))):d.add(k.schedule(h,0,{value:1===a.length?a[0]:a,subject:m}))};x.source=m;g.tryCatch(b).apply(this,f.concat(x))===e.errorObject&&r.error(e.errorObject.e)}d.add(r.subscribe(a))};return m}(b.Observable);f.BoundCallbackObservable=a},{"../AsyncSubject":1,"../Observable":5,"../util/errorObject":330,"../util/tryCatch":343}],147:[function(a,
b,f){function h(a){var b=this,g=a.source;a=a.subscriber;var f=g.callbackFunc,h=g.args,v=g.scheduler,w=g.subject;if(!w){var w=g.subject=new d.AsyncSubject,r=function D(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];var m=D.source,d=m.selector,m=m.subject,g=a.shift();g?m.error(g):d?(a=e.tryCatch(d).apply(this,a),a===c.errorObject?b.add(v.schedule(k,0,{err:c.errorObject.e,subject:m})):b.add(v.schedule(l,0,{value:a,subject:m}))):b.add(v.schedule(l,0,{value:1===a.length?a[0]:a,subject:m}))};
r.source=g;e.tryCatch(f).apply(this,h.concat(r))===c.errorObject&&w.error(c.errorObject.e)}b.add(w.subscribe(a))}function l(a){var d=a.subject;d.next(a.value);d.complete()}function k(a){a.subject.error(a.err)}var g=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)};b=a("../Observable");var e=a("../util/tryCatch"),c=a("../util/errorObject"),d=a("../AsyncSubject");
a=function(a){function b(d,c,e,g){a.call(this);this.callbackFunc=d;this.selector=c;this.args=e;this.scheduler=g}g(b,a);b.create=function(a,d,c){void 0===d&&(d=void 0);return function(){for(var e=[],m=0;m<arguments.length;m++)e[m-0]=arguments[m];return new b(a,d,e,c)}};b.prototype._subscribe=function(a){var m=this.callbackFunc,b=this.args,g=this.scheduler,n=this.subject;if(g)return g.schedule(h,0,{source:this,subscriber:a});n||(n=this.subject=new d.AsyncSubject,g=function x(){for(var a=[],d=0;d<arguments.length;d++)a[d-
0]=arguments[d];var m=x.source,d=m.selector,m=m.subject,b=a.shift();b?m.error(b):d?(a=e.tryCatch(d).apply(this,a),a===c.errorObject?m.error(c.errorObject.e):(m.next(a),m.complete())):(m.next(1===a.length?a[0]:a),m.complete())},g.source=this,e.tryCatch(m).apply(this,b.concat(g))===c.errorObject&&n.error(c.errorObject.e));return n.subscribe(a)};return b}(b.Observable);f.BoundNodeCallbackObservable=a},{"../AsyncSubject":1,"../Observable":5,"../util/errorObject":330,"../util/tryCatch":343}],148:[function(a,
b,f){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)};b=a("../Subject");var l=a("../Observable"),k=a("../Subscriber"),g=a("../Subscription");a=function(a){function d(c,e){a.call(this);this.source=c;this.subjectFactory=e;this._refCount=0}h(d,a);d.prototype._subscribe=function(a){return this.getSubject().subscribe(a)};d.prototype.getSubject=function(){var a=
this._subject;if(!a||a.isStopped)this._subject=this.subjectFactory();return this._subject};d.prototype.connect=function(){var a=this._connection;a||(a=this._connection=new g.Subscription,a.add(this.source.subscribe(new e(this.getSubject(),this))),a.closed?(this._connection=null,a=g.Subscription.EMPTY):this._connection=a);return a};d.prototype.refCount=function(){return this.lift(new c(this))};return d}(l.Observable);f.ConnectableObservable=a;var e=function(a){function d(c,e){a.call(this,c);this.connectable=
e}h(d,a);d.prototype._error=function(d){this._unsubscribe();a.prototype._error.call(this,d)};d.prototype._complete=function(){this._unsubscribe();a.prototype._complete.call(this)};d.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var d=a._connection;a._refCount=0;a._subject=null;a._connection=null;d&&d.unsubscribe()}};return d}(b.SubjectSubscriber),c=function(){function a(d){this.connectable=d}a.prototype.call=function(a,c){var e=this.connectable;e._refCount++;
var m=new d(a,e),b=c._subscribe(m);m.closed||(m.connection=e.connect());return b};return a}(),d=function(a){function d(c,e){a.call(this,c);this.connectable=e}h(d,a);d.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var d=a._refCount;0>=d?this.connection=null:(a._refCount=d-1,1<d?this.connection=null:(d=this.connection,a=a._connection,this.connection=null,!a||d&&a!==d||a.unsubscribe()))}else this.connection=null};return d}(k.Subscriber)},{"../Observable":5,"../Subject":11,
"../Subscriber":13,"../Subscription":14}],149:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};b=a("../Observable");var l=a("../util/subscribeToResult");a=a("../OuterSubscriber");b=function(a){function e(c){a.call(this);this.observableFactory=c}h(e,a);e.create=function(a){return new e(a)};e.prototype._subscribe=function(a){return new k(a,
this.observableFactory)};return e}(b.Observable);f.DeferObservable=b;var k=function(a){function e(c,d){a.call(this,c);this.factory=d;this.tryDefer()}h(e,a);e.prototype.tryDefer=function(){try{this._callFactory()}catch(a){this._error(a)}};e.prototype._callFactory=function(){var a=this.factory();a&&this.add(l.subscribeToResult(this,a))};return e}(a.OuterSubscriber)},{"../Observable":5,"../OuterSubscriber":7,"../util/subscribeToResult":341}],150:[function(a,b,f){var h=this&&this.__extends||function(a,
b){function g(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)};a=function(a){function b(g){a.call(this);this.scheduler=g}h(b,a);b.create=function(a){return new b(a)};b.dispatch=function(a){a.subscriber.complete()};b.prototype._subscribe=function(a){var e=this.scheduler;if(e)return e.schedule(b.dispatch,0,{subscriber:a});a.complete()};return b}(a("../Observable").Observable);f.EmptyObservable=a},{"../Observable":5}],
151:[function(a,b,f){var h=this&&this.__extends||function(a,b){function g(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)};a=function(a){function b(g,e){a.call(this);this.error=g;this.scheduler=e}h(b,a);b.create=function(a,e){return new b(a,e)};b.dispatch=function(a){a.subscriber.error(a.error)};b.prototype._subscribe=function(a){var e=this.error,c=this.scheduler;if(c)return c.schedule(b.dispatch,0,{error:e,
subscriber:a});a.error(e)};return b}(a("../Observable").Observable);f.ErrorObservable=a},{"../Observable":5}],152:[function(a,b,f){var h=this&&this.__extends||function(a,d){function e(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)};b=a("../Observable");var l=a("./EmptyObservable"),k=a("../util/isArray"),g=a("../util/subscribeToResult");a=a("../OuterSubscriber");b=function(a){function d(d,e){a.call(this);this.sources=
d;this.resultSelector=e}h(d,a);d.create=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];if(null===a||0===arguments.length)return new l.EmptyObservable;c=null;"function"===typeof a[a.length-1]&&(c=a.pop());1===a.length&&k.isArray(a[0])&&(a=a[0]);return 0===a.length?new l.EmptyObservable:new d(a,c)};d.prototype._subscribe=function(a){return new e(a,this.sources,this.resultSelector)};return d}(b.Observable);f.ForkJoinObservable=b;var e=function(a){function d(d,e,b){a.call(this,
d);this.sources=e;this.resultSelector=b;this.haveValues=this.completed=0;this.total=d=e.length;this.values=Array(d);for(b=0;b<d;b++){var f=g.subscribeToResult(this,e[b],null,b);f&&(f.outerIndex=b,this.add(f))}}h(d,a);d.prototype.notifyNext=function(a,d,c,e,b){this.values[c]=d;b._hasValue||(b._hasValue=!0,this.haveValues++)};d.prototype.notifyComplete=function(a){var d=this.destination,c=this.haveValues,e=this.resultSelector,b=this.values,g=b.length;a._hasValue?(this.completed++,this.completed===g&&
(c===g&&(a=e?e.apply(this,b):b,d.next(a)),d.complete())):d.complete()};return d}(a.OuterSubscriber)},{"../Observable":5,"../OuterSubscriber":7,"../util/isArray":331,"../util/subscribeToResult":341,"./EmptyObservable":150}],153:[function(a,b,f){var h=this&&this.__extends||function(a,d){function e(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)};b=a("../Observable");var l=a("../util/tryCatch"),k=a("../util/isFunction"),
g=a("../util/errorObject"),e=a("../Subscription");a=function(a){function d(d,e,b,g){a.call(this);this.sourceObj=d;this.eventName=e;this.selector=b;this.options=g}h(d,a);d.create=function(a,c,e,b){k.isFunction(e)&&(b=e,e=void 0);return new d(a,c,b,e)};d.setupSubscription=function(a,c,b,g,f){var k;if(a&&"[object NodeList]"===a.toString()||a&&"[object HTMLCollection]"===a.toString())for(var l=0,h=a.length;l<h;l++)d.setupSubscription(a[l],c,b,g,f);else a&&"function"===typeof a.addEventListener&&"function"===
typeof a.removeEventListener?(a.addEventListener(c,b,f),k=function(){return a.removeEventListener(c,b)}):a&&"function"===typeof a.on&&"function"===typeof a.off?(a.on(c,b),k=function(){return a.off(c,b)}):a&&"function"===typeof a.addListener&&"function"===typeof a.removeListener&&(a.addListener(c,b),k=function(){return a.removeListener(c,b)});g.add(new e.Subscription(k))};d.prototype._subscribe=function(a){var c=this.selector;d.setupSubscription(this.sourceObj,this.eventName,c?function(){for(var d=
[],e=0;e<arguments.length;e++)d[e-0]=arguments[e];d=l.tryCatch(c).apply(void 0,d);d===g.errorObject?a.error(g.errorObject.e):a.next(d)}:function(d){return a.next(d)},a,this.options)};return d}(b.Observable);f.FromEventObservable=a},{"../Observable":5,"../Subscription":14,"../util/errorObject":330,"../util/isFunction":333,"../util/tryCatch":343}],154:[function(a,b,f){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=
null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a("../Observable");var l=a("../Subscription");a=function(a){function b(e,c,d){a.call(this);this.addHandler=e;this.removeHandler=c;this.selector=d}h(b,a);b.create=function(a,c,d){return new b(a,c,d)};b.prototype._subscribe=function(a){var c=this,d=this.removeHandler,m=this.selector?function(){for(var d=[],m=0;m<arguments.length;m++)d[m-0]=arguments[m];c._callSelector(a,d)}:function(d){a.next(d)};this._callAddHandler(m,a);a.add(new l.Subscription(function(){d(m)}))};
b.prototype._callSelector=function(a,c){try{var d=this.selector.apply(this,c);a.next(d)}catch(m){a.error(m)}};b.prototype._callAddHandler=function(a,c){try{this.addHandler(a)}catch(d){c.error(d)}};return b}(b.Observable);f.FromEventPatternObservable=a},{"../Observable":5,"../Subscription":14}],155:[function(a,b,f){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,
new c)},l=a("../util/isArray"),k=a("../util/isPromise"),g=a("./PromiseObservable"),e=a("./IteratorObservable"),c=a("./ArrayObservable"),d=a("./ArrayLikeObservable"),m=a("../symbol/iterator"),n=a("../Observable"),q=a("../operator/observeOn"),t=a("../symbol/observable");a=function(a){function b(d,c){a.call(this,null);this.ish=d;this.scheduler=c}h(b,a);b.create=function(a,f){if(null!=a){if("function"===typeof a[t.$$observable])return a instanceof n.Observable&&!f?a:new b(a,f);if(l.isArray(a))return new c.ArrayObservable(a,
f);if(k.isPromise(a))return new g.PromiseObservable(a,f);if("function"===typeof a[m.$$iterator]||"string"===typeof a)return new e.IteratorObservable(a,f);if(a&&"number"===typeof a.length)return new d.ArrayLikeObservable(a,f)}throw new TypeError((null!==a&&typeof a||a)+" is not observable");};b.prototype._subscribe=function(a){var d=this.ish,c=this.scheduler;return null==c?d[t.$$observable]().subscribe(a):d[t.$$observable]().subscribe(new q.ObserveOnSubscriber(a,c,0))};return b}(n.Observable);f.FromObservable=
a},{"../Observable":5,"../operator/observeOn":248,"../symbol/iterator":311,"../symbol/observable":312,"../util/isArray":331,"../util/isPromise":336,"./ArrayLikeObservable":144,"./ArrayObservable":145,"./IteratorObservable":159,"./PromiseObservable":163}],156:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};b=a("../Observable");var l=a("../util/isScheduler"),
k=function(a){return a};a=function(a){function e(c,d,e,b,f){a.call(this);this.initialState=c;this.condition=d;this.iterate=e;this.resultSelector=b;this.scheduler=f}h(e,a);e.create=function(a,d,m,b,g){return 1==arguments.length?new e(a.initialState,a.condition,a.iterate,a.resultSelector||k,a.scheduler):void 0===b||l.isScheduler(b)?new e(a,d,m,k,b):new e(a,d,m,b,g)};e.prototype._subscribe=function(a){var d=this.initialState;if(this.scheduler)return this.scheduler.schedule(e.dispatch,0,{subscriber:a,
iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:d});var m=this.condition,b=this.resultSelector,g=this.iterate;do{if(m){var f=void 0;try{f=m(d)}catch(k){a.error(k);break}if(!f){a.complete();break}}f=void 0;try{f=b(d)}catch(k){a.error(k);break}a.next(f);if(a.closed)break;try{d=g(d)}catch(k){a.error(k);break}}while(1)};e.dispatch=function(a){var d=a.subscriber,e=a.condition;if(!d.closed){if(a.needIterate)try{a.state=a.iterate(a.state)}catch(b){d.error(b);return}else a.needIterate=
!0;if(e){var g=void 0;try{g=e(a.state)}catch(b){d.error(b);return}if(!g){d.complete();return}if(d.closed)return}var f;try{f=a.resultSelector(a.state)}catch(b){d.error(b);return}if(!d.closed&&(d.next(f),!d.closed))return this.schedule(a)}};return e}(b.Observable);f.GenerateObservable=a},{"../Observable":5,"../util/isScheduler":337}],157:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):
(c.prototype=e.prototype,new c)};b=a("../Observable");var l=a("../util/subscribeToResult");a=a("../OuterSubscriber");b=function(a){function e(c,d,e){a.call(this);this.condition=c;this.thenSource=d;this.elseSource=e}h(e,a);e.create=function(a,d,m){return new e(a,d,m)};e.prototype._subscribe=function(a){return new k(a,this.condition,this.thenSource,this.elseSource)};return e}(b.Observable);f.IfObservable=b;var k=function(a){function e(c,d,e,b){a.call(this,c);this.condition=d;this.thenSource=e;this.elseSource=
b;this.tryIf()}h(e,a);e.prototype.tryIf=function(){var a=this.condition,d=this.thenSource,e=this.elseSource,b;try{(a=(b=a())?d:e)?this.add(l.subscribeToResult(this,a)):this._complete()}catch(g){this._error(g)}};return e}(a.OuterSubscriber)},{"../Observable":5,"../OuterSubscriber":7,"../util/subscribeToResult":341}],158:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=
e.prototype,new c)},l=a("../util/isNumeric");b=a("../Observable");var k=a("../scheduler/async");a=function(a){function e(c,d){void 0===c&&(c=0);void 0===d&&(d=k.async);a.call(this);this.period=c;this.scheduler=d;if(!l.isNumeric(c)||0>c)this.period=0;d&&"function"===typeof d.schedule||(this.scheduler=k.async)}h(e,a);e.create=function(a,d){void 0===a&&(a=0);void 0===d&&(d=k.async);return new e(a,d)};e.dispatch=function(a){var d=a.subscriber,e=a.period;d.next(a.index);d.closed||(a.index+=1,this.schedule(a,
e))};e.prototype._subscribe=function(a){var d=this.period;a.add(this.scheduler.schedule(e.dispatch,d,{index:0,subscriber:a,period:d}))};return e}(b.Observable);f.IntervalObservable=a},{"../Observable":5,"../scheduler/async":309,"../util/isNumeric":334}],159:[function(a,b,f){var h=this&&this.__extends||function(a,c){function e(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},l=a("../util/root");b=a("../Observable");
var k=a("../symbol/iterator");a=function(a){function c(m,b){a.call(this);this.scheduler=b;if(null==m)throw Error("iterator cannot be null.");var f;if((f=m[k.$$iterator])||"string"!==typeof m)if(f||void 0===m.length){if(!f)throw new TypeError("object is not iterable");f=m[k.$$iterator]()}else f=new e(m);else f=new g(m);this.iterator=f}h(c,a);c.create=function(a,d){return new c(a,d)};c.dispatch=function(a){var d=a.index,c=a.iterator,e=a.subscriber;a.hasError?e.error(a.error):(c=c.next(),c.done?e.complete():
(e.next(c.value),a.index=d+1,e.closed||this.schedule(a)))};c.prototype._subscribe=function(a){var d=this.iterator,e=this.scheduler;if(e)return e.schedule(c.dispatch,0,{index:0,iterator:d,subscriber:a});do{e=d.next();if(e.done){a.complete();break}else a.next(e.value);if(a.closed)break}while(1)};return c}(b.Observable);f.IteratorObservable=a;var g=function(){function a(d,c,e){void 0===c&&(c=0);void 0===e&&(e=d.length);this.str=d;this.idx=c;this.len=e}a.prototype[k.$$iterator]=function(){return this};
a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}};return a}(),e=function(){function a(d,e,b){void 0===e&&(e=0);if(void 0===b)if(b=+d.length,isNaN(b))b=0;else if(0!==b&&"number"===typeof b&&l.root.isFinite(b)){var g;g=+b;g=0===g?g:isNaN(g)?g:0>g?-1:1;b=g*Math.floor(Math.abs(b));b=0>=b?0:b>c?c:b}this.arr=d;this.idx=e;this.len=b}a.prototype[k.$$iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?
{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}};return a}(),c=Math.pow(2,53)-1},{"../Observable":5,"../symbol/iterator":311,"../util/root":340}],160:[function(a,b,f){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a("../Observable");var l=a("../observable/ConnectableObservable");a=function(a){function b(e,c,d){a.call(this);this.source=e;this.subjectFactory=
c;this.selector=d}h(b,a);b.prototype._subscribe=function(a){var c=this.selector,d=new l.ConnectableObservable(this.source,this.subjectFactory);a=c(d).subscribe(a);a.add(d.connect());return a};return b}(b.Observable);f.MulticastObservable=a},{"../Observable":5,"../observable/ConnectableObservable":148}],161:[function(a,b,f){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,
new e)};b=a("../Observable");var l=a("../util/noop");a=function(a){function b(){a.call(this)}h(b,a);b.create=function(){return new b};b.prototype._subscribe=function(a){l.noop()};return b}(b.Observable);f.NeverObservable=a},{"../Observable":5,"../util/noop":338}],162:[function(a,b,f){function h(a){var b=a.obj,e=a.keys,c=a.index,d=a.subscriber;c===a.length?d.complete():(e=e[c],d.next([e,b[e]]),a.index=c+1,this.schedule(a))}var l=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};a=function(a){function b(e,c){a.call(this);this.obj=e;this.scheduler=c;this.keys=Object.keys(e)}l(b,a);b.create=function(a,c){return new b(a,c)};b.prototype._subscribe=function(a){var c=this.keys,d=this.scheduler,b=c.length;if(d)return d.schedule(h,0,{obj:this.obj,keys:c,length:b,index:0,subscriber:a});for(d=0;d<b;d++){var g=c[d];a.next([g,this.obj[g]])}a.complete()};return b}(a("../Observable").Observable);f.PairsObservable=
a},{"../Observable":5}],163:[function(a,b,f){function h(a){var c=a.value;a=a.subscriber;a.closed||(a.next(c),a.complete())}function l(a){var c=a.err;a=a.subscriber;a.closed||a.error(c)}var k=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},g=a("../util/root");a=function(a){function c(d,c){a.call(this);this.promise=d;this.scheduler=c}k(c,a);c.create=function(a,e){return new c(a,
e)};c.prototype._subscribe=function(a){var c=this,e=this.promise,b=this.scheduler;if(null==b)this._isScalar?a.closed||(a.next(this.value),a.complete()):e.then(function(e){c.value=e;c._isScalar=!0;a.closed||(a.next(e),a.complete())},function(c){a.closed||a.error(c)}).then(null,function(a){g.root.setTimeout(function(){throw a;})});else if(this._isScalar){if(!a.closed)return b.schedule(h,0,{value:this.value,subscriber:a})}else e.then(function(e){c.value=e;c._isScalar=!0;a.closed||a.add(b.schedule(h,
0,{value:e,subscriber:a}))},function(c){a.closed||a.add(b.schedule(l,0,{err:c,subscriber:a}))}).then(null,function(a){g.root.setTimeout(function(){throw a;})})};return c}(a("../Observable").Observable);f.PromiseObservable=a},{"../Observable":5,"../util/root":340}],164:[function(a,b,f){var h=this&&this.__extends||function(a,b){function g(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)};a=function(a){function b(g,
e,c){a.call(this);this.start=g;this._count=e;this.scheduler=c}h(b,a);b.create=function(a,e,c){void 0===a&&(a=0);void 0===e&&(e=0);return new b(a,e,c)};b.dispatch=function(a){var e=a.start,c=a.index,d=a.subscriber;c>=a.count?d.complete():(d.next(e),d.closed||(a.index=c+1,a.start=e+1,this.schedule(a)))};b.prototype._subscribe=function(a){var e=0,c=this.start,d=this._count,m=this.scheduler;if(m)return m.schedule(b.dispatch,0,{index:e,count:d,start:c,subscriber:a});do{if(e++>=d){a.complete();break}a.next(c++);
if(a.closed)break}while(1)};return b}(a("../Observable").Observable);f.RangeObservable=a},{"../Observable":5}],165:[function(a,b,f){var h=this&&this.__extends||function(a,b){function g(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)};a=function(a){function b(g,e){a.call(this);this.value=g;this.scheduler=e;this._isScalar=!0;e&&(this._isScalar=!1)}h(b,a);b.create=function(a,e){return new b(a,e)};b.dispatch=function(a){var e=
a.value,c=a.subscriber;a.done?c.complete():(c.next(e),c.closed||(a.done=!0,this.schedule(a)))};b.prototype._subscribe=function(a){var e=this.value,c=this.scheduler;if(c)return c.schedule(b.dispatch,0,{done:!1,value:e,subscriber:a});a.next(e);a.closed||a.complete()};return b}(a("../Observable").Observable);f.ScalarObservable=a},{"../Observable":5}],166:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=
null===e?Object.create(e):(c.prototype=e.prototype,new c)};b=a("../Observable");var l=a("../scheduler/asap"),k=a("../util/isNumeric");a=function(a){function e(c,d,e){void 0===d&&(d=0);void 0===e&&(e=l.asap);a.call(this);this.source=c;this.delayTime=d;this.scheduler=e;if(!k.isNumeric(d)||0>d)this.delayTime=0;e&&"function"===typeof e.schedule||(this.scheduler=l.asap)}h(e,a);e.create=function(a,d,b){void 0===d&&(d=0);void 0===b&&(b=l.asap);return new e(a,d,b)};e.dispatch=function(a){return a.source.subscribe(a.subscriber)};
e.prototype._subscribe=function(a){return this.scheduler.schedule(e.dispatch,this.delayTime,{source:this.source,subscriber:a})};return e}(b.Observable);f.SubscribeOnObservable=a},{"../Observable":5,"../scheduler/asap":308,"../util/isNumeric":334}],167:[function(a,b,f){var h=this&&this.__extends||function(a,d){function e(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)},l=a("../util/isNumeric");b=a("../Observable");
var k=a("../scheduler/async"),g=a("../util/isScheduler"),e=a("../util/isDate");a=function(a){function d(d,b,f){void 0===d&&(d=0);a.call(this);this.period=-1;this.dueTime=0;l.isNumeric(b)?this.period=1>Number(b)&&1||Number(b):g.isScheduler(b)&&(f=b);g.isScheduler(f)||(f=k.async);this.scheduler=f;this.dueTime=e.isDate(d)?+d-this.scheduler.now():d}h(d,a);d.create=function(a,c,e){void 0===a&&(a=0);return new d(a,c,e)};d.dispatch=function(a){var d=a.index,c=a.period,e=a.subscriber;e.next(d);if(!e.closed){if(-1===
c)return e.complete();a.index=d+1;this.schedule(a,c)}};d.prototype._subscribe=function(a){return this.scheduler.schedule(d.dispatch,this.dueTime,{index:0,period:this.period,subscriber:a})};return d}(b.Observable);f.TimerObservable=a},{"../Observable":5,"../scheduler/async":309,"../util/isDate":332,"../util/isNumeric":334,"../util/isScheduler":337}],168:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=
null===e?Object.create(e):(c.prototype=e.prototype,new c)};b=a("../Observable");var l=a("../util/subscribeToResult");a=a("../OuterSubscriber");b=function(a){function e(c,d){a.call(this);this.resourceFactory=c;this.observableFactory=d}h(e,a);e.create=function(a,d){return new e(a,d)};e.prototype._subscribe=function(a){var d=this.resourceFactory,e=this.observableFactory,b;try{return b=d(),new k(a,b,e)}catch(g){a.error(g)}};return e}(b.Observable);f.UsingObservable=b;var k=function(a){function e(c,d,
e){a.call(this,c);this.resource=d;this.observableFactory=e;c.add(d);this.tryUse()}h(e,a);e.prototype.tryUse=function(){try{var a=this.observableFactory.call(this,this.resource);a&&this.add(l.subscribeToResult(this,a))}catch(d){this._error(d)}};return e}(a.OuterSubscriber)},{"../Observable":5,"../OuterSubscriber":7,"../util/subscribeToResult":341}],169:[function(a,b,f){a=a("./BoundCallbackObservable");f.bindCallback=a.BoundCallbackObservable.create},{"./BoundCallbackObservable":146}],170:[function(a,
b,f){a=a("./BoundNodeCallbackObservable");f.bindNodeCallback=a.BoundNodeCallbackObservable.create},{"./BoundNodeCallbackObservable":147}],171:[function(a,b,f){var h=a("../util/isScheduler"),l=a("../util/isArray"),k=a("./ArrayObservable"),g=a("../operator/combineLatest");f.combineLatest=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var d=c=null;h.isScheduler(a[a.length-1])&&(d=a.pop());"function"===typeof a[a.length-1]&&(c=a.pop());1===a.length&&l.isArray(a[0])&&(a=a[0]);return(new k.ArrayObservable(a,
d)).lift(new g.CombineLatestOperator(c))}},{"../operator/combineLatest":205,"../util/isArray":331,"../util/isScheduler":337,"./ArrayObservable":145}],172:[function(a,b,f){a=a("../operator/concat");f.concat=a.concatStatic},{"../operator/concat":206}],173:[function(a,b,f){a=a("./DeferObservable");f.defer=a.DeferObservable.create},{"./DeferObservable":149}],174:[function(a,b,f){function h(a,d){void 0===d&&(d=null);return new p({method:"GET",url:a,headers:d})}function l(a,d,c){return new p({method:"POST",
url:a,body:d,headers:c})}function k(a,d){return new p({method:"DELETE",url:a,headers:d})}function g(a,d,c){return new p({method:"PUT",url:a,body:d,headers:c})}function e(a,d){return(new p({method:"GET",url:a,responseType:"json",headers:d})).lift(new t.MapOperator(function(a,d){return a.response},null))}var c=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},d=a("../../util/root"),
m=a("../../util/tryCatch"),n=a("../../util/errorObject");b=a("../../Observable");var q=a("../../Subscriber"),t=a("../../operator/map");f.ajaxGet=h;f.ajaxPost=l;f.ajaxDelete=k;f.ajaxPut=g;f.ajaxGetJSON=e;var p=function(a){function b(c){a.call(this);var e={async:!0,createXHR:function(){var a;if(this.crossDomain)if(d.root.XMLHttpRequest)a=new d.root.XMLHttpRequest,"withCredentials"in a&&(a.withCredentials=!!this.withCredentials);else if(d.root.XDomainRequest)a=new d.root.XDomainRequest;else throw Error("CORS is not supported by your browser");
else if(d.root.XMLHttpRequest)a=new d.root.XMLHttpRequest;else{var c=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],b=0;3>b;b++)try{c=e[b];new d.root.ActiveXObject(c);break}catch(m){}a=new d.root.ActiveXObject(c)}catch(m){throw Error("XMLHttpRequest is not supported by your browser");}}return a},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"===typeof c)e.url=c;else for(var m in c)c.hasOwnProperty(m)&&(e[m]=c[m]);
this.request=e}c(b,a);b.prototype._subscribe=function(a){return new v(a,this.request)};b.create=function(){var a=function(a){return new b(a)};a.get=h;a.post=l;a["delete"]=k;a.put=g;a.getJSON=e;return a}();return b}(b.Observable);f.AjaxObservable=p;var v=function(a){function e(c,b){a.call(this,c);this.request=b;this.done=!1;var m=b.headers=b.headers||{};b.crossDomain||m["X-Requested-With"]||(m["X-Requested-With"]="XMLHttpRequest");"Content-Type"in m||d.root.FormData&&b.body instanceof d.root.FormData||
"undefined"===typeof b.body||(m["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8");b.body=this.serializeBody(b.body,b.headers["Content-Type"]);this.send()}c(e,a);e.prototype.next=function(a){this.done=!0;var d=this.destination;a=new w(a,this.xhr,this.request);d.next(a)};e.prototype.send=function(){var a=this.request,d=this.request,c=d.user,e=d.method,b=d.url,g=d.async,f=d.password,q=d.headers,d=d.body,k=m.tryCatch(a.createXHR).call(a);if(k===n.errorObject)this.error(n.errorObject.e);
else{this.xhr=k;if((c?m.tryCatch(k.open).call(k,e,b,g,c,f):m.tryCatch(k.open).call(k,e,b,g))===n.errorObject)return this.error(n.errorObject.e),null;k.timeout=a.timeout;k.responseType=a.responseType;this.setHeaders(k,q);this.setupEvents(k,a);d?k.send(d):k.send()}return k};e.prototype.serializeBody=function(a,c){if(!a||"string"===typeof a||d.root.FormData&&a instanceof d.root.FormData)return a;if(c){var e=c.indexOf(";");-1!==e&&(c=c.substring(0,e))}switch(c){case "application/x-www-form-urlencoded":return Object.keys(a).map(function(d){return encodeURI(d)+
"="+encodeURI(a[d])}).join("&");case "application/json":return JSON.stringify(a);default:return a}};e.prototype.setHeaders=function(a,d){for(var c in d)d.hasOwnProperty(c)&&a.setRequestHeader(c,d[c])};e.prototype.setupEvents=function(a,c){var e=c.progressSubscriber;a.ontimeout=function A(a){var d=A.subscriber,c=A.progressSubscriber,e=A.request;c&&c.error(a);d.error(new x(this,e))};a.ontimeout.request=c;a.ontimeout.subscriber=this;a.ontimeout.progressSubscriber=e;a.upload&&"withCredentials"in a&&d.root.XDomainRequest&&
(e&&(a.onprogress=function u(a){u.progressSubscriber.next(a)},a.onprogress.progressSubscriber=e),a.onerror=function u(a){var d=u.progressSubscriber,c=u.subscriber,e=u.request;d&&d.error(a);c.error(new r("ajax error",this,e))},a.onerror.request=c,a.onerror.subscriber=this,a.onerror.progressSubscriber=e);a.onreadystatechange=function u(a){var d=u.subscriber,c=u.progressSubscriber,e=u.request;if(4===this.readyState){var b=1223===this.status?204:this.status,m="text"===this.responseType?this.response||
this.responseText:this.response;0===b&&(b=m?200:0);200<=b&&300>b?(c&&c.complete(),d.next(a),d.complete()):(c&&c.error(a),d.error(new r("ajax error "+b,this,e)))}};a.onreadystatechange.subscriber=this;a.onreadystatechange.progressSubscriber=e;a.onreadystatechange.request=c};e.prototype.unsubscribe=function(){var d=this.xhr;!this.done&&d&&4!==d.readyState&&d.abort();a.prototype.unsubscribe.call(this)};return e}(q.Subscriber);f.AjaxSubscriber=v;var w=function(){return function(a,d,c){this.originalEvent=
a;this.xhr=d;this.request=c;this.status=d.status;this.responseType=d.responseType||c.responseType;switch(this.responseType){case "json":this.response="response"in d?d.responseType?d.response:JSON.parse(d.response||d.responseText||"null"):JSON.parse(d.responseText||"null");break;case "xml":this.response=d.responseXML;break;default:this.response="response"in d?d.response:d.responseText}}}();f.AjaxResponse=w;var r=function(a){function d(c,e,b){a.call(this,c);this.message=c;this.xhr=e;this.request=b;
this.status=e.status}c(d,a);return d}(Error);f.AjaxError=r;var x=function(a){function d(c,e){a.call(this,"ajax timeout",c,e)}c(d,a);return d}(r);f.AjaxTimeoutError=x},{"../../Observable":5,"../../Subscriber":13,"../../operator/map":237,"../../util/errorObject":330,"../../util/root":340,"../../util/tryCatch":343}],175:[function(a,b,f){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(c.prototype=
d.prototype,new c)},l=a("../../Subject"),k=a("../../Subscriber"),g=a("../../Observable"),e=a("../../Subscription"),c=a("../../util/root"),d=a("../../ReplaySubject"),m=a("../../util/tryCatch"),n=a("../../util/errorObject"),q=a("../../util/assign");a=function(a){function b(e,m){if(e instanceof g.Observable)a.call(this,m,e);else{a.call(this);this.WebSocketCtor=c.root.WebSocket;this._output=new l.Subject;"string"===typeof e?this.url=e:q.assign(this,e);if(!this.WebSocketCtor)throw Error("no WebSocket constructor can be found");
this.destination=new d.ReplaySubject}}h(b,a);b.prototype.resultSelector=function(a){return JSON.parse(a.data)};b.create=function(a){return new b(a)};b.prototype.lift=function(a){var d=new b(this,this.destination);d.operator=a;return d};b.prototype.multiplex=function(a,d,c){var e=this;return new g.Observable(function(b){var g=m.tryCatch(a)();g===n.errorObject?b.error(n.errorObject.e):e.next(g);var f=e.subscribe(function(a){var d=m.tryCatch(c)(a);d===n.errorObject?b.error(n.errorObject.e):d&&b.next(a)},
function(a){return b.error(a)},function(){return b.complete()});return function(){var a=m.tryCatch(d)();a===n.errorObject?b.error(n.errorObject.e):e.next(a);f.unsubscribe()}})};b.prototype._connectSocket=function(){var a=this,c=this.WebSocketCtor,b=this._output,g=null;try{this.socket=g=this.protocol?new c(this.url,this.protocol):new c(this.url)}catch(f){b.error(f);return}var q=new e.Subscription(function(){a.socket=null;g&&1===g.readyState&&g.close()});g.onopen=function(c){var e=a.openObserver;e&&
e.next(c);c=a.destination;a.destination=k.Subscriber.create(function(a){return 1===g.readyState&&g.send(a)},function(c){var e=a.closingObserver;e&&e.next(void 0);c&&c.code?g.close(c.code,c.reason):b.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }"));a.destination=new d.ReplaySubject;a.socket=null},function(){var c=a.closingObserver;c&&c.next(void 0);g.close();a.destination=new d.ReplaySubject;a.socket=
null});c&&c instanceof d.ReplaySubject&&q.add(c.subscribe(a.destination))};g.onerror=function(a){return b.error(a)};g.onclose=function(d){var c=a.closeObserver;c&&c.next(d);d.wasClean?b.complete():b.error(d)};g.onmessage=function(d){d=m.tryCatch(a.resultSelector)(d);d===n.errorObject?b.error(n.errorObject.e):b.next(d)}};b.prototype._subscribe=function(a){var d=this,c=this.source;if(c)return c.subscribe(a);this.socket||this._connectSocket();c=new e.Subscription;c.add(this._output.subscribe(a));c.add(function(){var a=
d.socket;0===d._output.observers.length&&a&&1===a.readyState&&(a.close(),d.socket=null)});return c};b.prototype.unsubscribe=function(){var c=this.source,e=this.socket;e&&1===e.readyState&&(e.close(),this.socket=null);a.prototype.unsubscribe.call(this);c||(this.destination=new d.ReplaySubject)};return b}(l.AnonymousSubject);f.WebSocketSubject=a},{"../../Observable":5,"../../ReplaySubject":8,"../../Subject":11,"../../Subscriber":13,"../../Subscription":14,"../../util/assign":329,"../../util/errorObject":330,
"../../util/root":340,"../../util/tryCatch":343}],176:[function(a,b,f){a=a("./AjaxObservable");f.ajax=a.AjaxObservable.create},{"./AjaxObservable":174}],177:[function(a,b,f){a=a("./WebSocketSubject");f.webSocket=a.WebSocketSubject.create},{"./WebSocketSubject":175}],178:[function(a,b,f){a=a("./EmptyObservable");f.empty=a.EmptyObservable.create},{"./EmptyObservable":150}],179:[function(a,b,f){a=a("./ForkJoinObservable");f.forkJoin=a.ForkJoinObservable.create},{"./ForkJoinObservable":152}],180:[function(a,
b,f){a=a("./FromObservable");f.from=a.FromObservable.create},{"./FromObservable":155}],181:[function(a,b,f){a=a("./FromEventObservable");f.fromEvent=a.FromEventObservable.create},{"./FromEventObservable":153}],182:[function(a,b,f){a=a("./FromEventPatternObservable");f.fromEventPattern=a.FromEventPatternObservable.create},{"./FromEventPatternObservable":154}],183:[function(a,b,f){a=a("./PromiseObservable");f.fromPromise=a.PromiseObservable.create},{"./PromiseObservable":163}],184:[function(a,b,f){a=
a("./IfObservable");f._if=a.IfObservable.create},{"./IfObservable":157}],185:[function(a,b,f){a=a("./IntervalObservable");f.interval=a.IntervalObservable.create},{"./IntervalObservable":158}],186:[function(a,b,f){a=a("../operator/merge");f.merge=a.mergeStatic},{"../operator/merge":241}],187:[function(a,b,f){a=a("./NeverObservable");f.never=a.NeverObservable.create},{"./NeverObservable":161}],188:[function(a,b,f){a=a("./ArrayObservable");f.of=a.ArrayObservable.of},{"./ArrayObservable":145}],189:[function(a,
b,f){a=a("./PairsObservable");f.pairs=a.PairsObservable.create},{"./PairsObservable":162}],190:[function(a,b,f){a=a("./RangeObservable");f.range=a.RangeObservable.create},{"./RangeObservable":164}],191:[function(a,b,f){a=a("./ErrorObservable");f._throw=a.ErrorObservable.create},{"./ErrorObservable":151}],192:[function(a,b,f){a=a("./TimerObservable");f.timer=a.TimerObservable.create},{"./TimerObservable":167}],193:[function(a,b,f){a=a("./UsingObservable");f.using=a.UsingObservable.create},{"./UsingObservable":168}],
194:[function(a,b,f){a=a("../operator/zip");f.zip=a.zipStatic},{"../operator/zip":295}],195:[function(a,b,f){var h=this&&this.__extends||function(a,c){function e(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},l=a("../util/tryCatch"),k=a("../util/errorObject");b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");f.audit=function(a){return this.lift(new e(a))};var e=function(){function a(d){this.durationSelector=
d}a.prototype.call=function(a,d){return d._subscribe(new c(a,this.durationSelector))};return a}(),c=function(a){function c(e,b){a.call(this,e);this.durationSelector=b;this.hasValue=!1}h(c,a);c.prototype._next=function(a){this.value=a;this.hasValue=!0;this.throttled||(a=l.tryCatch(this.durationSelector)(a),a===k.errorObject?this.destination.error(k.errorObject.e):this.add(this.throttled=g.subscribeToResult(this,a)))};c.prototype.clearThrottle=function(){var a=this.value,d=this.hasValue,c=this.throttled;
c&&(this.remove(c),this.throttled=null,c.unsubscribe());d&&(this.value=null,this.hasValue=!1,this.destination.next(a))};c.prototype.notifyNext=function(a,d,c,e){this.clearThrottle()};c.prototype.notifyComplete=function(){this.clearThrottle()};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],196:[function(a,b,f){function h(a){a.clearThrottle()}var l=this&&this.__extends||function(a,d){function e(){this.constructor=
a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)},k=a("../scheduler/async");a=a("../Subscriber");f.auditTime=function(a,d){void 0===d&&(d=k.async);return this.lift(new g(a,d))};var g=function(){function a(d,c){this.duration=d;this.scheduler=c}a.prototype.call=function(a,c){return c._subscribe(new e(a,this.duration,this.scheduler))};return a}(),e=function(a){function d(d,e,b){a.call(this,d);this.duration=e;this.scheduler=b;this.hasValue=
!1}l(d,a);d.prototype._next=function(a){this.value=a;this.hasValue=!0;this.throttled||this.add(this.throttled=this.scheduler.schedule(h,this.duration,this))};d.prototype.clearThrottle=function(){var a=this.value,d=this.hasValue,c=this.throttled;c&&(this.remove(c),this.throttled=null,c.unsubscribe());d&&(this.value=null,this.hasValue=!1,this.destination.next(a))};return d}(a.Subscriber)},{"../Subscriber":13,"../scheduler/async":309}],197:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=
a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f.buffer=function(a){return this.lift(new k(a))};var k=function(){function a(c){this.closingNotifier=c}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.closingNotifier))};return a}(),g=function(a){function c(d,c){a.call(this,d);this.buffer=[];this.add(l.subscribeToResult(this,c))}h(c,a);c.prototype._next=
function(a){this.buffer.push(a)};c.prototype.notifyNext=function(a,c,e,b,g){a=this.buffer;this.buffer=[];this.destination.next(a)};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],198:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};a=a("../Subscriber");f.bufferCount=function(a,e){void 0===e&&(e=null);
return this.lift(new l(a,e))};var l=function(){function a(e,c){this.bufferSize=e;this.startBufferEvery=c}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.bufferSize,this.startBufferEvery))};return a}(),k=function(a){function e(c,d,e){a.call(this,c);this.bufferSize=d;this.startBufferEvery=e;this.buffers=[[]];this.count=0}h(e,a);e.prototype._next=function(a){var d=this.count+=1,e=this.destination,b=this.bufferSize,g=this.buffers,f=g.length,k=-1;0===d%(null==this.startBufferEvery?b:this.startBufferEvery)&&
g.push([]);for(d=0;d<f;d++){var l=g[d];l.push(a);l.length===b&&(k=d,e.next(l))}-1!==k&&g.splice(k,1)};e.prototype._complete=function(){for(var c=this.destination,d=this.buffers;0<d.length;){var e=d.shift();0<e.length&&c.next(e)}a.prototype._complete.call(this)};return e}(a.Subscriber)},{"../Subscriber":13}],199:[function(a,b,f){function h(a){var d=a.subscriber,c=a.context;c&&d.closeContext(c);d.closed||(a.context=d.openContext(),a.context.closeAction=this.schedule(a,a.bufferTimeSpan))}function l(a){var d=
a.bufferCreationInterval,c=a.bufferTimeSpan,e=a.subscriber,b=a.scheduler,m=e.openContext();e.closed||(e.add(m.closeAction=b.schedule(k,c,{subscriber:e,context:m})),this.schedule(a,d))}function k(a){a.subscriber.closeContext(a.context)}var g=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},e=a("../scheduler/async");b=a("../Subscriber");var c=a("../util/isScheduler");
f.bufferTime=function(a){var b=arguments.length,m=e.async;c.isScheduler(arguments[arguments.length-1])&&(m=arguments[arguments.length-1],b--);var g=null;2<=b&&(g=arguments[1]);var n=Number.POSITIVE_INFINITY;3<=b&&(n=arguments[2]);return this.lift(new d(a,g,n,m))};var d=function(){function a(d,c,e,b){this.bufferTimeSpan=d;this.bufferCreationInterval=c;this.maxBufferSize=e;this.scheduler=b}a.prototype.call=function(a,d){return d._subscribe(new n(a,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,
this.scheduler))};return a}(),m=function(){return function(){this.buffer=[]}}(),n=function(a){function d(c,e,b,m,g){a.call(this,c);this.bufferTimeSpan=e;this.bufferCreationInterval=b;this.maxBufferSize=m;this.scheduler=g;this.contexts=[];c=this.openContext();(this.timespanOnly=null==b||0>b)?this.add(c.closeAction=g.schedule(h,e,{subscriber:this,context:c,bufferTimeSpan:e})):(m={bufferTimeSpan:e,bufferCreationInterval:b,subscriber:this,scheduler:g},this.add(c.closeAction=g.schedule(k,e,{subscriber:this,
context:c})),this.add(g.schedule(l,b,m)))}g(d,a);d.prototype._next=function(a){for(var d=this.contexts,c=d.length,e,b=0;b<c;b++){var m=d[b],g=m.buffer;g.push(a);g.length==this.maxBufferSize&&(e=m)}if(e)this.onBufferFull(e)};d.prototype._error=function(d){this.contexts.length=0;a.prototype._error.call(this,d)};d.prototype._complete=function(){for(var d=this.contexts,c=this.destination;0<d.length;){var e=d.shift();c.next(e.buffer)}a.prototype._complete.call(this)};d.prototype._unsubscribe=function(){this.contexts=
null};d.prototype.onBufferFull=function(a){this.closeContext(a);a=a.closeAction;a.unsubscribe();this.remove(a);if(this.timespanOnly){a=this.openContext();var d=this.bufferTimeSpan;this.add(a.closeAction=this.scheduler.schedule(h,d,{subscriber:this,context:a,bufferTimeSpan:d}))}};d.prototype.openContext=function(){var a=new m;this.contexts.push(a);return a};d.prototype.closeContext=function(a){this.destination.next(a.buffer);var d=this.contexts;0<=(d?d.indexOf(a):-1)&&d.splice(d.indexOf(a),1)};return d}(b.Subscriber)},
{"../Subscriber":13,"../scheduler/async":309,"../util/isScheduler":337}],200:[function(a,b,f){var h=this&&this.__extends||function(a,d){function e(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)},l=a("../Subscription"),k=a("../util/subscribeToResult");a=a("../OuterSubscriber");f.bufferToggle=function(a,d){return this.lift(new g(a,d))};var g=function(){function a(d,c){this.openings=d;this.closingSelector=c}a.prototype.call=
function(a,c){return c._subscribe(new e(a,this.openings,this.closingSelector))};return a}(),e=function(a){function d(d,e,b){a.call(this,d);this.openings=e;this.closingSelector=b;this.contexts=[];this.add(k.subscribeToResult(this,e))}h(d,a);d.prototype._next=function(a){for(var d=this.contexts,c=d.length,e=0;e<c;e++)d[e].buffer.push(a)};d.prototype._error=function(d){for(var e=this.contexts;0<e.length;){var b=e.shift();b.subscription.unsubscribe();b.buffer=null;b.subscription=null}this.contexts=null;
a.prototype._error.call(this,d)};d.prototype._complete=function(){for(var d=this.contexts;0<d.length;){var e=d.shift();this.destination.next(e.buffer);e.subscription.unsubscribe();e.buffer=null;e.subscription=null}this.contexts=null;a.prototype._complete.call(this)};d.prototype.notifyNext=function(a,d,c,e,b){a?this.closeBuffer(a):this.openBuffer(d)};d.prototype.notifyComplete=function(a){this.closeBuffer(a.context)};d.prototype.openBuffer=function(a){try{var d=this.closingSelector.call(this,a);d&&
this.trySubscribe(d)}catch(c){this._error(c)}};d.prototype.closeBuffer=function(a){var d=this.contexts;if(d&&a){var c=a.subscription;this.destination.next(a.buffer);d.splice(d.indexOf(a),1);this.remove(c);c.unsubscribe()}};d.prototype.trySubscribe=function(a){var d=this.contexts,c=new l.Subscription,e={buffer:[],subscription:c};d.push(e);a=k.subscribeToResult(this,a,e);!a||a.closed?this.closeBuffer(e):(a.context=e,this.add(a),c.add(a))};return d}(a.OuterSubscriber)},{"../OuterSubscriber":7,"../Subscription":14,
"../util/subscribeToResult":341}],201:[function(a,b,f){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},l=a("../Subscription"),k=a("../util/tryCatch"),g=a("../util/errorObject");b=a("../OuterSubscriber");var e=a("../util/subscribeToResult");f.bufferWhen=function(a){return this.lift(new c(a))};var c=function(){function a(d){this.closingSelector=d}a.prototype.call=
function(a,c){return c._subscribe(new d(a,this.closingSelector))};return a}(),d=function(a){function d(c,e){a.call(this,c);this.closingSelector=e;this.subscribing=!1;this.openBuffer()}h(d,a);d.prototype._next=function(a){this.buffer.push(a)};d.prototype._complete=function(){var d=this.buffer;d&&this.destination.next(d);a.prototype._complete.call(this)};d.prototype._unsubscribe=function(){this.buffer=null;this.subscribing=!1};d.prototype.notifyNext=function(a,d,c,e,b){this.openBuffer()};d.prototype.notifyComplete=
function(){this.subscribing?this.complete():this.openBuffer()};d.prototype.openBuffer=function(){var a=this.closingSubscription;a&&(this.remove(a),a.unsubscribe());(a=this.buffer)&&this.destination.next(a);this.buffer=[];var d=k.tryCatch(this.closingSelector)();d===g.errorObject?this.error(g.errorObject.e):(this.closingSubscription=a=new l.Subscription,this.add(a),this.subscribing=!0,a.add(e.subscribeToResult(this,d)),this.subscribing=!1)};return d}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../Subscription":14,
"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],202:[function(a,b,f){var h=a("../Observable"),l=a("../ReplaySubject");f.cache=function(a,b,e){void 0===a&&(a=Number.POSITIVE_INFINITY);void 0===b&&(b=Number.POSITIVE_INFINITY);var c,d=this,m=0,f,q=function(){return c=new l.ReplaySubject(a,b,e)};return new h.Observable(function(a){c||(c=q(),f=d.subscribe(function(a){return c.next(a)},function(a){var d=c;c=null;d.error(a)},function(){return c.complete()}));m++;c||(c=
q());var e=c.subscribe(a);return function(){m--;e&&e.unsubscribe();0===m&&f.unsubscribe()}})}},{"../Observable":5,"../ReplaySubject":8}],203:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f._catch=function(a){a=new k(a);var c=this.lift(a);return a.caught=c};var k=function(){function a(c){this.selector=
c}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.selector,this.caught))};return a}(),g=function(a){function c(d,c,b){a.call(this,d);this.selector=c;this.caught=b}h(c,a);c.prototype.error=function(a){if(!this.isStopped){var c=void 0;try{c=this.selector(a,this.caught)}catch(e){this.destination.error(e);return}this.unsubscribe();this.destination.remove(this);l.subscribeToResult(this,c)}};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],204:[function(a,
b,f){var h=a("./combineLatest");f.combineAll=function(a){return this.lift(new h.CombineLatestOperator(a))}},{"./combineLatest":205}],205:[function(a,b,f){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},l=a("../observable/ArrayObservable"),k=a("../util/isArray");b=a("../OuterSubscriber");var g=a("../util/subscribeToResult"),e={};f.combineLatest=function(){for(var a=
[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];d=null;"function"===typeof a[a.length-1]&&(d=a.pop());1===a.length&&k.isArray(a[0])&&(a=a[0]);a.unshift(this);return(new l.ArrayObservable(a)).lift(new c(d))};var c=function(){function a(d){this.project=d}a.prototype.call=function(a,c){return c._subscribe(new d(a,this.project))};return a}();f.CombineLatestOperator=c;var d=function(a){function d(c,e){a.call(this,c);this.project=e;this.active=0;this.values=[];this.observables=[]}h(d,a);d.prototype._next=
function(a){this.values.push(e);this.observables.push(a)};d.prototype._complete=function(){var a=this.observables,d=a.length;if(0===d)this.destination.complete();else{this.toRespond=this.active=d;for(var c=0;c<d;c++){var e=a[c];this.add(g.subscribeToResult(this,e,e,c))}}};d.prototype.notifyComplete=function(a){0===--this.active&&this.destination.complete()};d.prototype.notifyNext=function(a,d,c,b,m){a=this.values;b=a[c];b=this.toRespond?b===e?--this.toRespond:this.toRespond:0;a[c]=d;0===b&&(this.project?
this._tryProject(a):this.destination.next(a.slice()))};d.prototype._tryProject=function(a){var d;try{d=this.project.apply(this,a)}catch(c){this.destination.error(c);return}this.destination.next(d)};return d}(b.OuterSubscriber);f.CombineLatestSubscriber=d},{"../OuterSubscriber":7,"../observable/ArrayObservable":145,"../util/isArray":331,"../util/subscribeToResult":341}],206:[function(a,b,f){function h(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];c=null;l.isScheduler(a[a.length-1])&&
(c=a.pop());return(new k.ArrayObservable(a,c)).lift(new g.MergeAllOperator(1))}var l=a("../util/isScheduler"),k=a("../observable/ArrayObservable"),g=a("./mergeAll");f.concat=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return h.apply(void 0,[this].concat(a))};f.concatStatic=h},{"../observable/ArrayObservable":145,"../util/isScheduler":337,"./mergeAll":242}],207:[function(a,b,f){var h=a("./mergeAll");f.concatAll=function(){return this.lift(new h.MergeAllOperator(1))}},{"./mergeAll":242}],
208:[function(a,b,f){var h=a("./mergeMap");f.concatMap=function(a,b){return this.lift(new h.MergeMapOperator(a,b,1))}},{"./mergeMap":243}],209:[function(a,b,f){var h=a("./mergeMapTo");f.concatMapTo=function(a,b){return this.lift(new h.MergeMapToOperator(a,b,1))}},{"./mergeMapTo":244}],210:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};a=
a("../Subscriber");f.count=function(a){return this.lift(new l(a,this))};var l=function(){function a(e,c){this.predicate=e;this.source=c}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.predicate,this.source))};return a}(),k=function(a){function e(c,d,e){a.call(this,c);this.predicate=d;this.source=e;this.index=this.count=0}h(e,a);e.prototype._next=function(a){this.predicate?this._tryPredicate(a):this.count++};e.prototype._tryPredicate=function(a){var d;try{d=this.predicate(a,this.index++,
this.source)}catch(e){this.destination.error(e);return}d&&this.count++};e.prototype._complete=function(){this.destination.next(this.count);this.destination.complete()};return e}(a.Subscriber)},{"../Subscriber":13}],211:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f.debounce=
function(a){return this.lift(new k(a))};var k=function(){function a(c){this.durationSelector=c}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.durationSelector))};return a}(),g=function(a){function c(d,c){a.call(this,d);this.durationSelector=c;this.hasValue=!1;this.durationSubscription=null}h(c,a);c.prototype._next=function(a){try{var c=this.durationSelector.call(this,a);c&&this._tryNext(a,c)}catch(e){this.destination.error(e)}};c.prototype._complete=function(){this.emitValue();this.destination.complete()};
c.prototype._tryNext=function(a,c){var e=this.durationSubscription;this.value=a;this.hasValue=!0;e&&(e.unsubscribe(),this.remove(e));e=l.subscribeToResult(this,c);e.closed||this.add(this.durationSubscription=e)};c.prototype.notifyNext=function(a,c,e,b,g){this.emitValue()};c.prototype.notifyComplete=function(){this.emitValue()};c.prototype.emitValue=function(){if(this.hasValue){var d=this.value,c=this.durationSubscription;c&&(this.durationSubscription=null,c.unsubscribe(),this.remove(c));this.value=
null;this.hasValue=!1;a.prototype._next.call(this,d)}};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],212:[function(a,b,f){function h(a){a.debouncedNext()}var l=this&&this.__extends||function(a,d){function e(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)};b=a("../Subscriber");var k=a("../scheduler/async");f.debounceTime=function(a,d){void 0===d&&(d=k.async);return this.lift(new g(a,
d))};var g=function(){function a(d,c){this.dueTime=d;this.scheduler=c}a.prototype.call=function(a,c){return c._subscribe(new e(a,this.dueTime,this.scheduler))};return a}(),e=function(a){function d(d,e,b){a.call(this,d);this.dueTime=e;this.scheduler=b;this.lastValue=this.debouncedSubscription=null;this.hasValue=!1}l(d,a);d.prototype._next=function(a){this.clearDebounce();this.lastValue=a;this.hasValue=!0;this.add(this.debouncedSubscription=this.scheduler.schedule(h,this.dueTime,this))};d.prototype._complete=
function(){this.debouncedNext();this.destination.complete()};d.prototype.debouncedNext=function(){this.clearDebounce();this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)};d.prototype.clearDebounce=function(){var a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)};return d}(b.Subscriber)},{"../Subscriber":13,"../scheduler/async":309}],213:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=
a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};a=a("../Subscriber");f.defaultIfEmpty=function(a){void 0===a&&(a=null);return this.lift(new l(a))};var l=function(){function a(e){this.defaultValue=e}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.defaultValue))};return a}(),k=function(a){function e(c,d){a.call(this,c);this.defaultValue=d;this.isEmpty=!0}h(e,a);e.prototype._next=function(a){this.isEmpty=!1;this.destination.next(a)};
e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue);this.destination.complete()};return e}(a.Subscriber)},{"../Subscriber":13}],214:[function(a,b,f){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},l=a("../scheduler/async"),k=a("../util/isDate");b=a("../Subscriber");var g=a("../Notification");f.delay=function(a,d){void 0===
d&&(d=l.async);var c=k.isDate(a)?+a-d.now():Math.abs(a);return this.lift(new e(c,d))};var e=function(){function a(d,c){this.delay=d;this.scheduler=c}a.prototype.call=function(a,d){return d._subscribe(new c(a,this.delay,this.scheduler))};return a}(),c=function(a){function c(d,e,b){a.call(this,d);this.delay=e;this.scheduler=b;this.queue=[];this.errored=this.active=!1}h(c,a);c.dispatch=function(a){for(var d=a.source,c=d.queue,e=a.scheduler,b=a.destination;0<c.length&&0>=c[0].time-e.now();)c.shift().notification.observe(b);
0<c.length?(d=Math.max(0,c[0].time-e.now()),this.schedule(a,d)):d.active=!1};c.prototype._schedule=function(a){this.active=!0;this.add(a.schedule(c.dispatch,this.delay,{source:this,destination:this.destination,scheduler:a}))};c.prototype.scheduleNotification=function(a){if(!0!==this.errored){var c=this.scheduler;a=new d(c.now()+this.delay,a);this.queue.push(a);!1===this.active&&this._schedule(c)}};c.prototype._next=function(a){this.scheduleNotification(g.Notification.createNext(a))};c.prototype._error=
function(a){this.errored=!0;this.queue=[];this.destination.error(a)};c.prototype._complete=function(){this.scheduleNotification(g.Notification.createComplete())};return c}(b.Subscriber),d=function(){return function(a,d){this.time=a;this.notification=d}}()},{"../Notification":4,"../Subscriber":13,"../scheduler/async":309,"../util/isDate":332}],215:[function(a,b,f){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===
d?Object.create(d):(c.prototype=d.prototype,new c)};b=a("../Subscriber");var l=a("../Observable"),k=a("../OuterSubscriber"),g=a("../util/subscribeToResult");f.delayWhen=function(a,c){return c?(new d(this,c)).lift(new e(a)):this.lift(new e(a))};var e=function(){function a(d){this.delayDurationSelector=d}a.prototype.call=function(a,d){return d._subscribe(new c(a,this.delayDurationSelector))};return a}(),c=function(a){function d(c,e){a.call(this,c);this.delayDurationSelector=e;this.completed=!1;this.delayNotifierSubscriptions=
[];this.values=[]}h(d,a);d.prototype.notifyNext=function(a,d,c,e,b){this.destination.next(a);this.removeSubscription(b);this.tryComplete()};d.prototype.notifyError=function(a,d){this._error(a)};d.prototype.notifyComplete=function(a){(a=this.removeSubscription(a))&&this.destination.next(a);this.tryComplete()};d.prototype._next=function(a){try{var d=this.delayDurationSelector(a);d&&this.tryDelay(d,a)}catch(c){this.destination.error(c)}};d.prototype._complete=function(){this.completed=!0;this.tryComplete()};
d.prototype.removeSubscription=function(a){a.unsubscribe();a=this.delayNotifierSubscriptions.indexOf(a);var d=null;-1!==a&&(d=this.values[a],this.delayNotifierSubscriptions.splice(a,1),this.values.splice(a,1));return d};d.prototype.tryDelay=function(a,d){var c=g.subscribeToResult(this,a,d);this.add(c);this.delayNotifierSubscriptions.push(c);this.values.push(d)};d.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()};return d}(k.OuterSubscriber),
d=function(a){function d(c,e){a.call(this);this.source=c;this.subscriptionDelay=e}h(d,a);d.prototype._subscribe=function(a){this.subscriptionDelay.subscribe(new m(a,this.source))};return d}(l.Observable),m=function(a){function d(c,e){a.call(this);this.parent=c;this.source=e;this.sourceSubscribed=!1}h(d,a);d.prototype._next=function(a){this.subscribeToSource()};d.prototype._error=function(a){this.unsubscribe();this.parent.error(a)};d.prototype._complete=function(){this.subscribeToSource()};d.prototype.subscribeToSource=
function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))};return d}(b.Subscriber)},{"../Observable":5,"../OuterSubscriber":7,"../Subscriber":13,"../util/subscribeToResult":341}],216:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};a=a("../Subscriber");f.dematerialize=function(){return this.lift(new l)};
var l=function(){function a(){}a.prototype.call=function(a,c){return c._subscribe(new k(a))};return a}(),k=function(a){function e(c){a.call(this,c)}h(e,a);e.prototype._next=function(a){a.observe(this.destination)};return e}(a.Subscriber)},{"../Subscriber":13}],217:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");
var l=a("../util/subscribeToResult");f.distinct=function(a,c){return this.lift(new k(a,c))};var k=function(){function a(c,d){this.compare=c;this.flushes=d}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.compare,this.flushes))};return a}(),g=function(a){function c(d,c,b){a.call(this,d);this.values=[];"function"===typeof c&&(this.compare=c);b&&this.add(l.subscribeToResult(this,b))}h(c,a);c.prototype.notifyNext=function(a,c,e,b,g){this.values.length=0};c.prototype.notifyError=function(a,
c){this._error(a)};c.prototype._next=function(a){var c=this.values,e=c.length;try{for(var b=0;b<e;b++)if(this.compare(c[b],a))return}catch(g){this.destination.error(g);return}this.values.push(a);this.destination.next(a)};c.prototype.compare=function(a,c){return a===c};return c}(b.OuterSubscriber);f.DistinctSubscriber=g},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],218:[function(a,b,f){var h=a("./distinct");f.distinctKey=function(a,b,g){return h.distinct.call(this,function(e,c){return b?
b(e[a],c[a]):e[a]===c[a]},g)}},{"./distinct":217}],219:[function(a,b,f){var h=this&&this.__extends||function(a,d){function e(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)};b=a("../Subscriber");var l=a("../util/tryCatch"),k=a("../util/errorObject");f.distinctUntilChanged=function(a,d){return this.lift(new g(a,d))};var g=function(){function a(d,c){this.compare=d;this.keySelector=c}a.prototype.call=function(a,
c){return c._subscribe(new e(a,this.compare,this.keySelector))};return a}(),e=function(a){function d(d,e,b){a.call(this,d);this.keySelector=b;this.hasKey=!1;"function"===typeof e&&(this.compare=e)}h(d,a);d.prototype.compare=function(a,d){return a===d};d.prototype._next=function(a){var d=a;if(this.keySelector&&(d=l.tryCatch(this.keySelector)(a),d===k.errorObject))return this.destination.error(k.errorObject.e);var c=!1;if(this.hasKey){if(c=l.tryCatch(this.compare)(this.key,d),c===k.errorObject)return this.destination.error(k.errorObject.e)}else this.hasKey=
!0;!1===!!c&&(this.key=d,this.destination.next(a))};return d}(b.Subscriber)},{"../Subscriber":13,"../util/errorObject":330,"../util/tryCatch":343}],220:[function(a,b,f){var h=a("./distinctUntilChanged");f.distinctUntilKeyChanged=function(a,b){return h.distinctUntilChanged.call(this,function(g,e){return b?b(g[a],e[a]):g[a]===e[a]})}},{"./distinctUntilChanged":219}],221:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=
c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},l=a("../Subscriber");f._do=function(a,c,d){return this.lift(new k(a,c,d))};var k=function(){function a(c,d,e){this.nextOrObserver=c;this.error=d;this.complete=e}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.nextOrObserver,this.error,this.complete))};return a}(),g=function(a){function c(d,c,b,g){a.call(this,d);d=new l.Subscriber(c,b,g);d.syncErrorThrowable=!0;this.add(d);this.safeSubscriber=d}h(c,a);c.prototype._next=
function(a){var c=this.safeSubscriber;c.next(a);c.syncErrorThrown?this.destination.error(c.syncErrorValue):this.destination.next(a)};c.prototype._error=function(a){var c=this.safeSubscriber;c.error(a);c.syncErrorThrown?this.destination.error(c.syncErrorValue):this.destination.error(a)};c.prototype._complete=function(){var a=this.safeSubscriber;a.complete();a.syncErrorThrown?this.destination.error(a.syncErrorValue):this.destination.complete()};return c}(l.Subscriber)},{"../Subscriber":13}],222:[function(a,
b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../Subscriber");var l=a("../util/ArgumentOutOfRangeError");f.elementAt=function(a,c){return this.lift(new k(a,c))};var k=function(){function a(c,d){this.index=c;this.defaultValue=d;if(0>c)throw new l.ArgumentOutOfRangeError;}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.index,this.defaultValue))};
return a}(),g=function(a){function c(d,c,b){a.call(this,d);this.index=c;this.defaultValue=b}h(c,a);c.prototype._next=function(a){0===this.index--&&(this.destination.next(a),this.destination.complete())};c.prototype._complete=function(){var a=this.destination;0<=this.index&&("undefined"!==typeof this.defaultValue?a.next(this.defaultValue):a.error(new l.ArgumentOutOfRangeError));a.complete()};return c}(b.Subscriber)},{"../Subscriber":13,"../util/ArgumentOutOfRangeError":320}],223:[function(a,b,f){var h=
this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};a=a("../Subscriber");f.every=function(a,e){return this.lift(new l(a,e,this))};var l=function(){function a(e,c,d){this.predicate=e;this.thisArg=c;this.source=d}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.predicate,this.thisArg,this.source))};return a}(),k=function(a){function e(c,d,e,b){a.call(this,
c);this.predicate=d;this.thisArg=e;this.source=b;this.index=0;this.thisArg=e||this}h(e,a);e.prototype.notifyComplete=function(a){this.destination.next(a);this.destination.complete()};e.prototype._next=function(a){var d=!1;try{d=this.predicate.call(this.thisArg,a,this.index++,this.source)}catch(e){this.destination.error(e);return}d||this.notifyComplete(!1)};e.prototype._complete=function(){this.notifyComplete(!0)};return e}(a.Subscriber)},{"../Subscriber":13}],224:[function(a,b,f){var h=this&&this.__extends||
function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f.exhaust=function(){return this.lift(new k)};var k=function(){function a(){}a.prototype.call=function(a,d){return d._subscribe(new g(a))};return a}(),g=function(a){function c(d){a.call(this,d);this.hasSubscription=this.hasCompleted=!1}h(c,a);c.prototype._next=function(a){this.hasSubscription||
(this.hasSubscription=!0,this.add(l.subscribeToResult(this,a)))};c.prototype._complete=function(){this.hasCompleted=!0;this.hasSubscription||this.destination.complete()};c.prototype.notifyComplete=function(a){this.remove(a);this.hasSubscription=!1;this.hasCompleted&&this.destination.complete()};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],225:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&
(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f.exhaustMap=function(a,c){return this.lift(new k(a,c))};var k=function(){function a(c,d){this.project=c;this.resultSelector=d}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.project,this.resultSelector))};return a}(),g=function(a){function c(d,c,b){a.call(this,d);this.project=c;this.resultSelector=b;this.hasCompleted=this.hasSubscription=
!1;this.index=0}h(c,a);c.prototype._next=function(a){this.hasSubscription||this.tryNext(a)};c.prototype.tryNext=function(a){var c=this.index++,e=this.destination;try{var b=this.project(a,c);this.hasSubscription=!0;this.add(l.subscribeToResult(this,b,a,c))}catch(g){e.error(g)}};c.prototype._complete=function(){this.hasCompleted=!0;this.hasSubscription||this.destination.complete()};c.prototype.notifyNext=function(a,c,e,b,g){g=this.destination;this.resultSelector?this.trySelectResult(a,c,e,b):g.next(c)};
c.prototype.trySelectResult=function(a,c,e,b){var g=this.resultSelector,f=this.destination;try{var k=g(a,c,e,b);f.next(k)}catch(l){f.error(l)}};c.prototype.notifyError=function(a){this.destination.error(a)};c.prototype.notifyComplete=function(a){this.remove(a);this.hasSubscription=!1;this.hasCompleted&&this.destination.complete()};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],226:[function(a,b,f){var h=this&&this.__extends||function(a,c){function e(){this.constructor=
a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},l=a("../util/tryCatch"),k=a("../util/errorObject");b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");f.expand=function(a,c,b){void 0===c&&(c=Number.POSITIVE_INFINITY);void 0===b&&(b=void 0);c=1>(c||0)?Number.POSITIVE_INFINITY:c;return this.lift(new e(a,c,b))};var e=function(){function a(d,c,e){this.project=d;this.concurrent=c;this.scheduler=e}a.prototype.call=function(a,
d){return d._subscribe(new c(a,this.project,this.concurrent,this.scheduler))};return a}();f.ExpandOperator=e;var c=function(a){function c(e,b,m,g){a.call(this,e);this.project=b;this.concurrent=m;this.scheduler=g;this.active=this.index=0;this.hasCompleted=!1;m<Number.POSITIVE_INFINITY&&(this.buffer=[])}h(c,a);c.dispatch=function(a){a.subscriber.subscribeToProjection(a.result,a.value,a.index)};c.prototype._next=function(a){var d=this.destination;if(d.closed)this._complete();else{var e=this.index++;
if(this.active<this.concurrent){d.next(a);var b=l.tryCatch(this.project)(a,e);b===k.errorObject?d.error(k.errorObject.e):this.scheduler?this.add(this.scheduler.schedule(c.dispatch,0,{subscriber:this,result:b,value:a,index:e})):this.subscribeToProjection(b,a,e)}else this.buffer.push(a)}};c.prototype.subscribeToProjection=function(a,d,c){this.active++;this.add(g.subscribeToResult(this,a,d,c))};c.prototype._complete=function(){(this.hasCompleted=!0,0===this.active)&&this.destination.complete()};c.prototype.notifyNext=
function(a,d,c,e,b){this._next(d)};c.prototype.notifyComplete=function(a){var d=this.buffer;this.remove(a);this.active--;d&&0<d.length&&this._next(d.shift());this.hasCompleted&&0===this.active&&this.destination.complete()};return c}(b.OuterSubscriber);f.ExpandSubscriber=c},{"../OuterSubscriber":7,"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],227:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&
(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};a=a("../Subscriber");f.filter=function(a,e){return this.lift(new l(a,e))};var l=function(){function a(e,c){this.predicate=e;this.thisArg=c}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.predicate,this.thisArg))};return a}(),k=function(a){function e(c,d,e){a.call(this,c);this.predicate=d;this.thisArg=e;this.count=0;this.predicate=d}h(e,a);e.prototype._next=function(a){var d;try{d=this.predicate.call(this.thisArg,
a,this.count++)}catch(e){this.destination.error(e);return}d&&this.destination.next(a)};return e}(a.Subscriber)},{"../Subscriber":13}],228:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../Subscriber");var l=a("../Subscription");f._finally=function(a){return this.lift(new k(a))};var k=function(){function a(c){this.callback=c}a.prototype.call=
function(a,d){return d._subscribe(new g(a,this.callback))};return a}(),g=function(a){function c(d,c){a.call(this,d);this.add(new l.Subscription(c))}h(c,a);return c}(b.Subscriber)},{"../Subscriber":13,"../Subscription":14}],229:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};a=a("../Subscriber");f.find=function(a,e){if("function"!==typeof a)throw new TypeError("predicate is not a function");
return this.lift(new l(a,this,!1,e))};var l=function(){function a(e,c,d,b){this.predicate=e;this.source=c;this.yieldIndex=d;this.thisArg=b}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.predicate,this.source,this.yieldIndex,this.thisArg))};return a}();f.FindValueOperator=l;var k=function(a){function e(c,d,e,b,f){a.call(this,c);this.predicate=d;this.source=e;this.yieldIndex=b;this.thisArg=f;this.index=0}h(e,a);e.prototype.notifyComplete=function(a){var d=this.destination;d.next(a);
d.complete()};e.prototype._next=function(a){var d=this.predicate,e=this.thisArg,b=this.index++;try{d.call(e||this,a,b,this.source)&&this.notifyComplete(this.yieldIndex?b:a)}catch(g){this.destination.error(g)}};e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)};return e}(a.Subscriber);f.FindValueSubscriber=k},{"../Subscriber":13}],230:[function(a,b,f){var h=a("./find");f.findIndex=function(a,b){return this.lift(new h.FindValueOperator(a,this,!0,b))}},{"./find":229}],231:[function(a,
b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../Subscriber");var l=a("../util/EmptyError");f.first=function(a,c,d){return this.lift(new k(a,c,d,this))};var k=function(){function a(c,d,e,b){this.predicate=c;this.resultSelector=d;this.defaultValue=e;this.source=b}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.predicate,this.resultSelector,
this.defaultValue,this.source))};return a}(),g=function(a){function c(d,c,b,g,f){a.call(this,d);this.predicate=c;this.resultSelector=b;this.defaultValue=g;this.source=f;this.index=0;this.hasCompleted=!1}h(c,a);c.prototype._next=function(a){var c=this.index++;this.predicate?this._tryPredicate(a,c):this._emit(a,c)};c.prototype._tryPredicate=function(a,c){var e;try{e=this.predicate(a,c,this.source)}catch(b){this.destination.error(b);return}e&&this._emit(a,c)};c.prototype._emit=function(a,c){this.resultSelector?
this._tryResultSelector(a,c):this._emitFinal(a)};c.prototype._tryResultSelector=function(a,c){var e;try{e=this.resultSelector(a,c)}catch(b){this.destination.error(b);return}this._emitFinal(e)};c.prototype._emitFinal=function(a){var c=this.destination;c.next(a);c.complete();this.hasCompleted=!0};c.prototype._complete=function(){var a=this.destination;this.hasCompleted||"undefined"===typeof this.defaultValue?this.hasCompleted||a.error(new l.EmptyError):(a.next(this.defaultValue),a.complete())};return c}(b.Subscriber)},
{"../Subscriber":13,"../util/EmptyError":321}],232:[function(a,b,f){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)};b=a("../Subscriber");var l=a("../Subscription"),k=a("../Observable"),g=a("../Subject"),e=a("../util/Map"),c=a("../util/FastMap");f.groupBy=function(a,c,e){return this.lift(new d(this,a,c,e))};var d=function(){function a(d,c,e,b){this.source=
d;this.keySelector=c;this.elementSelector=e;this.durationSelector=b}a.prototype.call=function(a,d){return d._subscribe(new m(a,this.keySelector,this.elementSelector,this.durationSelector))};return a}(),m=function(a){function d(c,e,b,m){a.call(this,c);this.keySelector=e;this.elementSelector=b;this.durationSelector=m;this.groups=null;this.attemptedToUnsubscribe=!1;this.count=0}h(d,a);d.prototype._next=function(a){var d;try{d=this.keySelector(a)}catch(c){this.error(c);return}this._group(a,d)};d.prototype._group=
function(a,d){var b=this.groups;b||(b=this.groups="string"===typeof d?new c.FastMap:new e.Map);var m=b.get(d),f;if(this.elementSelector)try{f=this.elementSelector(a)}catch(k){this.error(k)}else f=a;if(!m&&(b.set(d,m=new g.Subject),b=new q(d,m,this),this.destination.next(b),this.durationSelector)){b=void 0;try{b=this.durationSelector(new q(d,m))}catch(k){this.error(k);return}this.add(b.subscribe(new n(d,m,this)))}m.closed||m.next(f)};d.prototype._error=function(a){var d=this.groups;d&&(d.forEach(function(d,
c){d.error(a)}),d.clear());this.destination.error(a)};d.prototype._complete=function(){var a=this.groups;a&&(a.forEach(function(a,d){a.complete()}),a.clear());this.destination.complete()};d.prototype.removeGroup=function(a){this.groups["delete"](a)};d.prototype.unsubscribe=function(){this.closed||this.attemptedToUnsubscribe||(this.attemptedToUnsubscribe=!0,0===this.count&&a.prototype.unsubscribe.call(this))};return d}(b.Subscriber),n=function(a){function d(c,e,b){a.call(this);this.key=c;this.group=
e;this.parent=b}h(d,a);d.prototype._next=function(a){this._complete()};d.prototype._error=function(a){var d=this.group;d.closed||d.error(a);this.parent.removeGroup(this.key)};d.prototype._complete=function(){var a=this.group;a.closed||a.complete();this.parent.removeGroup(this.key)};return d}(b.Subscriber),q=function(a){function d(c,e,b){a.call(this);this.key=c;this.groupSubject=e;this.refCountSubscription=b}h(d,a);d.prototype._subscribe=function(a){var d=new l.Subscription,c=this.refCountSubscription,
e=this.groupSubject;c&&!c.closed&&d.add(new t(c));d.add(e.subscribe(a));return d};return d}(k.Observable);f.GroupedObservable=q;var t=function(a){function d(c){a.call(this);this.parent=c;c.count++}h(d,a);d.prototype.unsubscribe=function(){var d=this.parent;d.closed||this.closed||(a.prototype.unsubscribe.call(this),--d.count,0===d.count&&d.attemptedToUnsubscribe&&d.unsubscribe())};return d}(l.Subscription)},{"../Observable":5,"../Subject":11,"../Subscriber":13,"../Subscription":14,"../util/FastMap":322,
"../util/Map":324}],233:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../Subscriber");var l=a("../util/noop");f.ignoreElements=function(){return this.lift(new k)};var k=function(){function a(){}a.prototype.call=function(a,d){return d._subscribe(new g(a))};return a}(),g=function(a){function c(){a.apply(this,arguments)}h(c,a);c.prototype._next=
function(a){l.noop()};return c}(b.Subscriber)},{"../Subscriber":13,"../util/noop":338}],234:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};a=a("../Subscriber");f.isEmpty=function(){return this.lift(new l)};var l=function(){function a(){}a.prototype.call=function(a,c){return c._subscribe(new k(a))};return a}(),k=function(a){function e(c){a.call(this,
c)}h(e,a);e.prototype.notifyComplete=function(a){var d=this.destination;d.next(a);d.complete()};e.prototype._next=function(a){this.notifyComplete(!1)};e.prototype._complete=function(){this.notifyComplete(!0)};return e}(a.Subscriber)},{"../Subscriber":13}],235:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../Subscriber");var l=a("../util/EmptyError");
f.last=function(a,c,d){return this.lift(new k(a,c,d,this))};var k=function(){function a(c,d,e,b){this.predicate=c;this.resultSelector=d;this.defaultValue=e;this.source=b}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.predicate,this.resultSelector,this.defaultValue,this.source))};return a}(),g=function(a){function c(d,c,b,g,f){a.call(this,d);this.predicate=c;this.resultSelector=b;this.defaultValue=g;this.source=f;this.hasValue=!1;this.index=0;"undefined"!==typeof g&&(this.lastValue=
g,this.hasValue=!0)}h(c,a);c.prototype._next=function(a){var c=this.index++;this.predicate?this._tryPredicate(a,c):this.resultSelector?this._tryResultSelector(a,c):(this.lastValue=a,this.hasValue=!0)};c.prototype._tryPredicate=function(a,c){var e;try{e=this.predicate(a,c,this.source)}catch(b){this.destination.error(b);return}e&&(this.resultSelector?this._tryResultSelector(a,c):(this.lastValue=a,this.hasValue=!0))};c.prototype._tryResultSelector=function(a,c){var e;try{e=this.resultSelector(a,c)}catch(b){this.destination.error(b);
return}this.lastValue=e;this.hasValue=!0};c.prototype._complete=function(){var a=this.destination;this.hasValue?(a.next(this.lastValue),a.complete()):a.error(new l.EmptyError)};return c}(b.Subscriber)},{"../Subscriber":13,"../util/EmptyError":321}],236:[function(a,b,f){f.letProto=function(a){return a(this)}},{}],237:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=
e.prototype,new c)};a=a("../Subscriber");f.map=function(a,e){if("function"!==typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new l(a,e))};var l=function(){function a(e,c){this.project=e;this.thisArg=c}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.project,this.thisArg))};return a}();f.MapOperator=l;var k=function(a){function e(c,d,e){a.call(this,c);this.project=d;this.count=0;this.thisArg=e||this}h(e,a);e.prototype._next=
function(a){var d;try{d=this.project.call(this.thisArg,a,this.count++)}catch(e){this.destination.error(e);return}this.destination.next(d)};return e}(a.Subscriber)},{"../Subscriber":13}],238:[function(a,b,f){var h=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};a=a("../Subscriber");f.mapTo=function(a){return this.lift(new l(a))};var l=function(){function a(e){this.value=
e}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.value))};return a}(),k=function(a){function e(c,d){a.call(this,c);this.value=d}h(e,a);e.prototype._next=function(a){this.destination.next(this.value)};return e}(a.Subscriber)},{"../Subscriber":13}],239:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../Subscriber");var l=
a("../Notification");f.materialize=function(){return this.lift(new k)};var k=function(){function a(){}a.prototype.call=function(a,d){return d._subscribe(new g(a))};return a}(),g=function(a){function c(d){a.call(this,d)}h(c,a);c.prototype._next=function(a){this.destination.next(l.Notification.createNext(a))};c.prototype._error=function(a){var c=this.destination;c.next(l.Notification.createError(a));c.complete()};c.prototype._complete=function(){var a=this.destination;a.next(l.Notification.createComplete());
a.complete()};return c}(b.Subscriber)},{"../Notification":4,"../Subscriber":13}],240:[function(a,b,f){var h=a("./reduce");f.max=function(a){return this.lift(new h.ReduceOperator("function"===typeof a?function(b,g){return 0<a(b,g)?b:g}:function(a,b){return a>b?a:b}))}},{"./reduce":258}],241:[function(a,b,f){function h(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var c=Number.POSITIVE_INFINITY,d=null,b=a[a.length-1];g.isScheduler(b)?(d=a.pop(),1<a.length&&"number"===typeof a[a.length-
1]&&(c=a.pop())):"number"===typeof b&&(c=a.pop());return 1===a.length?a[0]:(new l.ArrayObservable(a,d)).lift(new k.MergeAllOperator(c))}var l=a("../observable/ArrayObservable"),k=a("./mergeAll"),g=a("../util/isScheduler");f.merge=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];a.unshift(this);return h.apply(this,a)};f.mergeStatic=h},{"../observable/ArrayObservable":145,"../util/isScheduler":337,"./mergeAll":242}],242:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=
a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f.mergeAll=function(a){void 0===a&&(a=Number.POSITIVE_INFINITY);return this.lift(new k(a))};var k=function(){function a(c){this.concurrent=c}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.concurrent))};return a}();f.MergeAllOperator=k;var g=function(a){function c(d,c){a.call(this,d);this.concurrent=
c;this.hasCompleted=!1;this.buffer=[];this.active=0}h(c,a);c.prototype._next=function(a){this.active<this.concurrent?(this.active++,this.add(l.subscribeToResult(this,a))):this.buffer.push(a)};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyComplete=function(a){var c=this.buffer;this.remove(a);this.active--;0<c.length?this._next(c.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(b.OuterSubscriber);
f.MergeAllSubscriber=g},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],243:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},l=a("../util/subscribeToResult");a=a("../OuterSubscriber");f.mergeMap=function(a,c,d){void 0===d&&(d=Number.POSITIVE_INFINITY);"number"===typeof c&&(d=c,c=null);return this.lift(new k(a,c,d))};var k=function(){function a(c,
d,e){void 0===e&&(e=Number.POSITIVE_INFINITY);this.project=c;this.resultSelector=d;this.concurrent=e}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.project,this.resultSelector,this.concurrent))};return a}();f.MergeMapOperator=k;var g=function(a){function c(d,c,b,g){void 0===g&&(g=Number.POSITIVE_INFINITY);a.call(this,d);this.project=c;this.resultSelector=b;this.concurrent=g;this.hasCompleted=!1;this.buffer=[];this.index=this.active=0}h(c,a);c.prototype._next=function(a){this.active<
this.concurrent?this._tryNext(a):this.buffer.push(a)};c.prototype._tryNext=function(a){var c,e=this.index++;try{c=this.project(a,e)}catch(b){this.destination.error(b);return}this.active++;this._innerSub(c,a,e)};c.prototype._innerSub=function(a,c,e){this.add(l.subscribeToResult(this,a,c,e))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyNext=function(a,c,e,b,g){this.resultSelector?this._notifyResultSelector(a,
c,e,b):this.destination.next(c)};c.prototype._notifyResultSelector=function(a,c,e,b){var g;try{g=this.resultSelector(a,c,e,b)}catch(f){this.destination.error(f);return}this.destination.next(g)};c.prototype.notifyComplete=function(a){var c=this.buffer;this.remove(a);this.active--;0<c.length?this._next(c.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(a.OuterSubscriber);f.MergeMapSubscriber=g},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],244:[function(a,
b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f.mergeMapTo=function(a,c,d){void 0===d&&(d=Number.POSITIVE_INFINITY);"number"===typeof c&&(d=c,c=null);return this.lift(new k(a,c,d))};var k=function(){function a(c,d,b){void 0===b&&(b=Number.POSITIVE_INFINITY);this.ish=c;this.resultSelector=
d;this.concurrent=b}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.ish,this.resultSelector,this.concurrent))};return a}();f.MergeMapToOperator=k;var g=function(a){function c(d,c,b,g){void 0===g&&(g=Number.POSITIVE_INFINITY);a.call(this,d);this.ish=c;this.resultSelector=b;this.concurrent=g;this.hasCompleted=!1;this.buffer=[];this.index=this.active=0}h(c,a);c.prototype._next=function(a){if(this.active<this.concurrent){var c=this.resultSelector,b=this.index++,e=this.ish,g=this.destination;
this.active++;this._innerSub(e,g,c,a,b)}else this.buffer.push(a)};c.prototype._innerSub=function(a,c,b,e,g){this.add(l.subscribeToResult(this,a,e,g))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyNext=function(a,c,b,e,g){g=this.destination;this.resultSelector?this.trySelectResult(a,c,b,e):g.next(c)};c.prototype.trySelectResult=function(a,c,b,e){var g=this.resultSelector,f=this.destination,k;try{k=g(a,
c,b,e)}catch(l){f.error(l);return}f.next(k)};c.prototype.notifyError=function(a){this.destination.error(a)};c.prototype.notifyComplete=function(a){var c=this.buffer;this.remove(a);this.active--;0<c.length?this._next(c.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(b.OuterSubscriber);f.MergeMapToSubscriber=g},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],245:[function(a,b,f){var h=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var e in c)c.hasOwnProperty(e)&&
(a[e]=c[e]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)},l=a("../util/tryCatch"),k=a("../util/errorObject"),g=a("../util/subscribeToResult");a=a("../OuterSubscriber");f.mergeScan=function(a,c,b){void 0===b&&(b=Number.POSITIVE_INFINITY);return this.lift(new e(a,c,b))};var e=function(){function a(d,c,b){this.project=d;this.seed=c;this.concurrent=b}a.prototype.call=function(a,d){return d._subscribe(new c(a,this.project,this.seed,this.concurrent))};return a}();f.MergeScanOperator=
e;var c=function(a){function c(b,e,g,f){a.call(this,b);this.project=e;this.acc=g;this.concurrent=f;this.hasCompleted=this.hasValue=!1;this.buffer=[];this.index=this.active=0}h(c,a);c.prototype._next=function(a){if(this.active<this.concurrent){var d=this.index++,c=l.tryCatch(this.project)(this.acc,a),b=this.destination;c===k.errorObject?b.error(k.errorObject.e):(this.active++,this._innerSub(c,a,d))}else this.buffer.push(a)};c.prototype._innerSub=function(a,d,c){this.add(g.subscribeToResult(this,a,
d,c))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())};c.prototype.notifyNext=function(a,d,c,b,e){a=this.destination;this.acc=d;this.hasValue=!0;a.next(d)};c.prototype.notifyComplete=function(a){var d=this.buffer;this.remove(a);this.active--;0<d.length?this._next(d.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())};
return c}(a.OuterSubscriber);f.MergeScanSubscriber=c},{"../OuterSubscriber":7,"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],246:[function(a,b,f){var h=a("./reduce");f.min=function(a){return this.lift(new h.ReduceOperator("function"===typeof a?function(b,g){return 0>a(b,g)?b:g}:function(a,b){return a<b?a:b}))}},{"./reduce":258}],247:[function(a,b,f){var h=a("../observable/MulticastObservable"),l=a("../observable/ConnectableObservable");f.multicast=function(a,b){var e;
e="function"===typeof a?a:function(){return a};return b?new h.MulticastObservable(this,e,b):new l.ConnectableObservable(this,e)}},{"../observable/ConnectableObservable":148,"../observable/MulticastObservable":160}],248:[function(a,b,f){var h=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};b=a("../Subscriber");var l=a("../Notification");f.observeOn=function(a,d){void 0===
d&&(d=0);return this.lift(new k(a,d))};var k=function(){function a(d,c){void 0===c&&(c=0);this.scheduler=d;this.delay=c}a.prototype.call=function(a,c){return c._subscribe(new g(a,this.scheduler,this.delay))};return a}();f.ObserveOnOperator=k;var g=function(a){function d(d,b,e){void 0===e&&(e=0);a.call(this,d);this.scheduler=b;this.delay=e}h(d,a);d.dispatch=function(a){a.notification.observe(a.destination)};d.prototype.scheduleMessage=function(a){this.add(this.scheduler.schedule(d.dispatch,this.delay,
new e(a,this.destination)))};d.prototype._next=function(a){this.scheduleMessage(l.Notification.createNext(a))};d.prototype._error=function(a){this.scheduleMessage(l.Notification.createError(a))};d.prototype._complete=function(){this.scheduleMessage(l.Notification.createComplete())};return d}(b.Subscriber);f.ObserveOnSubscriber=g;var e=function(){return function(a,d){this.notification=a;this.destination=d}}();f.ObserveOnMessage=e},{"../Notification":4,"../Subscriber":13}],249:[function(a,b,f){var h=
this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)},l=a("../observable/FromObservable"),k=a("../util/isArray");b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");f.onErrorResumeNext=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];1===a.length&&k.isArray(a[0])&&(a=a[0]);return this.lift(new e(a))};f.onErrorResumeNextStatic=function(){for(var a=
[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];1===a.length&&k.isArray(a[0])&&(a=a[0]);c=a.shift();return(new l.FromObservable(c,null)).lift(new e(a))};var e=function(){function a(d){this.nextSources=d}a.prototype.call=function(a,d){return d._subscribe(new c(a,this.nextSources))};return a}(),c=function(a){function c(b,e){a.call(this,b);this.destination=b;this.nextSources=e}h(c,a);c.prototype.notifyError=function(a,d){this.subscribeToNextSource()};c.prototype.notifyComplete=function(a){this.subscribeToNextSource()};
c.prototype._error=function(a){this.subscribeToNextSource()};c.prototype._complete=function(){this.subscribeToNextSource()};c.prototype.subscribeToNextSource=function(){var a=this.nextSources.shift();a?this.add(g.subscribeToResult(this,a)):this.destination.complete()};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../observable/FromObservable":155,"../util/isArray":331,"../util/subscribeToResult":341}],250:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");f.pairwise=function(){return this.lift(new l)};var l=function(){function a(){}a.prototype.call=function(a,c){return c._subscribe(new k(a))};return a}(),k=function(a){function b(c){a.call(this,c);this.hasPrev=!1}h(b,a);b.prototype._next=function(a){this.hasPrev?this.destination.next([this.prev,a]):this.hasPrev=!0;this.prev=a};return b}(a.Subscriber)},{"../Subscriber":13}],
251:[function(a,b,f){var h=a("../util/not"),l=a("./filter");f.partition=function(a,b){return[l.filter.call(this,a),l.filter.call(this,h.not(a,b))]}},{"../util/not":339,"./filter":227}],252:[function(a,b,f){function h(a,b){return function(e){var c=e;for(e=0;e<b;e++)if(c=c[a[e]],"undefined"===typeof c)return;return c}}var l=a("./map");f.pluck=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=a.length;if(0===b)throw Error("list of properties cannot be empty.");return l.map.call(this,
h(a,b))}},{"./map":237}],253:[function(a,b,f){var h=a("../Subject"),l=a("./multicast");f.publish=function(a){return a?l.multicast.call(this,function(){return new h.Subject},a):l.multicast.call(this,new h.Subject)}},{"../Subject":11,"./multicast":247}],254:[function(a,b,f){var h=a("../BehaviorSubject"),l=a("./multicast");f.publishBehavior=function(a){return l.multicast.call(this,new h.BehaviorSubject(a))}},{"../BehaviorSubject":2,"./multicast":247}],255:[function(a,b,f){var h=a("../AsyncSubject"),
l=a("./multicast");f.publishLast=function(){return l.multicast.call(this,new h.AsyncSubject)}},{"../AsyncSubject":1,"./multicast":247}],256:[function(a,b,f){var h=a("../ReplaySubject"),l=a("./multicast");f.publishReplay=function(a,b,e){void 0===a&&(a=Number.POSITIVE_INFINITY);void 0===b&&(b=Number.POSITIVE_INFINITY);return l.multicast.call(this,new h.ReplaySubject(a,b,e))}},{"../ReplaySubject":8,"./multicast":247}],257:[function(a,b,f){function h(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];
if(1===a.length)if(k.isArray(a[0]))a=a[0];else return a[0];return(new g.ArrayObservable(a)).lift(new c)}var l=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},k=a("../util/isArray"),g=a("../observable/ArrayObservable");b=a("../OuterSubscriber");var e=a("../util/subscribeToResult");f.race=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];1===
a.length&&k.isArray(a[0])&&(a=a[0]);a.unshift(this);return h.apply(this,a)};f.raceStatic=h;var c=function(){function a(){}a.prototype.call=function(a,c){return c._subscribe(new d(a))};return a}();f.RaceOperator=c;var d=function(a){function d(c){a.call(this,c);this.hasFirst=!1;this.observables=[];this.subscriptions=[]}l(d,a);d.prototype._next=function(a){this.observables.push(a)};d.prototype._complete=function(){var a=this.observables,d=a.length;if(0===d)this.destination.complete();else{for(var c=
0;c<d;c++){var b=a[c],b=e.subscribeToResult(this,b,b,c);this.subscriptions&&(this.subscriptions.push(b),this.add(b))}this.observables=null}};d.prototype.notifyNext=function(a,d,c,b,e){if(!this.hasFirst){this.hasFirst=!0;for(a=0;a<this.subscriptions.length;a++)a!==c&&(b=this.subscriptions[a],b.unsubscribe(),this.remove(b));this.subscriptions=null}this.destination.next(d)};return d}(b.OuterSubscriber);f.RaceSubscriber=d},{"../OuterSubscriber":7,"../observable/ArrayObservable":145,"../util/isArray":331,
"../util/subscribeToResult":341}],258:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");f.reduce=function(a,b){return this.lift(new l(a,b))};var l=function(){function a(b,c){this.accumulator=b;this.seed=c}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.accumulator,this.seed))};return a}();f.ReduceOperator=
l;var k=function(a){function b(c,d,e){a.call(this,c);this.accumulator=d;this.hasValue=!1;this.acc=e;this.accumulator=d;this.hasSeed="undefined"!==typeof e}h(b,a);b.prototype._next=function(a){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(a):(this.acc=a,this.hasValue=!0)};b.prototype._tryReduce=function(a){var d;try{d=this.accumulator(this.acc,a)}catch(b){this.destination.error(b);return}this.acc=d};b.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc);
this.destination.complete()};return b}(a.Subscriber);f.ReduceSubscriber=k},{"../Subscriber":13}],259:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../Subscriber");var l=a("../observable/EmptyObservable");f.repeat=function(a){void 0===a&&(a=-1);return 0===a?new l.EmptyObservable:0>a?this.lift(new k(-1,this)):this.lift(new k(a-1,this))};
var k=function(){function a(c,d){this.count=c;this.source=d}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.count,this.source))};return a}(),g=function(a){function c(d,c,b){a.call(this,d);this.count=c;this.source=b}h(c,a);c.prototype.complete=function(){if(!this.isStopped){var d=this.source,c=this.count;if(0===c)return a.prototype.complete.call(this);-1<c&&(this.count=c-1);this.unsubscribe();this.closed=this.isStopped=!1;d.subscribe(this)}};return c}(b.Subscriber)},{"../Subscriber":13,
"../observable/EmptyObservable":150}],260:[function(a,b,f){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},l=a("../Subject"),k=a("../util/tryCatch"),g=a("../util/errorObject");b=a("../OuterSubscriber");var e=a("../util/subscribeToResult");f.repeatWhen=function(a){return this.lift(new c(a,this))};var c=function(){function a(d,c){this.notifier=d;this.source=
c}a.prototype.call=function(a,c){return c._subscribe(new d(a,this.notifier,this.source))};return a}(),d=function(a){function d(c,b,e){a.call(this,c);this.notifier=b;this.source=e}h(d,a);d.prototype.complete=function(){if(!this.isStopped){var d=this.notifications,c=this.retries,b=this.retriesSubscription;if(c)this.retriesSubscription=this.notifications=null;else{d=new l.Subject;c=k.tryCatch(this.notifier)(d);if(c===g.errorObject)return a.prototype.complete.call(this);b=e.subscribeToResult(this,c)}this.unsubscribe();
this.closed=!1;this.notifications=d;this.retries=c;this.retriesSubscription=b;d.next()}};d.prototype._unsubscribe=function(){var a=this.notifications,d=this.retriesSubscription;a&&(a.unsubscribe(),this.notifications=null);d&&(d.unsubscribe(),this.retriesSubscription=null);this.retries=null};d.prototype.notifyNext=function(a,d,c,b,e){a=this.notifications;d=this.retries;c=this.retriesSubscription;this.retriesSubscription=this.retries=this.notifications=null;this.unsubscribe();this.closed=this.isStopped=
!1;this.notifications=a;this.retries=d;this.retriesSubscription=c;this.source.subscribe(this)};return d}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../Subject":11,"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],261:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");f.retry=function(a){void 0===
a&&(a=-1);return this.lift(new l(a,this))};var l=function(){function a(b,c){this.count=b;this.source=c}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.count,this.source))};return a}(),k=function(a){function b(c,d,e){a.call(this,c);this.count=d;this.source=e}h(b,a);b.prototype.error=function(c){if(!this.isStopped){var d=this.source,b=this.count;if(0===b)return a.prototype.error.call(this,c);-1<b&&(this.count=b-1);this.unsubscribe();this.closed=this.isStopped=!1;d.subscribe(this)}};
return b}(a.Subscriber)},{"../Subscriber":13}],262:[function(a,b,f){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},l=a("../Subject"),k=a("../util/tryCatch"),g=a("../util/errorObject");b=a("../OuterSubscriber");var e=a("../util/subscribeToResult");f.retryWhen=function(a){return this.lift(new c(a,this))};var c=function(){function a(d,c){this.notifier=d;this.source=
c}a.prototype.call=function(a,c){return c._subscribe(new d(a,this.notifier,this.source))};return a}(),d=function(a){function d(c,b,e){a.call(this,c);this.notifier=b;this.source=e}h(d,a);d.prototype.error=function(d){if(!this.isStopped){var c=this.errors,b=this.retries,f=this.retriesSubscription;if(b)this.retriesSubscription=this.errors=null;else{c=new l.Subject;b=k.tryCatch(this.notifier)(c);if(b===g.errorObject)return a.prototype.error.call(this,g.errorObject.e);f=e.subscribeToResult(this,b)}this.unsubscribe();
this.closed=!1;this.errors=c;this.retries=b;this.retriesSubscription=f;c.next(d)}};d.prototype._unsubscribe=function(){var a=this.errors,d=this.retriesSubscription;a&&(a.unsubscribe(),this.errors=null);d&&(d.unsubscribe(),this.retriesSubscription=null);this.retries=null};d.prototype.notifyNext=function(a,d,c,b,e){a=this.errors;d=this.retries;c=this.retriesSubscription;this.retriesSubscription=this.retries=this.errors=null;this.unsubscribe();this.closed=this.isStopped=!1;this.errors=a;this.retries=
d;this.retriesSubscription=c;this.source.subscribe(this)};return d}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../Subject":11,"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],263:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f.sample=function(a){return this.lift(new k(a))};
var k=function(){function a(c){this.notifier=c}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.notifier))};return a}(),g=function(a){function c(d,c){a.call(this,d);this.hasValue=!1;this.add(l.subscribeToResult(this,c))}h(c,a);c.prototype._next=function(a){this.value=a;this.hasValue=!0};c.prototype.notifyNext=function(a,c,b,e,f){this.emitValue()};c.prototype.notifyComplete=function(){this.emitValue()};c.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))};
return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],264:[function(a,b,f){function h(a){var d=a.period;a.subscriber.notifyNext();this.schedule(a,d)}var l=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};b=a("../Subscriber");var k=a("../scheduler/async");f.sampleTime=function(a,d){void 0===d&&(d=k.async);return this.lift(new g(a,
d))};var g=function(){function a(d,c){this.period=d;this.scheduler=c}a.prototype.call=function(a,c){return c._subscribe(new e(a,this.period,this.scheduler))};return a}(),e=function(a){function d(d,b,e){a.call(this,d);this.period=b;this.scheduler=e;this.hasValue=!1;this.add(e.schedule(h,b,{subscriber:this,period:b}))}l(d,a);d.prototype._next=function(a){this.lastValue=a;this.hasValue=!0};d.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))};return d}(b.Subscriber)},
{"../Subscriber":13,"../scheduler/async":309}],265:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");f.scan=function(a,b){return this.lift(new l(a,b))};var l=function(){function a(b,c){this.accumulator=b;this.seed=c}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.accumulator,this.seed))};return a}(),k=function(a){function b(c,
d,e){a.call(this,c);this.accumulator=d;this.index=0;this.accumulatorSet=!1;this.seed=e;this.accumulatorSet="undefined"!==typeof e}h(b,a);Object.defineProperty(b.prototype,"seed",{get:function(){return this._seed},set:function(a){this.accumulatorSet=!0;this._seed=a},enumerable:!0,configurable:!0});b.prototype._next=function(a){if(this.accumulatorSet)return this._tryNext(a);this.seed=a;this.destination.next(a)};b.prototype._tryNext=function(a){var d=this.index++,b;try{b=this.accumulator(this.seed,a,
d)}catch(e){this.destination.error(e)}this.seed=b;this.destination.next(b)};return b}(a.Subscriber)},{"../Subscriber":13}],266:[function(a,b,f){var h=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};b=a("../Subscriber");var l=a("../util/tryCatch"),k=a("../util/errorObject");f.sequenceEqual=function(a,c){return this.lift(new g(a,c))};var g=function(){function a(d,
c){this.compareTo=d;this.comparor=c}a.prototype.call=function(a,d){return d._subscribe(new e(a,this.compareTo,this.comparor))};return a}();f.SequenceEqualOperator=g;var e=function(a){function b(e,f,g){a.call(this,e);this.compareTo=f;this.comparor=g;this._a=[];this._b=[];this._oneComplete=!1;this.add(f.subscribe(new c(e,this)))}h(b,a);b.prototype._next=function(a){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(a),this.checkValues())};b.prototype._complete=function(){this._oneComplete?
this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0};b.prototype.checkValues=function(){for(var a=this._a,d=this._b,c=this.comparor;0<a.length&&0<d.length;){var b=a.shift(),e=d.shift();c?(b=l.tryCatch(c)(b,e),b===k.errorObject&&this.destination.error(k.errorObject.e)):b=b===e;b||this.emit(!1)}};b.prototype.emit=function(a){var d=this.destination;d.next(a);d.complete()};b.prototype.nextB=function(a){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(a),this.checkValues())};
return b}(b.Subscriber);f.SequenceEqualSubscriber=e;var c=function(a){function c(b,e){a.call(this,b);this.parent=e}h(c,a);c.prototype._next=function(a){this.parent.nextB(a)};c.prototype._error=function(a){this.parent.error(a)};c.prototype._complete=function(){this.parent._complete()};return c}(b.Subscriber)},{"../Subscriber":13,"../util/errorObject":330,"../util/tryCatch":343}],267:[function(a,b,f){function h(){return new k.Subject}var l=a("./multicast"),k=a("../Subject");f.share=function(){return l.multicast.call(this,
h).refCount()}},{"../Subject":11,"./multicast":247}],268:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../Subscriber");var l=a("../util/EmptyError");f.single=function(a){return this.lift(new k(a,this))};var k=function(){function a(c,d){this.predicate=c;this.source=d}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.predicate,
this.source))};return a}(),g=function(a){function c(d,c,b){a.call(this,d);this.predicate=c;this.source=b;this.seenValue=!1;this.index=0}h(c,a);c.prototype.applySingleValue=function(a){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=a)};c.prototype._next=function(a){var c=this.predicate;this.index++;c?this.tryNext(a):this.applySingleValue(a)};c.prototype.tryNext=function(a){try{this.predicate(a,this.index,this.source)&&this.applySingleValue(a)}catch(c){this.destination.error(c)}};
c.prototype._complete=function(){var a=this.destination;0<this.index?(a.next(this.seenValue?this.singleValue:void 0),a.complete()):a.error(new l.EmptyError)};return c}(b.Subscriber)},{"../Subscriber":13,"../util/EmptyError":321}],269:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");f.skip=function(a){return this.lift(new l(a))};
var l=function(){function a(b){this.total=b}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.total))};return a}(),k=function(a){function b(c,d){a.call(this,c);this.total=d;this.count=0}h(b,a);b.prototype._next=function(a){++this.count>this.total&&this.destination.next(a)};return b}(a.Subscriber)},{"../Subscriber":13}],270:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):
(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f.skipUntil=function(a){return this.lift(new k(a))};var k=function(){function a(c){this.notifier=c}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.notifier))};return a}(),g=function(a){function c(d,c){a.call(this,d);this.isInnerStopped=this.hasValue=!1;this.add(l.subscribeToResult(this,c))}h(c,a);c.prototype._next=function(d){this.hasValue&&a.prototype._next.call(this,d)};c.prototype._complete=
function(){this.isInnerStopped?a.prototype._complete.call(this):this.unsubscribe()};c.prototype.notifyNext=function(a,c,b,e,f){this.hasValue=!0};c.prototype.notifyComplete=function(){this.isInnerStopped=!0;this.isStopped&&a.prototype._complete.call(this)};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],271:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===
b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");f.skipWhile=function(a){return this.lift(new l(a))};var l=function(){function a(b){this.predicate=b}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.predicate))};return a}(),k=function(a){function b(c,d){a.call(this,c);this.predicate=d;this.skipping=!0;this.index=0}h(b,a);b.prototype._next=function(a){var d=this.destination;this.skipping&&this.tryCallPredicate(a);this.skipping||d.next(a)};b.prototype.tryCallPredicate=
function(a){try{this.skipping=!!this.predicate(a,this.index++)}catch(d){this.destination.error(d)}};return b}(a.Subscriber)},{"../Subscriber":13}],272:[function(a,b,f){var h=a("../observable/ArrayObservable"),l=a("../observable/ScalarObservable"),k=a("../observable/EmptyObservable"),g=a("./concat"),e=a("../util/isScheduler");f.startWith=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];d=a[a.length-1];e.isScheduler(d)?a.pop():d=null;var b=a.length;return 1===b?g.concatStatic(new l.ScalarObservable(a[0],
d),this):1<b?g.concatStatic(new h.ArrayObservable(a,d),this):g.concatStatic(new k.EmptyObservable(d),this)}},{"../observable/ArrayObservable":145,"../observable/EmptyObservable":150,"../observable/ScalarObservable":165,"../util/isScheduler":337,"./concat":206}],273:[function(a,b,f){var h=a("../observable/SubscribeOnObservable");f.subscribeOn=function(a,b){void 0===b&&(b=0);return new h.SubscribeOnObservable(this,b,a)}},{"../observable/SubscribeOnObservable":166}],274:[function(a,b,f){var h=this&&
this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f._switch=function(){return this.lift(new k)};var k=function(){function a(){}a.prototype.call=function(a,d){return d._subscribe(new g(a))};return a}(),g=function(a){function c(d){a.call(this,d);this.active=0;this.hasCompleted=!1}h(c,a);c.prototype._next=function(a){this.unsubscribeInner();
this.active++;this.add(this.innerSubscription=l.subscribeToResult(this,a))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&this.destination.complete()};c.prototype.unsubscribeInner=function(){this.active=0<this.active?this.active-1:0;var a=this.innerSubscription;a&&(a.unsubscribe(),this.remove(a))};c.prototype.notifyNext=function(a,c,b,e,f){this.destination.next(c)};c.prototype.notifyError=function(a){this.destination.error(a)};c.prototype.notifyComplete=function(){this.unsubscribeInner();
this.hasCompleted&&0===this.active&&this.destination.complete()};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],275:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f.switchMap=function(a,c){return this.lift(new k(a,c))};var k=function(){function a(c,
d){this.project=c;this.resultSelector=d}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.project,this.resultSelector))};return a}(),g=function(a){function c(d,c,b){a.call(this,d);this.project=c;this.resultSelector=b;this.index=0}h(c,a);c.prototype._next=function(a){var c,b=this.index++;try{c=this.project(a,b)}catch(e){this.destination.error(e);return}this._innerSub(c,a,b)};c.prototype._innerSub=function(a,c,b){var e=this.innerSubscription;e&&e.unsubscribe();this.add(this.innerSubscription=
l.subscribeToResult(this,a,c,b))};c.prototype._complete=function(){var d=this.innerSubscription;d&&!d.closed||a.prototype._complete.call(this)};c.prototype._unsubscribe=function(){this.innerSubscription=null};c.prototype.notifyComplete=function(d){this.remove(d);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};c.prototype.notifyNext=function(a,c,b,e,f){this.resultSelector?this._tryNotifyNext(a,c,b,e):this.destination.next(c)};c.prototype._tryNotifyNext=function(a,c,b,
e){var f;try{f=this.resultSelector(a,c,b,e)}catch(g){this.destination.error(g);return}this.destination.next(f)};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],276:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f.switchMapTo=function(a,
c){return this.lift(new k(a,c))};var k=function(){function a(c,d){this.observable=c;this.resultSelector=d}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.observable,this.resultSelector))};return a}(),g=function(a){function c(d,c,b){a.call(this,d);this.inner=c;this.resultSelector=b;this.index=0}h(c,a);c.prototype._next=function(a){var c=this.innerSubscription;c&&c.unsubscribe();this.add(this.innerSubscription=l.subscribeToResult(this,this.inner,a,this.index++))};c.prototype._complete=
function(){var c=this.innerSubscription;c&&!c.closed||a.prototype._complete.call(this)};c.prototype._unsubscribe=function(){this.innerSubscription=null};c.prototype.notifyComplete=function(c){this.remove(c);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};c.prototype.notifyNext=function(a,c,b,e,f){f=this.destination;this.resultSelector?this.tryResultSelector(a,c,b,e):f.next(c)};c.prototype.tryResultSelector=function(a,c,b,e){var f=this.resultSelector,g=this.destination,
k;try{k=f(a,c,b,e)}catch(l){g.error(l);return}g.next(k)};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],277:[function(a,b,f){var h=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};b=a("../Subscriber");var l=a("../util/ArgumentOutOfRangeError"),k=a("../observable/EmptyObservable");f.take=function(a){return 0===a?new k.EmptyObservable:
this.lift(new g(a))};var g=function(){function a(c){this.total=c;if(0>this.total)throw new l.ArgumentOutOfRangeError;}a.prototype.call=function(a,c){return c._subscribe(new e(a,this.total))};return a}(),e=function(a){function d(d,b){a.call(this,d);this.total=b;this.count=0}h(d,a);d.prototype._next=function(a){var c=this.total;++this.count<=c&&(this.destination.next(a),this.count===c&&(this.destination.complete(),this.unsubscribe()))};return d}(b.Subscriber)},{"../Subscriber":13,"../observable/EmptyObservable":150,
"../util/ArgumentOutOfRangeError":320}],278:[function(a,b,f){var h=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};b=a("../Subscriber");var l=a("../util/ArgumentOutOfRangeError"),k=a("../observable/EmptyObservable");f.takeLast=function(a){return 0===a?new k.EmptyObservable:this.lift(new g(a))};var g=function(){function a(c){this.total=c;if(0>this.total)throw new l.ArgumentOutOfRangeError;
}a.prototype.call=function(a,c){return c._subscribe(new e(a,this.total))};return a}(),e=function(a){function d(d,b){a.call(this,d);this.total=b;this.ring=[];this.count=0}h(d,a);d.prototype._next=function(a){var c=this.ring,d=this.total,b=this.count++;c.length<d?c.push(a):c[b%d]=a};d.prototype._complete=function(){var a=this.destination,c=this.count;if(0<c)for(var d=this.count>=this.total?this.total:this.count,b=this.ring,e=0;e<d;e++){var f=c++%d;a.next(b[f])}a.complete()};return d}(b.Subscriber)},
{"../Subscriber":13,"../observable/EmptyObservable":150,"../util/ArgumentOutOfRangeError":320}],279:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f.takeUntil=function(a){return this.lift(new k(a))};var k=function(){function a(c){this.notifier=c}a.prototype.call=function(a,d){return d._subscribe(new g(a,
this.notifier))};return a}(),g=function(a){function c(c,b){a.call(this,c);this.notifier=b;this.add(l.subscribeToResult(this,b))}h(c,a);c.prototype.notifyNext=function(a,c,b,e,f){this.complete()};c.prototype.notifyComplete=function(){};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],280:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)};a=a("../Subscriber");f.takeWhile=function(a){return this.lift(new l(a))};var l=function(){function a(b){this.predicate=b}a.prototype.call=function(a,c){return c._subscribe(new k(a,this.predicate))};return a}(),k=function(a){function b(c,d){a.call(this,c);this.predicate=d;this.index=0}h(b,a);b.prototype._next=function(a){var d=this.destination,b;try{b=this.predicate(a,this.index++)}catch(e){d.error(e);return}this.nextOrComplete(a,b)};b.prototype.nextOrComplete=function(a,
d){var b=this.destination;d?b.next(a):b.complete()};return b}(a.Subscriber)},{"../Subscriber":13}],281:[function(a,b,f){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a("../OuterSubscriber");var l=a("../util/subscribeToResult");f.throttle=function(a){return this.lift(new k(a))};var k=function(){function a(c){this.durationSelector=c}a.prototype.call=function(a,
d){return d._subscribe(new g(a,this.durationSelector))};return a}(),g=function(a){function c(c,b){a.call(this,c);this.destination=c;this.durationSelector=b}h(c,a);c.prototype._next=function(a){this.throttled||this.tryDurationSelector(a)};c.prototype.tryDurationSelector=function(a){var c=null;try{c=this.durationSelector(a)}catch(b){this.destination.error(b);return}this.emitAndThrottle(a,c)};c.prototype.emitAndThrottle=function(a,c){this.add(this.throttled=l.subscribeToResult(this,c));this.destination.next(a)};
c.prototype._unsubscribe=function(){var a=this.throttled;a&&(this.remove(a),this.throttled=null,a.unsubscribe())};c.prototype.notifyNext=function(a,c,b,e,f){this._unsubscribe()};c.prototype.notifyComplete=function(){this._unsubscribe()};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],282:[function(a,b,f){function h(a){a.subscriber.clearThrottle()}var l=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=
d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};b=a("../Subscriber");var k=a("../scheduler/async");f.throttleTime=function(a,d){void 0===d&&(d=k.async);return this.lift(new g(a,d))};var g=function(){function a(c,b){this.duration=c;this.scheduler=b}a.prototype.call=function(a,c){return c._subscribe(new e(a,this.duration,this.scheduler))};return a}(),e=function(a){function d(d,b,e){a.call(this,d);this.duration=b;this.scheduler=e}l(d,a);d.prototype._next=function(a){this.throttled||
(this.add(this.throttled=this.scheduler.schedule(h,this.duration,{subscriber:this})),this.destination.next(a))};d.prototype.clearThrottle=function(){var a=this.throttled;a&&(a.unsubscribe(),this.remove(a),this.throttled=null)};return d}(b.Subscriber)},{"../Subscriber":13,"../scheduler/async":309}],283:[function(a,b,f){var h=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,
new b)};b=a("../Subscriber");var l=a("../scheduler/async");f.timeInterval=function(a){void 0===a&&(a=l.async);return this.lift(new g(a))};var k=function(){return function(a,d){this.value=a;this.interval=d}}();f.TimeInterval=k;var g=function(){function a(c){this.scheduler=c}a.prototype.call=function(a,c){return c._subscribe(new e(a,this.scheduler))};return a}(),e=function(a){function d(d,b){a.call(this,d);this.scheduler=b;this.lastTime=0;this.lastTime=b.now()}h(d,a);d.prototype._next=function(a){var c=
this.scheduler.now(),d=c-this.lastTime;this.lastTime=c;this.destination.next(new k(a,d))};return d}(b.Subscriber)},{"../Subscriber":13,"../scheduler/async":309}],284:[function(a,b,f){var h=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)},l=a("../scheduler/async"),k=a("../util/isDate");a=a("../Subscriber");f.timeout=function(a,d,b){void 0===d&&(d=null);void 0===
b&&(b=l.async);var e=k.isDate(a);a=e?+a-b.now():Math.abs(a);return this.lift(new g(a,e,d,b))};var g=function(){function a(c,b,e,f){this.waitFor=c;this.absoluteTimeout=b;this.errorToSend=e;this.scheduler=f}a.prototype.call=function(a,c){return c._subscribe(new e(a,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))};return a}(),e=function(a){function d(d,b,e,f,g){a.call(this,d);this.absoluteTimeout=b;this.waitFor=e;this.errorToSend=f;this.scheduler=g;this._previousIndex=this.index=
0;this._hasCompleted=!1;this.scheduleTimeout()}h(d,a);Object.defineProperty(d.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0});d.dispatchTimeout=function(a){var c=a.subscriber;a=a.index;c.hasCompleted||c.previousIndex!==a||c.notifyTimeout()};d.prototype.scheduleTimeout=function(){var a=this.index;this.scheduler.schedule(d.dispatchTimeout,
this.waitFor,{subscriber:this,index:a});this.index++;this._previousIndex=a};d.prototype._next=function(a){this.destination.next(a);this.absoluteTimeout||this.scheduleTimeout()};d.prototype._error=function(a){this.destination.error(a);this._hasCompleted=!0};d.prototype._complete=function(){this.destination.complete();this._hasCompleted=!0};d.prototype.notifyTimeout=function(){this.error(this.errorToSend||Error("timeout"))};return d}(a.Subscriber)},{"../Subscriber":13,"../scheduler/async":309,"../util/isDate":332}],
285:[function(a,b,f){var h=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)},l=a("../scheduler/async"),k=a("../util/isDate");b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");f.timeoutWith=function(a,c,b){void 0===b&&(b=l.async);var f=k.isDate(a);a=f?+a-b.now():Math.abs(a);return this.lift(new e(a,f,c,b))};var e=function(){function a(c,d,b,e){this.waitFor=
c;this.absoluteTimeout=d;this.withObservable=b;this.scheduler=e}a.prototype.call=function(a,d){return d._subscribe(new c(a,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))};return a}(),c=function(a){function c(b,e,f,g,k){a.call(this);this.destination=b;this.absoluteTimeout=e;this.waitFor=f;this.withObservable=g;this.scheduler=k;this.timeoutSubscription=void 0;this._previousIndex=this.index=0;this._hasCompleted=!1;b.add(this);this.scheduleTimeout()}h(c,a);Object.defineProperty(c.prototype,
"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0});c.dispatchTimeout=function(a){var c=a.subscriber;a=a.index;c.hasCompleted||c.previousIndex!==a||c.handleTimeout()};c.prototype.scheduleTimeout=function(){var a=this.index;this.scheduler.schedule(c.dispatchTimeout,this.waitFor,{subscriber:this,index:a});this.index++;this._previousIndex=
a};c.prototype._next=function(a){this.destination.next(a);this.absoluteTimeout||this.scheduleTimeout()};c.prototype._error=function(a){this.destination.error(a);this._hasCompleted=!0};c.prototype._complete=function(){this.destination.complete();this._hasCompleted=!0};c.prototype.handleTimeout=function(){if(!this.closed){var a=this.withObservable;this.unsubscribe();this.destination.add(this.timeoutSubscription=g.subscribeToResult(this,a))}};return c}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../scheduler/async":309,
"../util/isDate":332,"../util/subscribeToResult":341}],286:[function(a,b,f){var h=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};b=a("../Subscriber");var l=a("../scheduler/async");f.timestamp=function(a){void 0===a&&(a=l.async);return this.lift(new g(a))};var k=function(){return function(a,d){this.value=a;this.timestamp=d}}();f.Timestamp=k;var g=function(){function a(c){this.scheduler=
c}a.prototype.call=function(a,c){return c._subscribe(new e(a,this.scheduler))};return a}(),e=function(a){function d(d,b){a.call(this,d);this.scheduler=b}h(d,a);d.prototype._next=function(a){var c=this.scheduler.now();this.destination.next(new k(a,c))};return d}(b.Subscriber)},{"../Subscriber":13,"../scheduler/async":309}],287:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)};a=a("../Subscriber");f.toArray=function(){return this.lift(new l)};var l=function(){function a(){}a.prototype.call=function(a,c){return c._subscribe(new k(a))};return a}(),k=function(a){function b(c){a.call(this,c);this.array=[]}h(b,a);b.prototype._next=function(a){this.array.push(a)};b.prototype._complete=function(){this.destination.next(this.array);this.destination.complete()};return b}(a.Subscriber)},{"../Subscriber":13}],288:[function(a,b,f){var h=a("../util/root");
f.toPromise=function(a){var b=this;a||(h.root.Rx&&h.root.Rx.config&&h.root.Rx.config.Promise?a=h.root.Rx.config.Promise:h.root.Promise&&(a=h.root.Promise));if(!a)throw Error("no Promise impl found");return new a(function(a,e){var c;b.subscribe(function(a){return c=a},function(a){return e(a)},function(){return a(c)})})}},{"../util/root":340}],289:[function(a,b,f){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===
b?Object.create(b):(e.prototype=b.prototype,new e)},l=a("../Subject");b=a("../OuterSubscriber");var k=a("../util/subscribeToResult");f.window=function(a){return this.lift(new g(a))};var g=function(){function a(c){this.windowBoundaries=c}a.prototype.call=function(a,c){var b=new e(a),f=c._subscribe(b);f.closed||b.add(k.subscribeToResult(b,this.windowBoundaries));return f};return a}(),e=function(a){function b(d){a.call(this,d);this.window=new l.Subject;d.next(this.window)}h(b,a);b.prototype.notifyNext=
function(a,b,c,d,e){this.openWindow()};b.prototype.notifyError=function(a,b){this._error(a)};b.prototype.notifyComplete=function(a){this._complete()};b.prototype._next=function(a){this.window.next(a)};b.prototype._error=function(a){this.window.error(a);this.destination.error(a)};b.prototype._complete=function(){this.window.complete();this.destination.complete()};b.prototype._unsubscribe=function(){this.window=null};b.prototype.openWindow=function(){var a=this.window;a&&a.complete();var a=this.destination,
b=this.window=new l.Subject;a.next(b)};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../Subject":11,"../util/subscribeToResult":341}],290:[function(a,b,f){var h=this&&this.__extends||function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};b=a("../Subscriber");var l=a("../Subject");f.windowCount=function(a,b){void 0===b&&(b=0);return this.lift(new k(a,b))};var k=function(){function a(b,
d){this.windowSize=b;this.startWindowEvery=d}a.prototype.call=function(a,b){return b._subscribe(new g(a,this.windowSize,this.startWindowEvery))};return a}(),g=function(a){function b(c,f,g){a.call(this,c);this.destination=c;this.windowSize=f;this.startWindowEvery=g;this.windows=[new l.Subject];this.count=0;c.next(this.windows[0])}h(b,a);b.prototype._next=function(a){for(var b=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,c=this.destination,e=this.windowSize,f=this.windows,g=f.length,
k=0;k<g&&!this.closed;k++)f[k].next(a);a=this.count-e+1;0<=a&&0===a%b&&!this.closed&&f.shift().complete();0!==++this.count%b||this.closed||(b=new l.Subject,f.push(b),c.next(b))};b.prototype._error=function(a){var b=this.windows;if(b)for(;0<b.length&&!this.closed;)b.shift().error(a);this.destination.error(a)};b.prototype._complete=function(){var a=this.windows;if(a)for(;0<a.length&&!this.closed;)a.shift().complete();this.destination.complete()};b.prototype._unsubscribe=function(){this.count=0;this.windows=
null};return b}(b.Subscriber)},{"../Subject":11,"../Subscriber":13}],291:[function(a,b,f){function h(a){var b=a.subscriber,c=a.windowTimeSpan,d=a.window;d&&d.complete();a.window=b.openWindow();this.schedule(a,c)}function l(a){var b=a.windowTimeSpan,c=a.subscriber,d=a.scheduler,e=a.windowCreationInterval,f=c.openWindow(),g={action:this,subscription:null};g.subscription=d.schedule(k,b,{subscriber:c,window:f,context:g});this.add(g.subscription);this.schedule(a,e)}function k(a){var b=a.subscriber,c=a.window;
(a=a.context)&&a.action&&a.subscription&&a.action.remove(a.subscription);b.closeWindow(c)}var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subject"),c=a("../scheduler/async");a=a("../Subscriber");f.windowTime=function(a,b,e){void 0===b&&(b=null);void 0===e&&(e=c.async);return this.lift(new d(a,b,e))};var d=function(){function a(b,c,d){this.windowTimeSpan=
b;this.windowCreationInterval=c;this.scheduler=d}a.prototype.call=function(a,b){return b._subscribe(new m(a,this.windowTimeSpan,this.windowCreationInterval,this.scheduler))};return a}(),m=function(a){function b(c,d,e,f){a.call(this,c);this.destination=c;this.windowTimeSpan=d;this.windowCreationInterval=e;this.scheduler=f;this.windows=[];if(null!==e&&0<=e){c={subscriber:this,window:this.openWindow(),context:null};var g={windowTimeSpan:d,windowCreationInterval:e,subscriber:this,scheduler:f};this.add(f.schedule(k,
d,c));this.add(f.schedule(l,e,g))}else e={subscriber:this,window:this.openWindow(),windowTimeSpan:d},this.add(f.schedule(h,d,e))}g(b,a);b.prototype._next=function(a){for(var b=this.windows,c=b.length,d=0;d<c;d++){var e=b[d];e.closed||e.next(a)}};b.prototype._error=function(a){for(var b=this.windows;0<b.length;)b.shift().error(a);this.destination.error(a)};b.prototype._complete=function(){for(var a=this.windows;0<a.length;){var b=a.shift();b.closed||b.complete()}this.destination.complete()};b.prototype.openWindow=
function(){var a=new e.Subject;this.windows.push(a);this.destination.next(a);return a};b.prototype.closeWindow=function(a){a.complete();var b=this.windows;b.splice(b.indexOf(a),1)};return b}(a.Subscriber)},{"../Subject":11,"../Subscriber":13,"../scheduler/async":309}],292:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},l=a("../Subject"),
k=a("../Subscription"),g=a("../util/tryCatch"),e=a("../util/errorObject");b=a("../OuterSubscriber");var c=a("../util/subscribeToResult");f.windowToggle=function(a,b){return this.lift(new d(a,b))};var d=function(){function a(b,c){this.openings=b;this.closingSelector=c}a.prototype.call=function(a,b){return b._subscribe(new m(a,this.openings,this.closingSelector))};return a}(),m=function(a){function b(d,e,f){a.call(this,d);this.openings=e;this.closingSelector=f;this.contexts=[];this.add(this.openSubscription=
c.subscribeToResult(this,e,e))}h(b,a);b.prototype._next=function(a){var b=this.contexts;if(b)for(var c=b.length,d=0;d<c;d++)b[d].window.next(a)};b.prototype._error=function(b){var c=this.contexts;this.contexts=null;if(c)for(var d=c.length,e=-1;++e<d;){var f=c[e];f.window.error(b);f.subscription.unsubscribe()}a.prototype._error.call(this,b)};b.prototype._complete=function(){var b=this.contexts;this.contexts=null;if(b)for(var c=b.length,d=-1;++d<c;){var e=b[d];e.window.complete();e.subscription.unsubscribe()}a.prototype._complete.call(this)};
b.prototype._unsubscribe=function(){var a=this.contexts;this.contexts=null;if(a)for(var b=a.length,c=-1;++c<b;){var d=a[c];d.window.unsubscribe();d.subscription.unsubscribe()}};b.prototype.notifyNext=function(a,b,d,f,h){if(a===this.openings){f=g.tryCatch(this.closingSelector)(b);if(f===e.errorObject)return this.error(e.errorObject.e);a=new l.Subject;b=new k.Subscription;d={window:a,subscription:b};this.contexts.push(d);f=c.subscribeToResult(this,f,d);f.closed?this.closeWindow(this.contexts.length-
1):(f.context=d,b.add(f));this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(a))};b.prototype.notifyError=function(a){this.error(a)};b.prototype.notifyComplete=function(a){a!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(a.context))};b.prototype.closeWindow=function(a){if(-1!==a){var b=this.contexts,c=b[a],d=c.window,c=c.subscription;b.splice(a,1);d.complete();c.unsubscribe()}};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../Subject":11,"../Subscription":14,
"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],293:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},l=a("../Subject"),k=a("../util/tryCatch"),g=a("../util/errorObject");b=a("../OuterSubscriber");var e=a("../util/subscribeToResult");f.windowWhen=function(a){return this.lift(new c(a))};var c=function(){function a(b){this.closingSelector=
b}a.prototype.call=function(a,b){return b._subscribe(new d(a,this.closingSelector))};return a}(),d=function(a){function b(c,d){a.call(this,c);this.destination=c;this.closingSelector=d;this.openWindow()}h(b,a);b.prototype.notifyNext=function(a,b,c,d,e){this.openWindow(e)};b.prototype.notifyError=function(a,b){this._error(a)};b.prototype.notifyComplete=function(a){this.openWindow(a)};b.prototype._next=function(a){this.window.next(a)};b.prototype._error=function(a){this.window.error(a);this.destination.error(a);
this.unsubscribeClosingNotification()};b.prototype._complete=function(){this.window.complete();this.destination.complete();this.unsubscribeClosingNotification()};b.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()};b.prototype.openWindow=function(a){void 0===a&&(a=null);a&&(this.remove(a),a.unsubscribe());(a=this.window)&&a.complete();a=this.window=new l.Subject;this.destination.next(a);a=k.tryCatch(this.closingSelector)();a===g.errorObject?
(a=g.errorObject.e,this.destination.error(a),this.window.error(a)):this.add(this.closingNotification=e.subscribeToResult(this,a))};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../Subject":11,"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],294:[function(a,b,f){var h=this&&this.__extends||function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};b=a("../OuterSubscriber");
var l=a("../util/subscribeToResult");f.withLatestFrom=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var d;"function"===typeof a[a.length-1]&&(d=a.pop());return this.lift(new k(a,d))};var k=function(){function a(b,d){this.observables=b;this.project=d}a.prototype.call=function(a,b){return b._subscribe(new g(a,this.observables,this.project))};return a}(),g=function(a){function b(c,f,g){a.call(this,c);this.observables=f;this.project=g;this.toRespond=[];c=f.length;this.values=
Array(c);for(g=0;g<c;g++)this.toRespond.push(g);for(g=0;g<c;g++){var k=f[g];this.add(l.subscribeToResult(this,k,k,g))}}h(b,a);b.prototype.notifyNext=function(a,b,c,e,f){this.values[c]=b;a=this.toRespond;0<a.length&&(c=a.indexOf(c),-1!==c&&a.splice(c,1))};b.prototype.notifyComplete=function(){};b.prototype._next=function(a){0===this.toRespond.length&&(a=[a].concat(this.values),this.project?this._tryProject(a):this.destination.next(a))};b.prototype._tryProject=function(a){var b;try{b=this.project.apply(this,
a)}catch(c){this.destination.error(c);return}this.destination.next(b)};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],295:[function(a,b,f){function h(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=a[a.length-1];"function"===typeof b&&a.pop();return(new k.ArrayObservable(a)).lift(new m(b))}var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)},k=a("../observable/ArrayObservable"),g=a("../util/isArray");b=a("../Subscriber");var e=a("../OuterSubscriber"),c=a("../util/subscribeToResult"),d=a("../symbol/iterator");f.zipProto=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];a.unshift(this);return h.apply(this,a)};f.zipStatic=h;var m=function(){function a(b){this.project=b}a.prototype.call=function(a,b){return b._subscribe(new n(a,this.project))};return a}();f.ZipOperator=m;var n=function(a){function b(c,
d,e){void 0===e&&(e=Object.create(null));a.call(this,c);this.index=0;this.iterators=[];this.active=0;this.project="function"===typeof d?d:null;this.values=e}l(b,a);b.prototype._next=function(a){var b=this.iterators,c=this.index++;g.isArray(a)?b.push(new t(a)):"function"===typeof a[d.$$iterator]?b.push(new q(a[d.$$iterator]())):b.push(new p(this.destination,this,a,c))};b.prototype._complete=function(){var a=this.iterators,b=a.length;this.active=b;for(var c=0;c<b;c++){var d=a[c];d.stillUnsubscribed?
this.add(d.subscribe(d,c)):this.active--}};b.prototype.notifyInactive=function(){this.active--;0===this.active&&this.destination.complete()};b.prototype.checkIterators=function(){for(var a=this.iterators,b=a.length,c=this.destination,d=0;d<b;d++){var e=a[d];if("function"===typeof e.hasValue&&!e.hasValue())return}for(var f=!1,g=[],d=0;d<b;d++){var e=a[d],k=e.next();e.hasCompleted()&&(f=!0);if(k.done){c.complete();return}g.push(k.value)}this.project?this._tryProject(g):c.next(g);f&&c.complete()};b.prototype._tryProject=
function(a){var b;try{b=this.project.apply(this,a)}catch(c){this.destination.error(c);return}this.destination.next(b)};return b}(b.Subscriber);f.ZipSubscriber=n;var q=function(){function a(b){this.iterator=b;this.nextResult=b.next()}a.prototype.hasValue=function(){return!0};a.prototype.next=function(){var a=this.nextResult;this.nextResult=this.iterator.next();return a};a.prototype.hasCompleted=function(){var a=this.nextResult;return a&&a.done};return a}(),t=function(){function a(b){this.array=b;this.length=
this.index=0;this.length=b.length}a.prototype[d.$$iterator]=function(){return this};a.prototype.next=function(a){a=this.index++;var b=this.array;return a<this.length?{value:b[a],done:!1}:{value:null,done:!0}};a.prototype.hasValue=function(){return this.array.length>this.index};a.prototype.hasCompleted=function(){return this.array.length===this.index};return a}(),p=function(a){function b(c,d,e,f){a.call(this,c);this.parent=d;this.observable=e;this.index=f;this.stillUnsubscribed=!0;this.buffer=[];this.isComplete=
!1}l(b,a);b.prototype[d.$$iterator]=function(){return this};b.prototype.next=function(){var a=this.buffer;return 0===a.length&&this.isComplete?{value:null,done:!0}:{value:a.shift(),done:!1}};b.prototype.hasValue=function(){return 0<this.buffer.length};b.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete};b.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()};b.prototype.notifyNext=function(a,
b,c,d,e){this.buffer.push(b);this.parent.checkIterators()};b.prototype.subscribe=function(a,b){return c.subscribeToResult(this,this.observable,this,b)};return b}(e.OuterSubscriber)},{"../OuterSubscriber":7,"../Subscriber":13,"../observable/ArrayObservable":145,"../symbol/iterator":311,"../util/isArray":331,"../util/subscribeToResult":341}],296:[function(a,b,f){var h=a("./zip");f.zipAll=function(a){return this.lift(new h.ZipOperator(a))}},{"./zip":295}],297:[function(a,b,f){var h=this&&this.__extends||
function(a,b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};a=function(a){function b(f,e){a.call(this)}h(b,a);b.prototype.schedule=function(a,b){return this};return b}(a("../Subscription").Subscription);f.Action=a},{"../Subscription":14}],298:[function(a,b,f){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===
b?Object.create(b):(e.prototype=b.prototype,new e)};b=a("./AsyncAction");var l=a("../util/AnimationFrame");a=function(a){function b(e,c){a.call(this,e,c);this.scheduler=e;this.work=c}h(b,a);b.prototype.requestAsyncId=function(b,c,d){void 0===d&&(d=0);if(null!==d&&0<d)return a.prototype.requestAsyncId.call(this,b,c,d);b.actions.push(this);return b.scheduled||(b.scheduled=l.AnimationFrame.requestAnimationFrame(b.flush.bind(b,null)))};b.prototype.recycleAsyncId=function(b,c,d){void 0===d&&(d=0);if(null!==
d&&0<d)return a.prototype.recycleAsyncId.call(this,b,c,d);0===b.actions.length&&(l.AnimationFrame.cancelAnimationFrame(c),b.scheduled=void 0)};return b}(b.AsyncAction);f.AnimationFrameAction=a},{"../util/AnimationFrame":319,"./AsyncAction":302}],299:[function(a,b,f){var h=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};a=function(a){function b(){a.apply(this,arguments)}
h(b,a);b.prototype.flush=function(){this.active=!0;this.scheduled=void 0;var a=this.actions,b,c=-1,d=a.length,f=a.shift();do if(b=f.execute(f.state,f.delay))break;while(++c<d&&(f=a.shift()));this.active=!1;if(b){for(;++c<d&&(f=a.shift());)f.unsubscribe();throw b;}};return b}(a("./AsyncScheduler").AsyncScheduler);f.AnimationFrameScheduler=a},{"./AsyncScheduler":303}],300:[function(a,b,f){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=
b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)},l=a("../util/Immediate");a=function(a){function b(e,c){a.call(this,e,c);this.scheduler=e;this.work=c}h(b,a);b.prototype.requestAsyncId=function(b,c,d){void 0===d&&(d=0);if(null!==d&&0<d)return a.prototype.requestAsyncId.call(this,b,c,d);b.actions.push(this);return b.scheduled||(b.scheduled=l.Immediate.setImmediate(b.flush.bind(b,null)))};b.prototype.recycleAsyncId=function(b,c,d){void 0===d&&(d=0);if(null!==d&&0<d)return a.prototype.recycleAsyncId.call(this,
b,c,d);0===b.actions.length&&(l.Immediate.clearImmediate(c),b.scheduled=void 0)};return b}(a("./AsyncAction").AsyncAction);f.AsapAction=a},{"../util/Immediate":323,"./AsyncAction":302}],301:[function(a,b,f){var h=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};a=function(a){function b(){a.apply(this,arguments)}h(b,a);b.prototype.flush=function(){this.active=!0;
this.scheduled=void 0;var a=this.actions,b,c=-1,d=a.length,f=a.shift();do if(b=f.execute(f.state,f.delay))break;while(++c<d&&(f=a.shift()));this.active=!1;if(b){for(;++c<d&&(f=a.shift());)f.unsubscribe();throw b;}};return b}(a("./AsyncScheduler").AsyncScheduler);f.AsapScheduler=a},{"./AsyncScheduler":303}],302:[function(a,b,f){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=
b.prototype,new e)},l=a("../util/root");a=function(a){function b(e,c){a.call(this,e,c);this.scheduler=e;this.work=c;this.pending=!1}h(b,a);b.prototype.schedule=function(a,b){void 0===b&&(b=0);if(this.closed)return this;this.state=a;this.pending=!0;var d=this.id,f=this.scheduler;null!=d&&(this.id=this.recycleAsyncId(f,d,b));this.delay=b;this.id=this.id||this.requestAsyncId(f,this.id,b);return this};b.prototype.requestAsyncId=function(a,b,d){void 0===d&&(d=0);return l.root.setInterval(a.flush.bind(a,
this),d)};b.prototype.recycleAsyncId=function(a,b,d){void 0===d&&(d=0);return null!==d&&this.delay===d?b:(l.root.clearInterval(b),void 0)};b.prototype.execute=function(a,b){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var d=this._execute(a,b);if(d)return d;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))};b.prototype._execute=function(a,b){var d=!1,f=void 0;try{this.work(a)}catch(g){d=!0,f=!!g&&g||Error(g)}if(d)return this.unsubscribe(),
f};b.prototype._unsubscribe=function(){var a=this.id,b=this.scheduler,d=b.actions,f=d.indexOf(this);this.state=this.delay=this.work=null;this.pending=!1;this.scheduler=null;-1!==f&&d.splice(f,1);null!=a&&(this.id=this.recycleAsyncId(b,a,null))};return b}(a("./Action").Action);f.AsyncAction=a},{"../util/root":340,"./Action":297}],303:[function(a,b,f){var h=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):
(f.prototype=b.prototype,new f)};a=function(a){function b(){a.apply(this,arguments);this.actions=[];this.active=!1;this.scheduled=void 0}h(b,a);b.prototype.flush=function(a){var b=this.actions;if(this.active)b.push(a);else{var c;this.active=!0;do if(c=a.execute(a.state,a.delay))break;while(a=b.shift());this.active=!1;if(c){for(;a=b.shift();)a.unsubscribe();throw c;}}};return b}(a("../Scheduler").Scheduler);f.AsyncScheduler=a},{"../Scheduler":10}],304:[function(a,b,f){var h=this&&this.__extends||function(a,
b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};a=function(a){function b(f,e){a.call(this,f,e);this.scheduler=f;this.work=e}h(b,a);b.prototype.schedule=function(b,e){void 0===e&&(e=0);if(0<e)return a.prototype.schedule.call(this,b,e);this.delay=e;this.state=b;this.scheduler.flush(this);return this};b.prototype.execute=function(b,e){return 0<e||this.closed?a.prototype.execute.call(this,b,e):this._execute(b,
e)};b.prototype.requestAsyncId=function(b,e,c){void 0===c&&(c=0);return null!==c&&0<c?a.prototype.requestAsyncId.call(this,b,e,c):b.flush(this)};return b}(a("./AsyncAction").AsyncAction);f.QueueAction=a},{"./AsyncAction":302}],305:[function(a,b,f){var h=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};a=function(a){function b(){a.apply(this,arguments)}h(b,a);return b}(a("./AsyncScheduler").AsyncScheduler);
f.QueueScheduler=a},{"./AsyncScheduler":303}],306:[function(a,b,f){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a("./AsyncAction");a=function(a){function b(e,c){var d=this;void 0===e&&(e=l);void 0===c&&(c=Number.POSITIVE_INFINITY);a.call(this,e,function(){return d.frame});this.maxFrames=c;this.frame=0;this.index=-1}h(b,a);b.prototype.flush=function(){for(var a=
this.actions,b=this.maxFrames,d,f;(f=a.shift())&&(this.frame=f.delay)<=b&&!(d=f.execute(f.state,f.delay)););if(d){for(;f=a.shift();)f.unsubscribe();throw d;}};b.frameTimeFactor=10;return b}(a("./AsyncScheduler").AsyncScheduler);f.VirtualTimeScheduler=a;var l=function(a){function b(e,c,d){void 0===d&&(d=e.index+=1);a.call(this,e,c);this.scheduler=e;this.work=c;this.index=d;this.index=e.index=d}h(b,a);b.prototype.schedule=function(e,c){void 0===c&&(c=0);return this.id?this.add(new b(this.scheduler,
this.work)).schedule(e,c):a.prototype.schedule.call(this,e,c)};b.prototype.requestAsyncId=function(a,c,d){void 0===d&&(d=0);this.delay=a.frame+d;a=a.actions;a.push(this);a.sort(b.sortActions);return!0};b.prototype.recycleAsyncId=function(a,b,d){};b.sortActions=function(a,b){return a.delay===b.delay?a.index===b.index?0:a.index>b.index?1:-1:a.delay>b.delay?1:-1};return b}(b.AsyncAction);f.VirtualAction=l},{"./AsyncAction":302,"./AsyncScheduler":303}],307:[function(a,b,f){b=a("./AnimationFrameAction");
a=a("./AnimationFrameScheduler");f.animationFrame=new a.AnimationFrameScheduler(b.AnimationFrameAction)},{"./AnimationFrameAction":298,"./AnimationFrameScheduler":299}],308:[function(a,b,f){b=a("./AsapAction");a=a("./AsapScheduler");f.asap=new a.AsapScheduler(b.AsapAction)},{"./AsapAction":300,"./AsapScheduler":301}],309:[function(a,b,f){b=a("./AsyncAction");a=a("./AsyncScheduler");f.async=new a.AsyncScheduler(b.AsyncAction)},{"./AsyncAction":302,"./AsyncScheduler":303}],310:[function(a,b,f){b=a("./QueueAction");
a=a("./QueueScheduler");f.queue=new a.QueueScheduler(b.QueueAction)},{"./QueueAction":304,"./QueueScheduler":305}],311:[function(a,b,f){a=a("../util/root");b=a.root.Symbol;if("function"===typeof b)b.iterator?f.$$iterator=b.iterator:"function"===typeof b["for"]&&(f.$$iterator=b["for"]("iterator"));else if(a.root.Set&&"function"===typeof(new a.root.Set)["@@iterator"])f.$$iterator="@@iterator";else if(a.root.Map){b=Object.getOwnPropertyNames(a.root.Map.prototype);for(var h=0;h<b.length;++h){var l=b[h];
if("entries"!==l&&"size"!==l&&a.root.Map.prototype[l]===a.root.Map.prototype.entries){f.$$iterator=l;break}}}else f.$$iterator="@@iterator"},{"../util/root":340}],312:[function(a,b,f){function h(a){var b=a.Symbol;"function"===typeof b?b.observable?a=b.observable:(a=b("observable"),b.observable=a):a="@@observable";return a}a=a("../util/root");f.getSymbolObservable=h;f.$$observable=h(a.root)},{"../util/root":340}],313:[function(a,b,f){a=a("../util/root").root.Symbol;f.$$rxSubscriber="function"===typeof a&&
"function"===typeof a["for"]?a["for"]("rxSubscriber"):"@@rxSubscriber"},{"../util/root":340}],314:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},l=a("../Observable"),k=a("../Subscription");b=a("./SubscriptionLoggable");a=a("../util/applyMixins");l=function(a){function b(c,d){a.call(this,function(a){var b=this,c=b.logSubscribedFrame();a.add(new k.Subscription(function(){b.logUnsubscribedFrame(c)}));
b.scheduleMessages(a);return a});this.messages=c;this.subscriptions=[];this.scheduler=d}h(b,a);b.prototype.scheduleMessages=function(a){for(var b=this.messages.length,e=0;e<b;e++){var f=this.messages[e];a.add(this.scheduler.schedule(function(a){a.message.notification.observe(a.subscriber)},f.frame,{message:f,subscriber:a}))}};return b}(l.Observable);f.ColdObservable=l;a.applyMixins(l,[b.SubscriptionLoggable])},{"../Observable":5,"../Subscription":14,"../util/applyMixins":328,"./SubscriptionLoggable":317}],
315:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},l=a("../Subject"),k=a("../Subscription");b=a("./SubscriptionLoggable");a=a("../util/applyMixins");l=function(a){function b(c,d){a.call(this);this.messages=c;this.subscriptions=[];this.scheduler=d}h(b,a);b.prototype._subscribe=function(b){var d=this,e=d.logSubscribedFrame();b.add(new k.Subscription(function(){d.logUnsubscribedFrame(e)}));
return a.prototype._subscribe.call(this,b)};b.prototype.setup=function(){for(var a=this,b=a.messages.length,e=0;e<b;e++)(function(){var b=a.messages[e];a.scheduler.schedule(function(){b.notification.observe(a)},b.frame)})()};return b}(l.Subject);f.HotObservable=l;a.applyMixins(l,[b.SubscriptionLoggable])},{"../Subject":11,"../Subscription":14,"../util/applyMixins":328,"./SubscriptionLoggable":317}],316:[function(a,b,f){a=function(){return function(a,b){void 0===b&&(b=Number.POSITIVE_INFINITY);this.subscribedFrame=
a;this.unsubscribedFrame=b}}();f.SubscriptionLog=a},{}],317:[function(a,b,f){var h=a("./SubscriptionLog");a=function(){function a(){this.subscriptions=[]}a.prototype.logSubscribedFrame=function(){this.subscriptions.push(new h.SubscriptionLog(this.scheduler.now()));return this.subscriptions.length-1};a.prototype.logUnsubscribedFrame=function(a){var b=this.subscriptions;b[a]=new h.SubscriptionLog(b[a].subscribedFrame,this.scheduler.now())};return a}();f.SubscriptionLoggable=a},{"./SubscriptionLog":316}],
318:[function(a,b,f){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},l=a("../Observable"),k=a("../Notification"),g=a("./ColdObservable"),e=a("./HotObservable"),c=a("./SubscriptionLog"),d=a("../scheduler/VirtualTimeScheduler");a=function(a){function b(c){a.call(this,d.VirtualAction,750);this.assertDeepEqual=c;this.hotObservables=[];this.coldObservables=[];
this.flushTests=[]}h(b,a);b.prototype.createTime=function(a){a=a.indexOf("|");if(-1===a)throw Error('marble diagram for time should have a completion marker "|"');return a*b.frameTimeFactor};b.prototype.createColdObservable=function(a,c,d){if(-1!==a.indexOf("^"))throw Error('cold observable cannot have subscription offset "^"');if(-1!==a.indexOf("!"))throw Error('cold observable cannot have unsubscription marker "!"');a=b.parseMarbles(a,c,d);a=new g.ColdObservable(a,this);this.coldObservables.push(a);
return a};b.prototype.createHotObservable=function(a,c,d){if(-1!==a.indexOf("!"))throw Error('hot observable cannot have unsubscription marker "!"');a=b.parseMarbles(a,c,d);a=new e.HotObservable(a,this);this.hotObservables.push(a);return a};b.prototype.materializeInnerObservable=function(a,b){var c=this,d=[];a.subscribe(function(a){d.push({frame:c.frame-b,notification:k.Notification.createNext(a)})},function(a){d.push({frame:c.frame-b,notification:k.Notification.createError(a)})},function(){d.push({frame:c.frame-
b,notification:k.Notification.createComplete()})});return d};b.prototype.expectObservable=function(a,c){var d=this;void 0===c&&(c=null);var e=[],f={actual:e,ready:!1},g=b.parseMarblesAsSubscriptions(c).unsubscribedFrame,h;this.schedule(function(){h=a.subscribe(function(a){var b=a;a instanceof l.Observable&&(b=d.materializeInnerObservable(b,d.frame));e.push({frame:d.frame,notification:k.Notification.createNext(b)})},function(a){e.push({frame:d.frame,notification:k.Notification.createError(a)})},function(){e.push({frame:d.frame,
notification:k.Notification.createComplete()})})},0);g!==Number.POSITIVE_INFINITY&&this.schedule(function(){return h.unsubscribe()},g);this.flushTests.push(f);return{toBe:function(a,c,d){f.ready=!0;f.expected=b.parseMarbles(a,c,d,!0)}}};b.prototype.expectSubscriptions=function(a){var c={actual:a,ready:!1};this.flushTests.push(c);return{toBe:function(a){a="string"===typeof a?[a]:a;c.ready=!0;c.expected=a.map(function(a){return b.parseMarblesAsSubscriptions(a)})}}};b.prototype.flush=function(){for(var b=
this.hotObservables;0<b.length;)b.shift().setup();a.prototype.flush.call(this);for(b=this.flushTests.filter(function(a){return a.ready});0<b.length;){var c=b.shift();this.assertDeepEqual(c.actual,c.expected)}};b.parseMarblesAsSubscriptions=function(a){if("string"!==typeof a)return new c.SubscriptionLog(Number.POSITIVE_INFINITY);for(var b=a.length,d=-1,e=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=0;g<b;g++){var h=g*this.frameTimeFactor,l=a[g];switch(l){case "-":case " ":break;case "(":d=
h;break;case ")":d=-1;break;case "^":if(e!==Number.POSITIVE_INFINITY)throw Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");e=-1<d?d:h;break;case "!":if(f!==Number.POSITIVE_INFINITY)throw Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");f=-1<d?d:h;break;default:throw Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+l+"'.");}}return 0>f?new c.SubscriptionLog(e):
new c.SubscriptionLog(e,f)};b.parseMarbles=function(a,b,c,d){void 0===d&&(d=!1);if(-1!==a.indexOf("!"))throw Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var e=a.length,f=[],h=a.indexOf("^"),h=-1===h?0:h*-this.frameTimeFactor,l="object"!==typeof b?function(a){return a}:function(a){return d&&b[a]instanceof g.ColdObservable?b[a].messages:b[a]},m=-1,n=0;n<e;n++){var B=n*this.frameTimeFactor+h,y=void 0,C=a[n];switch(C){case "-":case " ":break;case "(":m=B;break;
case ")":m=-1;break;case "|":y=k.Notification.createComplete();break;case "^":break;case "#":y=k.Notification.createError(c||"error");break;default:y=k.Notification.createNext(l(C))}y&&f.push({frame:-1<m?m:B,notification:y})}return f};return b}(d.VirtualTimeScheduler);f.TestScheduler=a},{"../Notification":4,"../Observable":5,"../scheduler/VirtualTimeScheduler":306,"./ColdObservable":314,"./HotObservable":315,"./SubscriptionLog":316}],319:[function(a,b,f){a=a("./root");b=function(){return function(a){a.requestAnimationFrame?
(this.cancelAnimationFrame=a.cancelAnimationFrame.bind(a),this.requestAnimationFrame=a.requestAnimationFrame.bind(a)):a.mozRequestAnimationFrame?(this.cancelAnimationFrame=a.mozCancelAnimationFrame.bind(a),this.requestAnimationFrame=a.mozRequestAnimationFrame.bind(a)):a.webkitRequestAnimationFrame?(this.cancelAnimationFrame=a.webkitCancelAnimationFrame.bind(a),this.requestAnimationFrame=a.webkitRequestAnimationFrame.bind(a)):a.msRequestAnimationFrame?(this.cancelAnimationFrame=a.msCancelAnimationFrame.bind(a),
this.requestAnimationFrame=a.msRequestAnimationFrame.bind(a)):a.oRequestAnimationFrame?(this.cancelAnimationFrame=a.oCancelAnimationFrame.bind(a),this.requestAnimationFrame=a.oRequestAnimationFrame.bind(a)):(this.cancelAnimationFrame=a.clearTimeout.bind(a),this.requestAnimationFrame=function(b){return a.setTimeout(b,1E3/60)})}}();f.RequestAnimationFrameDefinition=b;f.AnimationFrame=new b(a.root)},{"./root":340}],320:[function(a,b,f){var h=this&&this.__extends||function(a,b){function f(){this.constructor=
a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};a=function(a){function b(){var f=a.call(this,"argument out of range");this.name=f.name="ArgumentOutOfRangeError";this.stack=f.stack;this.message=f.message}h(b,a);return b}(Error);f.ArgumentOutOfRangeError=a},{}],321:[function(a,b,f){var h=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):
(f.prototype=b.prototype,new f)};a=function(a){function b(){var f=a.call(this,"no elements in sequence");this.name=f.name="EmptyError";this.stack=f.stack;this.message=f.message}h(b,a);return b}(Error);f.EmptyError=a},{}],322:[function(a,b,f){a=function(){function a(){this.values={}}a.prototype["delete"]=function(a){this.values[a]=null;return!0};a.prototype.set=function(a,b){this.values[a]=b;return this};a.prototype.get=function(a){return this.values[a]};a.prototype.forEach=function(a,b){var f=this.values,
e;for(e in f)f.hasOwnProperty(e)&&null!==f[e]&&a.call(b,f[e],e)};a.prototype.clear=function(){this.values={}};return a}();f.FastMap=a},{}],323:[function(a,b,f){a=a("./root");b=function(){function a(b){this.root=b;b.setImmediate&&"function"===typeof b.setImmediate?(this.setImmediate=b.setImmediate.bind(b),this.clearImmediate=b.clearImmediate.bind(b)):(this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():
this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate(),b=function g(a){delete g.instance.tasksByHandle[a]},b.instance=this,this.clearImmediate=b)}a.prototype.identify=function(a){return this.root.Object.prototype.toString.call(a)};a.prototype.canUseProcessNextTick=
function(){return"[object process]"===this.identify(this.root.process)};a.prototype.canUseMessageChannel=function(){return!!this.root.MessageChannel};a.prototype.canUseReadyStateChange=function(){var a=this.root.document;return!!(a&&"onreadystatechange"in a.createElement("script"))};a.prototype.canUsePostMessage=function(){var a=this.root;if(a.postMessage&&!a.importScripts){var b=!0,f=a.onmessage;a.onmessage=function(){b=!1};a.postMessage("","*");a.onmessage=f;return b}return!1};a.prototype.partiallyApplied=
function(a){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];f=function c(){var a=c.handler,b=c.args;"function"===typeof a?a.apply(void 0,b):(new Function(""+a))()};f.handler=a;f.args=b;return f};a.prototype.addFromSetImmediateArguments=function(a){this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,a);return this.nextHandle++};a.prototype.createProcessNextTickSetImmediate=function(){var a=function g(){var a=g.instance,b=a.addFromSetImmediateArguments(arguments);a.root.process.nextTick(a.partiallyApplied(a.runIfPresent,
b));return b};a.instance=this;return a};a.prototype.createPostMessageSetImmediate=function(){var a=this.root,b="setImmediate$"+a.Math.random()+"$",f=function c(d){var f=c.instance;d.source===a&&"string"===typeof d.data&&0===d.data.indexOf(b)&&f.runIfPresent(+d.data.slice(b.length))};f.instance=this;a.addEventListener("message",f,!1);f=function d(){var a=d,b=a.messagePrefix,a=a.instance,f=a.addFromSetImmediateArguments(arguments);a.root.postMessage(b+f,"*");return f};f.instance=this;f.messagePrefix=
b;return f};a.prototype.runIfPresent=function(a){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,a),0);else{var b=this.tasksByHandle[a];if(b){this.currentlyRunningATask=!0;try{b()}finally{this.clearImmediate(a),this.currentlyRunningATask=!1}}}};a.prototype.createMessageChannelSetImmediate=function(){var a=this,b=new this.root.MessageChannel;b.port1.onmessage=function(b){a.runIfPresent(b.data)};var f=function c(){var a=c,b=a.channel,a=a.instance.addFromSetImmediateArguments(arguments);
b.port2.postMessage(a);return a};f.channel=b;f.instance=this;return f};a.prototype.createReadyStateChangeSetImmediate=function(){var a=function g(){var a=g.instance,b=a.root.document,d=b.documentElement,f=a.addFromSetImmediateArguments(arguments),h=b.createElement("script");h.onreadystatechange=function(){a.runIfPresent(f);h.onreadystatechange=null;d.removeChild(h);h=null};d.appendChild(h);return f};a.instance=this;return a};a.prototype.createSetTimeoutSetImmediate=function(){var a=function g(){var a=
g.instance,b=a.addFromSetImmediateArguments(arguments);a.root.setTimeout(a.partiallyApplied(a.runIfPresent,b),0);return b};a.instance=this;return a};return a}();f.ImmediateDefinition=b;f.Immediate=new b(a.root)},{"./root":340}],324:[function(a,b,f){b=a("./root");a=a("./MapPolyfill");f.Map=b.root.Map||a.MapPolyfill},{"./MapPolyfill":325,"./root":340}],325:[function(a,b,f){a=function(){function a(){this.size=0;this._values=[];this._keys=[]}a.prototype.get=function(a){a=this._keys.indexOf(a);return-1===
a?void 0:this._values[a]};a.prototype.set=function(a,b){var f=this._keys.indexOf(a);-1===f?(this._keys.push(a),this._values.push(b),this.size++):this._values[f]=b;return this};a.prototype["delete"]=function(a){a=this._keys.indexOf(a);if(-1===a)return!1;this._values.splice(a,1);this._keys.splice(a,1);this.size--;return!0};a.prototype.clear=function(){this._keys.length=0;this.size=this._values.length=0};a.prototype.forEach=function(a,b){for(var f=0;f<this.size;f++)a.call(b,this._values[f],this._keys[f])};
return a}();f.MapPolyfill=a},{}],326:[function(a,b,f){var h=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};a=function(a){function b(){var f=a.call(this,"object unsubscribed");this.name=f.name="ObjectUnsubscribedError";this.stack=f.stack;this.message=f.message}h(b,a);return b}(Error);f.ObjectUnsubscribedError=a},{}],327:[function(a,b,f){var h=this&&this.__extends||
function(a,b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};a=function(a){function b(f){a.call(this);this.errors=f;f=Error.call(this,f?f.length+" errors occurred during unsubscription:\n  "+f.map(function(a,b){return b+1+") "+a.toString()}).join("\n  "):"");this.name=f.name="UnsubscriptionError";this.stack=f.stack;this.message=f.message}h(b,a);return b}(Error);f.UnsubscriptionError=a},{}],328:[function(a,
b,f){f.applyMixins=function(a,b){for(var f=0,g=b.length;f<g;f++)for(var e=b[f],c=Object.getOwnPropertyNames(e.prototype),d=0,m=c.length;d<m;d++){var n=c[d];a.prototype[n]=e.prototype[n]}}},{}],329:[function(a,b,f){var h=a("./root").root.Object;"function"!=typeof h.assign&&function(){h.assign=function(a){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];if(void 0===a||null===a)throw new TypeError("cannot convert undefined or null to object");for(var f=h(a),e=b.length,c=0;c<e;c++){var d=b[c];
if(void 0!==d&&null!==d)for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m])}return f}}();f.assign=h.assign},{"./root":340}],330:[function(a,b,f){f.errorObject={e:{}}},{}],331:[function(a,b,f){f.isArray=Array.isArray||function(a){return a&&"number"===typeof a.length}},{}],332:[function(a,b,f){f.isDate=function(a){return a instanceof Date&&!isNaN(+a)}},{}],333:[function(a,b,f){f.isFunction=function(a){return"function"===typeof a}},{}],334:[function(a,b,f){var h=a("../util/isArray");f.isNumeric=function(a){return!h.isArray(a)&&
0<=a-parseFloat(a)+1}},{"../util/isArray":331}],335:[function(a,b,f){f.isObject=function(a){return null!=a&&"object"===typeof a}},{}],336:[function(a,b,f){f.isPromise=function(a){return a&&"function"!==typeof a.subscribe&&"function"===typeof a.then}},{}],337:[function(a,b,f){f.isScheduler=function(a){return a&&"function"===typeof a.schedule}},{}],338:[function(a,b,f){f.noop=function(){}},{}],339:[function(a,b,f){f.not=function(a,b){function f(){return!f.pred.apply(f.thisArg,arguments)}f.pred=a;f.thisArg=
b;return f}},{}],340:[function(a,b,f){a="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};f.root=b[typeof self]&&self||b[typeof window]&&window;!(a=b[typeof a]&&a)||a.global!==a&&a.window!==a||(f.root=a)},{}],341:[function(a,b,f){var h=a("./root"),l=a("./isArray"),k=a("./isPromise"),g=a("../Observable"),e=a("../symbol/iterator"),c=a("../InnerSubscriber"),d=a("../symbol/observable");
f.subscribeToResult=function(a,b,f,t){var p=new c.InnerSubscriber(a,f,t);if(p.closed)return null;if(b instanceof g.Observable)return b._isScalar?(p.next(b.value),p.complete(),null):b.subscribe(p);if(l.isArray(b)){a=0;for(f=b.length;a<f&&!p.closed;a++)p.next(b[a]);p.closed||p.complete()}else{if(k.isPromise(b))return b.then(function(a){p.closed||(p.next(a),p.complete())},function(a){return p.error(a)}).then(null,function(a){h.root.setTimeout(function(){throw a;})}),p;if("function"===typeof b[e.$$iterator]){b=
b[e.$$iterator]();do{a=b.next();if(a.done){p.complete();break}p.next(a.value);if(p.closed)break}while(1)}else if("function"===typeof b[d.$$observable])if(b=b[d.$$observable](),"function"!==typeof b.subscribe)p.error(Error("invalid observable"));else return b.subscribe(new c.InnerSubscriber(a,f,t));else p.error(new TypeError("unknown type returned"))}return null}},{"../InnerSubscriber":3,"../Observable":5,"../symbol/iterator":311,"../symbol/observable":312,"./isArray":331,"./isPromise":336,"./root":340}],
342:[function(a,b,f){var h=a("../Subscriber"),l=a("../symbol/rxSubscriber");f.toSubscriber=function(a,b,e){if(a){if(a instanceof h.Subscriber)return a;if(a[l.$$rxSubscriber])return a[l.$$rxSubscriber]()}return a||b||e?new h.Subscriber(a,b,e):new h.Subscriber}},{"../Subscriber":13,"../symbol/rxSubscriber":313}],343:[function(a,b,f){function h(){try{return k.apply(this,arguments)}catch(a){return l.errorObject.e=a,l.errorObject}}var l=a("./errorObject"),k;f.tryCatch=function(a){k=a;return h}},{"./errorObject":330}]},
{},[9])(9)});

